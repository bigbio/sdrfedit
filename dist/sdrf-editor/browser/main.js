import{a as zn,b as Is,c as Ei,d as ln,e as Hc,f as Uc,g as Si,h as zc,i as Gc,j as Mi,k as qc}from"./chunk-FIWRXBYQ.js";import{a as I,b as H,c as $c,d as Om,e as Am,f as O,g as Jt,h as Di,i as Un}from"./chunk-KAWQVD33.js";var pm=Om((Nc,Pc)=>{"use strict";((n,e)=>{typeof define=="function"&&define.amd?define([],e):typeof Pc=="object"&&typeof Nc<"u"?Pc.exports=e():n.Papa=e()})(Nc,function n(){var e=typeof self<"u"?self:typeof window<"u"?window:e!==void 0?e:{},t,o=!e.document&&!!e.postMessage,i=e.IS_PAPA_WORKER||!1,r={},s=0,a={};function l(v){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(_){var E=Bn(_);E.chunkSize=parseInt(E.chunkSize),_.step||_.chunk||(E.chunkSize=null),this._handle=new g(E),(this._handle.streamer=this)._config=E}.call(this,v),this.parseChunk=function(_,E){var k=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<k){let Z=this._config.newline;Z||(N=this._config.quoteChar||'"',Z=this._handle.guessLineEndings(_,N)),_=[..._.split(Z).slice(k)].join(Z)}this.isFirstChunk&&fe(this._config.beforeFirstChunk)&&(N=this._config.beforeFirstChunk(_))!==void 0&&(_=N),this.isFirstChunk=!1,this._halted=!1;var k=this._partialLine+_,N=(this._partialLine="",this._handle.parse(k,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(_=N.meta.cursor,k=(this._finished||(this._partialLine=k.substring(_-this._baseIndex),this._baseIndex=_),N&&N.data&&(this._rowCount+=N.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),i)e.postMessage({results:N,workerId:a.WORKER_ID,finished:k});else if(fe(this._config.chunk)&&!E){if(this._config.chunk(N,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=N=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(N.data),this._completeResults.errors=this._completeResults.errors.concat(N.errors),this._completeResults.meta=N.meta),this._completed||!k||!fe(this._config.complete)||N&&N.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),k||N&&N.meta.paused||this._nextChunk(),N}this._halted=!0},this._sendError=function(_){fe(this._config.error)?this._config.error(_):i&&this._config.error&&e.postMessage({workerId:a.WORKER_ID,error:_,finished:!1})}}function d(v){var _;(v=v||{}).chunkSize||(v.chunkSize=a.RemoteChunkSize),l.call(this,v),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(_=new XMLHttpRequest,this._config.withCredentials&&(_.withCredentials=this._config.withCredentials),o||(_.onload=pt(this._chunkLoaded,this),_.onerror=pt(this._chunkError,this)),_.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var E,k=this._config.downloadRequestHeaders;for(E in k)_.setRequestHeader(E,k[E])}var N;this._config.chunkSize&&(N=this._start+this._config.chunkSize-1,_.setRequestHeader("Range","bytes="+this._start+"-"+N));try{_.send(this._config.downloadRequestBody)}catch(Z){this._chunkError(Z.message)}o&&_.status===0&&this._chunkError()}},this._chunkLoaded=function(){_.readyState===4&&(_.status<200||400<=_.status?this._chunkError():(this._start+=this._config.chunkSize||_.responseText.length,this._finished=!this._config.chunkSize||this._start>=(E=>(E=E.getResponseHeader("Content-Range"))!==null?parseInt(E.substring(E.lastIndexOf("/")+1)):-1)(_),this.parseChunk(_.responseText)))},this._chunkError=function(E){E=_.statusText||E,this._sendError(new Error(E))}}function f(v){(v=v||{}).chunkSize||(v.chunkSize=a.LocalChunkSize),l.call(this,v);var _,E,k=typeof FileReader<"u";this.stream=function(N){this._input=N,E=N.slice||N.webkitSlice||N.mozSlice,k?((_=new FileReader).onload=pt(this._chunkLoaded,this),_.onerror=pt(this._chunkError,this)):_=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var N=this._input,Z=(this._config.chunkSize&&(Z=Math.min(this._start+this._config.chunkSize,this._input.size),N=E.call(N,this._start,Z)),_.readAsText(N,this._config.encoding));k||this._chunkLoaded({target:{result:Z}})},this._chunkLoaded=function(N){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(N.target.result)},this._chunkError=function(){this._sendError(_.error)}}function h(v){var _;l.call(this,v=v||{}),this.stream=function(E){return _=E,this._nextChunk()},this._nextChunk=function(){var E,k;if(!this._finished)return E=this._config.chunkSize,_=E?(k=_.substring(0,E),_.substring(E)):(k=_,""),this._finished=!_,this.parseChunk(k)}}function C(v){l.call(this,v=v||{});var _=[],E=!0,k=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(N){this._input=N,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){k&&_.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),_.length?this.parseChunk(_.shift()):E=!0},this._streamData=pt(function(N){try{_.push(typeof N=="string"?N:N.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(_.shift()))}catch(Z){this._streamError(Z)}},this),this._streamError=pt(function(N){this._streamCleanUp(),this._sendError(N)},this),this._streamEnd=pt(function(){this._streamCleanUp(),k=!0,this._streamData("")},this),this._streamCleanUp=pt(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function g(v){var _,E,k,N,Z=Math.pow(2,53),Pe=-Z,mt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ht=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,ee=this,Ee=0,j=0,Ge=!1,G=!1,oe=[],F={data:[],errors:[],meta:{}};function ke(ie){return v.skipEmptyLines==="greedy"?ie.join("").trim()==="":ie.length===1&&ie[0].length===0}function Oe(){if(F&&k&&(gt("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),k=!1),v.skipEmptyLines&&(F.data=F.data.filter(function(_e){return!ke(_e)})),Ue()){let _e=function(Le,Ce){fe(v.transformHeader)&&(Le=v.transformHeader(Le,Ce)),oe.push(Le)};var Q=_e;if(F)if(Array.isArray(F.data[0])){for(var ie=0;Ue()&&ie<F.data.length;ie++)F.data[ie].forEach(_e);F.data.splice(0,1)}else F.data.forEach(_e)}function ce(_e,Le){for(var Ce=v.header?{}:[],he=0;he<_e.length;he++){var J=he,qe=_e[he],qe=((ue,be)=>(Re=>(v.dynamicTypingFunction&&v.dynamicTyping[Re]===void 0&&(v.dynamicTyping[Re]=v.dynamicTypingFunction(Re)),(v.dynamicTyping[Re]||v.dynamicTyping)===!0))(ue)?be==="true"||be==="TRUE"||be!=="false"&&be!=="FALSE"&&((Re=>{if(mt.test(Re)&&(Re=parseFloat(Re),Pe<Re&&Re<Z))return 1})(be)?parseFloat(be):ht.test(be)?new Date(be):be===""?null:be):be)(J=v.header?he>=oe.length?"__parsed_extra":oe[he]:J,qe=v.transform?v.transform(qe,J):qe);J==="__parsed_extra"?(Ce[J]=Ce[J]||[],Ce[J].push(qe)):Ce[J]=qe}return v.header&&(he>oe.length?gt("FieldMismatch","TooManyFields","Too many fields: expected "+oe.length+" fields but parsed "+he,j+Le):he<oe.length&&gt("FieldMismatch","TooFewFields","Too few fields: expected "+oe.length+" fields but parsed "+he,j+Le)),Ce}var Se;F&&(v.header||v.dynamicTyping||v.transform)&&(Se=1,!F.data.length||Array.isArray(F.data[0])?(F.data=F.data.map(ce),Se=F.data.length):F.data=ce(F.data,0),v.header&&F.meta&&(F.meta.fields=oe),j+=Se)}function Ue(){return v.header&&oe.length===0}function gt(ie,ce,Se,Q){ie={type:ie,code:ce,message:Se},Q!==void 0&&(ie.row=Q),F.errors.push(ie)}fe(v.step)&&(N=v.step,v.step=function(ie){F=ie,Ue()?Oe():(Oe(),F.data.length!==0&&(Ee+=ie.data.length,v.preview&&Ee>v.preview?E.abort():(F.data=F.data[0],N(F,ee))))}),this.parse=function(ie,ce,Se){var Q=v.quoteChar||'"',Q=(v.newline||(v.newline=this.guessLineEndings(ie,Q)),k=!1,v.delimiter?fe(v.delimiter)&&(v.delimiter=v.delimiter(ie),F.meta.delimiter=v.delimiter):((Q=((_e,Le,Ce,he,J)=>{var qe,ue,be,Re;J=J||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var $n=0;$n<J.length;$n++){for(var Ft,Eo=J[$n],We=0,Vt=0,je=0,rt=(be=void 0,new P({comments:he,delimiter:Eo,newline:Le,preview:10}).parse(_e)),Qt=0;Qt<rt.data.length;Qt++)Ce&&ke(rt.data[Qt])?je++:(Ft=rt.data[Qt].length,Vt+=Ft,be===void 0?be=Ft:0<Ft&&(We+=Math.abs(Ft-be),be=Ft));0<rt.data.length&&(Vt/=rt.data.length-je),(ue===void 0||We<=ue)&&(Re===void 0||Re<Vt)&&1.99<Vt&&(ue=We,qe=Eo,Re=Vt)}return{successful:!!(v.delimiter=qe),bestDelimiter:qe}})(ie,v.newline,v.skipEmptyLines,v.comments,v.delimitersToGuess)).successful?v.delimiter=Q.bestDelimiter:(k=!0,v.delimiter=a.DefaultDelimiter),F.meta.delimiter=v.delimiter),Bn(v));return v.preview&&v.header&&Q.preview++,_=ie,E=new P(Q),F=E.parse(_,ce,Se),Oe(),Ge?{meta:{paused:!0}}:F||{meta:{paused:!1}}},this.paused=function(){return Ge},this.pause=function(){Ge=!0,E.abort(),_=fe(v.chunk)?"":_.substring(E.getCharIndex())},this.resume=function(){ee.streamer._halted?(Ge=!1,ee.streamer.parseChunk(_,!0)):setTimeout(ee.resume,3)},this.aborted=function(){return G},this.abort=function(){G=!0,E.abort(),F.meta.aborted=!0,fe(v.complete)&&v.complete(F),_=""},this.guessLineEndings=function(_e,Q){_e=_e.substring(0,1048576);var Q=new RegExp(w(Q)+"([^]*?)"+w(Q),"gm"),Se=(_e=_e.replace(Q,"")).split("\r"),Q=_e.split(`
`),_e=1<Q.length&&Q[0].length<Se[0].length;if(Se.length===1||_e)return`
`;for(var Le=0,Ce=0;Ce<Se.length;Ce++)Se[Ce][0]===`
`&&Le++;return Le>=Se.length/2?`\r
`:"\r"}}function w(v){return v.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function P(v){var _=(v=v||{}).delimiter,E=v.newline,k=v.comments,N=v.step,Z=v.preview,Pe=v.fastMode,mt=null,ht=!1,ee=v.quoteChar==null?'"':v.quoteChar,Ee=ee;if(v.escapeChar!==void 0&&(Ee=v.escapeChar),(typeof _!="string"||-1<a.BAD_DELIMITERS.indexOf(_))&&(_=","),k===_)throw new Error("Comment character same as delimiter");k===!0?k="#":(typeof k!="string"||-1<a.BAD_DELIMITERS.indexOf(k))&&(k=!1),E!==`
`&&E!=="\r"&&E!==`\r
`&&(E=`
`);var j=0,Ge=!1;this.parse=function(G,oe,F){if(typeof G!="string")throw new Error("Input must be a string");var ke=G.length,Oe=_.length,Ue=E.length,gt=k.length,ie=fe(N),ce=[],Se=[],Q=[],_e=j=0;if(!G)return We();if(Pe||Pe!==!1&&G.indexOf(ee)===-1){for(var Le=G.split(E),Ce=0;Ce<Le.length;Ce++){if(Q=Le[Ce],j+=Q.length,Ce!==Le.length-1)j+=E.length;else if(F)return We();if(!k||Q.substring(0,gt)!==k){if(ie){if(ce=[],Re(Q.split(_)),Vt(),Ge)return We()}else Re(Q.split(_));if(Z&&Z<=Ce)return ce=ce.slice(0,Z),We(!0)}}return We()}for(var he=G.indexOf(_,j),J=G.indexOf(E,j),qe=new RegExp(w(Ee)+w(ee),"g"),ue=G.indexOf(ee,j);;)if(G[j]===ee)for(ue=j,j++;;){if((ue=G.indexOf(ee,ue+1))===-1)return F||Se.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ce.length,index:j}),Ft();if(ue===ke-1)return Ft(G.substring(j,ue).replace(qe,ee));if(ee===Ee&&G[ue+1]===Ee)ue++;else if(ee===Ee||ue===0||G[ue-1]!==Ee){he!==-1&&he<ue+1&&(he=G.indexOf(_,ue+1));var be=$n((J=J!==-1&&J<ue+1?G.indexOf(E,ue+1):J)===-1?he:Math.min(he,J));if(G.substr(ue+1+be,Oe)===_){Q.push(G.substring(j,ue).replace(qe,ee)),G[j=ue+1+be+Oe]!==ee&&(ue=G.indexOf(ee,j)),he=G.indexOf(_,j),J=G.indexOf(E,j);break}if(be=$n(J),G.substring(ue+1+be,ue+1+be+Ue)===E){if(Q.push(G.substring(j,ue).replace(qe,ee)),Eo(ue+1+be+Ue),he=G.indexOf(_,j),ue=G.indexOf(ee,j),ie&&(Vt(),Ge))return We();if(Z&&ce.length>=Z)return We(!0);break}Se.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ce.length,index:j}),ue++}}else if(k&&Q.length===0&&G.substring(j,j+gt)===k){if(J===-1)return We();j=J+Ue,J=G.indexOf(E,j),he=G.indexOf(_,j)}else if(he!==-1&&(he<J||J===-1))Q.push(G.substring(j,he)),j=he+Oe,he=G.indexOf(_,j);else{if(J===-1)break;if(Q.push(G.substring(j,J)),Eo(J+Ue),ie&&(Vt(),Ge))return We();if(Z&&ce.length>=Z)return We(!0)}return Ft();function Re(je){ce.push(je),_e=j}function $n(je){var rt=0;return rt=je!==-1&&(je=G.substring(ue+1,je))&&je.trim()===""?je.length:rt}function Ft(je){return F||(je===void 0&&(je=G.substring(j)),Q.push(je),j=ke,Re(Q),ie&&Vt()),We()}function Eo(je){j=je,Re(Q),Q=[],J=G.indexOf(E,j)}function We(je){if(v.header&&!oe&&ce.length&&!ht){var rt=ce[0],Qt=Object.create(null),Ms=new Set(rt);let jc=!1;for(let Hn=0;Hn<rt.length;Hn++){let Lt=rt[Hn];if(Qt[Lt=fe(v.transformHeader)?v.transformHeader(Lt,Hn):Lt]){let So,Bc=Qt[Lt];for(;So=Lt+"_"+Bc,Bc++,Ms.has(So););Ms.add(So),rt[Hn]=So,Qt[Lt]++,jc=!0,(mt=mt===null?{}:mt)[So]=Lt}else Qt[Lt]=1,rt[Hn]=Lt;Ms.add(Lt)}jc&&console.warn("Duplicate headers found and renamed."),ht=!0}return{data:ce,errors:Se,meta:{delimiter:_,linebreak:E,aborted:Ge,truncated:!!je,cursor:_e+(oe||0),renamedHeaders:mt}}}function Vt(){N(We()),ce=[],Se=[]}},this.abort=function(){Ge=!0},this.getCharIndex=function(){return j}}function W(v){var _=v.data,E=r[_.workerId],k=!1;if(_.error)E.userError(_.error,_.file);else if(_.results&&_.results.data){var N={abort:function(){k=!0,z(_.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:tt,resume:tt};if(fe(E.userStep)){for(var Z=0;Z<_.results.data.length&&(E.userStep({data:_.results.data[Z],errors:_.results.errors,meta:_.results.meta},N),!k);Z++);delete _.results}else fe(E.userChunk)&&(E.userChunk(_.results,N,_.file),delete _.results)}_.finished&&!k&&z(_.workerId,_.results)}function z(v,_){var E=r[v];fe(E.userComplete)&&E.userComplete(_),E.terminate(),delete r[v]}function tt(){throw new Error("Not implemented.")}function Bn(v){if(typeof v!="object"||v===null)return v;var _,E=Array.isArray(v)?[]:{};for(_ in v)E[_]=Bn(v[_]);return E}function pt(v,_){return function(){v.apply(_,arguments)}}function fe(v){return typeof v=="function"}return a.parse=function(v,_){var E=(_=_||{}).dynamicTyping||!1;if(fe(E)&&(_.dynamicTypingFunction=E,E={}),_.dynamicTyping=E,_.transform=!!fe(_.transform)&&_.transform,!_.worker||!a.WORKERS_SUPPORTED)return E=null,a.NODE_STREAM_INPUT,typeof v=="string"?(v=(k=>k.charCodeAt(0)!==65279?k:k.slice(1))(v),E=new(_.download?d:h)(_)):v.readable===!0&&fe(v.read)&&fe(v.on)?E=new C(_):(e.File&&v instanceof File||v instanceof Object)&&(E=new f(_)),E.stream(v);(E=(()=>{var k;return!!a.WORKERS_SUPPORTED&&(k=(()=>{var N=e.URL||e.webkitURL||null,Z=n.toString();return a.BLOB_URL||(a.BLOB_URL=N.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",Z,")();"],{type:"text/javascript"})))})(),(k=new e.Worker(k)).onmessage=W,k.id=s++,r[k.id]=k)})()).userStep=_.step,E.userChunk=_.chunk,E.userComplete=_.complete,E.userError=_.error,_.step=fe(_.step),_.chunk=fe(_.chunk),_.complete=fe(_.complete),_.error=fe(_.error),delete _.worker,E.postMessage({input:v,config:_,workerId:E.id})},a.unparse=function(v,_){var E=!1,k=!0,N=",",Z=`\r
`,Pe='"',mt=Pe+Pe,ht=!1,ee=null,Ee=!1,j=((()=>{if(typeof _=="object"){if(typeof _.delimiter!="string"||a.BAD_DELIMITERS.filter(function(oe){return _.delimiter.indexOf(oe)!==-1}).length||(N=_.delimiter),typeof _.quotes!="boolean"&&typeof _.quotes!="function"&&!Array.isArray(_.quotes)||(E=_.quotes),typeof _.skipEmptyLines!="boolean"&&typeof _.skipEmptyLines!="string"||(ht=_.skipEmptyLines),typeof _.newline=="string"&&(Z=_.newline),typeof _.quoteChar=="string"&&(Pe=_.quoteChar),typeof _.header=="boolean"&&(k=_.header),Array.isArray(_.columns)){if(_.columns.length===0)throw new Error("Option columns is empty");ee=_.columns}_.escapeChar!==void 0&&(mt=_.escapeChar+Pe),_.escapeFormulae instanceof RegExp?Ee=_.escapeFormulae:typeof _.escapeFormulae=="boolean"&&_.escapeFormulae&&(Ee=/^[=+\-@\t\r].*$/)}})(),new RegExp(w(Pe),"g"));if(typeof v=="string"&&(v=JSON.parse(v)),Array.isArray(v)){if(!v.length||Array.isArray(v[0]))return Ge(null,v,ht);if(typeof v[0]=="object")return Ge(ee||Object.keys(v[0]),v,ht)}else if(typeof v=="object")return typeof v.data=="string"&&(v.data=JSON.parse(v.data)),Array.isArray(v.data)&&(v.fields||(v.fields=v.meta&&v.meta.fields||ee),v.fields||(v.fields=Array.isArray(v.data[0])?v.fields:typeof v.data[0]=="object"?Object.keys(v.data[0]):[]),Array.isArray(v.data[0])||typeof v.data[0]=="object"||(v.data=[v.data])),Ge(v.fields||[],v.data||[],ht);throw new Error("Unable to serialize unrecognized input");function Ge(oe,F,ke){var Oe="",Ue=(typeof oe=="string"&&(oe=JSON.parse(oe)),typeof F=="string"&&(F=JSON.parse(F)),Array.isArray(oe)&&0<oe.length),gt=!Array.isArray(F[0]);if(Ue&&k){for(var ie=0;ie<oe.length;ie++)0<ie&&(Oe+=N),Oe+=G(oe[ie],ie);0<F.length&&(Oe+=Z)}for(var ce=0;ce<F.length;ce++){var Se=(Ue?oe:F[ce]).length,Q=!1,_e=Ue?Object.keys(F[ce]).length===0:F[ce].length===0;if(ke&&!Ue&&(Q=ke==="greedy"?F[ce].join("").trim()==="":F[ce].length===1&&F[ce][0].length===0),ke==="greedy"&&Ue){for(var Le=[],Ce=0;Ce<Se;Ce++){var he=gt?oe[Ce]:Ce;Le.push(F[ce][he])}Q=Le.join("").trim()===""}if(!Q){for(var J=0;J<Se;J++){0<J&&!_e&&(Oe+=N);var qe=Ue&&gt?oe[J]:J;Oe+=G(F[ce][qe],J)}ce<F.length-1&&(!ke||0<Se&&!_e)&&(Oe+=Z)}}return Oe}function G(oe,F){var ke,Oe;return oe==null?"":oe.constructor===Date?JSON.stringify(oe).slice(1,25):(Oe=!1,Ee&&typeof oe=="string"&&Ee.test(oe)&&(oe="'"+oe,Oe=!0),ke=oe.toString().replace(j,mt),(Oe=Oe||E===!0||typeof E=="function"&&E(oe,F)||Array.isArray(E)&&E[F]||((Ue,gt)=>{for(var ie=0;ie<gt.length;ie++)if(-1<Ue.indexOf(gt[ie]))return!0;return!1})(ke,a.BAD_DELIMITERS)||-1<ke.indexOf(N)||ke.charAt(0)===" "||ke.charAt(ke.length-1)===" ")?Pe+ke+Pe:ke)}},a.RECORD_SEP="",a.UNIT_SEP="",a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!e.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=P,a.ParserHandle=g,a.NetworkStreamer=d,a.FileStreamer=f,a.StringStreamer=h,a.ReadableStreamStreamer=C,e.jQuery&&((t=e.jQuery).fn.parse=function(v){var _=v.config||{},E=[];return this.each(function(Z){if(!(t(this).prop("tagName").toUpperCase()==="INPUT"&&t(this).attr("type").toLowerCase()==="file"&&e.FileReader)||!this.files||this.files.length===0)return!0;for(var Pe=0;Pe<this.files.length;Pe++)E.push({file:this.files[Pe],inputElem:this,instanceConfig:t.extend({},_)})}),k(),this;function k(){if(E.length===0)fe(v.complete)&&v.complete();else{var Z,Pe,mt,ht,ee=E[0];if(fe(v.before)){var Ee=v.before(ee.file,ee.inputElem);if(typeof Ee=="object"){if(Ee.action==="abort")return Z="AbortError",Pe=ee.file,mt=ee.inputElem,ht=Ee.reason,void(fe(v.error)&&v.error({name:Z},Pe,mt,ht));if(Ee.action==="skip")return void N();typeof Ee.config=="object"&&(ee.instanceConfig=t.extend(ee.instanceConfig,Ee.config))}else if(Ee==="skip")return void N()}var j=ee.instanceConfig.complete;ee.instanceConfig.complete=function(Ge){fe(j)&&j(Ge,ee.file,ee.inputElem),N()},a.parse(ee.file,ee.instanceConfig)}}function N(){E.splice(0,1),k()}}),i&&(e.onmessage=function(v){v=v.data,a.WORKER_ID===void 0&&v&&(a.WORKER_ID=v.workerId),typeof v.input=="string"?e.postMessage({workerId:a.WORKER_ID,results:a.parse(v.input,v.config),finished:!0}):(e.File&&v.input instanceof File||v.input instanceof Object)&&(v=a.parse(v.input,v.config))&&e.postMessage({workerId:a.WORKER_ID,results:v,finished:!0})}),(d.prototype=Object.create(l.prototype)).constructor=d,(f.prototype=Object.create(l.prototype)).constructor=f,(h.prototype=Object.create(h.prototype)).constructor=h,(C.prototype=Object.create(l.prototype)).constructor=C,a})});function Ns(n,e){return Object.is(n,e)}var Fe=null,Ii=!1,Ps=1,Dt=Symbol("SIGNAL");function q(n){let e=Fe;return Fe=n,e}function ks(){return Fe}var Io={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Oi(n){if(Ii)throw new Error("");if(Fe===null)return;Fe.consumerOnSignalRead(n);let e=Fe.nextProducerIndex++;if(Pi(Fe),e<Fe.producerNode.length&&Fe.producerNode[e]!==n&&Mo(Fe)){let t=Fe.producerNode[e];Ni(t,Fe.producerIndexOfThis[e])}Fe.producerNode[e]!==n&&(Fe.producerNode[e]=n,Fe.producerIndexOfThis[e]=Mo(Fe)?Kc(n,Fe,e):0),Fe.producerLastReadVersion[e]=n.version}function Wc(){Ps++}function Rs(n){if(!(Mo(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===Ps)){if(!n.producerMustRecompute(n)&&!js(n)){As(n);return}n.producerRecomputeValue(n),As(n)}}function Fs(n){if(n.liveConsumerNode===void 0)return;let e=Ii;Ii=!0;try{for(let t of n.liveConsumerNode)t.dirty||Nm(t)}finally{Ii=e}}function Vs(){return Fe?.consumerAllowSignalWrites!==!1}function Nm(n){n.dirty=!0,Fs(n),n.consumerMarkedDirty?.(n)}function As(n){n.dirty=!1,n.lastCleanEpoch=Ps}function Ai(n){return n&&(n.nextProducerIndex=0),q(n)}function Ls(n,e){if(q(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Mo(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)Ni(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function js(n){Pi(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],o=n.producerLastReadVersion[e];if(o!==t.version||(Rs(t),o!==t.version))return!0}return!1}function Bs(n){if(Pi(n),Mo(n))for(let e=0;e<n.producerNode.length;e++)Ni(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Kc(n,e,t){if(Yc(n),n.liveConsumerNode.length===0&&Zc(n))for(let o=0;o<n.producerNode.length;o++)n.producerIndexOfThis[o]=Kc(n.producerNode[o],n,o);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function Ni(n,e){if(Yc(n),n.liveConsumerNode.length===1&&Zc(n))for(let o=0;o<n.producerNode.length;o++)Ni(n.producerNode[o],n.producerIndexOfThis[o]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let o=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];Pi(i),i.producerIndexOfThis[o]=e}}function Mo(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function Pi(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Yc(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Zc(n){return n.producerNode!==void 0}function $s(n,e){let t=Object.create(Pm);t.computation=n,e!==void 0&&(t.equal=e);let o=()=>{if(Rs(t),Oi(t),t.value===Ti)throw t.error;return t.value};return o[Dt]=t,o}var Ts=Symbol("UNSET"),Os=Symbol("COMPUTING"),Ti=Symbol("ERRORED"),Pm=H(I({},Io),{value:Ts,dirty:!0,error:null,equal:Ns,kind:"computed",producerMustRecompute(n){return n.value===Ts||n.value===Os},producerRecomputeValue(n){if(n.value===Os)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Os;let t=Ai(n),o,i=!1;try{o=n.computation(),q(null),i=e!==Ts&&e!==Ti&&o!==Ti&&n.equal(e,o)}catch(r){o=Ti,n.error=r}finally{Ls(n,t)}if(i){n.value=e;return}n.value=o,n.version++}});function km(){throw new Error}var Qc=km;function Jc(n){Qc(n)}function Hs(n){Qc=n}var Rm=null;function Us(n,e){let t=Object.create(Gs);t.value=n,e!==void 0&&(t.equal=e);let o=()=>(Oi(t),t.value);return o[Dt]=t,o}function ki(n,e){Vs()||Jc(n),n.equal(n.value,e)||(n.value=e,Fm(n))}function zs(n,e){Vs()||Jc(n),ki(n,e(n.value))}var Gs=H(I({},Io),{equal:Ns,value:void 0,kind:"signal"});function Fm(n){n.version++,Wc(),Fs(n),Rm?.()}function qs(n){let e=q(null);try{return n()}finally{q(e)}}var Ws;function To(){return Ws}function Xt(n){let e=Ws;return Ws=n,e}var Ri=Symbol("NotFound");function de(n){return typeof n=="function"}function Fi(n){let t=n(o=>{Error.call(o),o.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Vi=Fi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((o,i)=>`${i+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Oo(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var nt=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let r of t)r.remove(this);else t.remove(this);let{initialTeardown:o}=this;if(de(o))try{o()}catch(r){e=r instanceof Vi?r.errors:[r]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let r of i)try{Xc(r)}catch(s){e=e??[],s instanceof Vi?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Vi(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Xc(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Oo(t,e)}remove(e){let{_finalizers:t}=this;t&&Oo(t,e),e instanceof n&&e._removeParent(this)}};nt.EMPTY=(()=>{let n=new nt;return n.closed=!0,n})();var Ks=nt.EMPTY;function Li(n){return n instanceof nt||n&&"closed"in n&&de(n.remove)&&de(n.add)&&de(n.unsubscribe)}function Xc(n){de(n)?n():n.unsubscribe()}var Et={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Gn={setTimeout(n,e,...t){let{delegate:o}=Gn;return o?.setTimeout?o.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Gn;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ji(n){Gn.setTimeout(()=>{let{onUnhandledError:e}=Et;if(e)e(n);else throw n})}function Ys(){}var eu=Zs("C",void 0,void 0);function tu(n){return Zs("E",void 0,n)}function nu(n){return Zs("N",n,void 0)}function Zs(n,e,t){return{kind:n,value:e,error:t}}var bn=null;function qn(n){if(Et.useDeprecatedSynchronousErrorHandling){let e=!bn;if(e&&(bn={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:o}=bn;if(bn=null,t)throw o}}else n()}function ou(n){Et.useDeprecatedSynchronousErrorHandling&&bn&&(bn.errorThrown=!0,bn.error=n)}var wn=class extends nt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Li(e)&&e.add(this)):this.destination=Hm}static create(e,t,o){return new Wn(e,t,o)}next(e){this.isStopped?Js(nu(e),this):this._next(e)}error(e){this.isStopped?Js(tu(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Js(eu,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Bm=Function.prototype.bind;function Qs(n,e){return Bm.call(n,e)}var Xs=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(o){Bi(o)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(o){Bi(o)}else Bi(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Bi(t)}}},Wn=class extends wn{constructor(e,t,o){super();let i;if(de(e)||!e)i={next:e??void 0,error:t??void 0,complete:o??void 0};else{let r;this&&Et.useDeprecatedNextContext?(r=Object.create(e),r.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qs(e.next,r),error:e.error&&Qs(e.error,r),complete:e.complete&&Qs(e.complete,r)}):i=e}this.destination=new Xs(i)}};function Bi(n){Et.useDeprecatedSynchronousErrorHandling?ou(n):ji(n)}function $m(n){throw n}function Js(n,e){let{onStoppedNotification:t}=Et;t&&Gn.setTimeout(()=>t(n,e))}var Hm={closed:!0,next:Ys,error:$m,complete:Ys};var Kn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function iu(n){return n}function ru(n){return n.length===0?iu:n.length===1?n[0]:function(t){return n.reduce((o,i)=>i(o),t)}}var Be=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let o=new n;return o.source=this,o.operator=t,o}subscribe(t,o,i){let r=zm(t)?t:new Wn(t,o,i);return qn(()=>{let{operator:s,source:a}=this;r.add(s?s.call(r,a):a?this._subscribe(r):this._trySubscribe(r))}),r}_trySubscribe(t){try{return this._subscribe(t)}catch(o){t.error(o)}}forEach(t,o){return o=su(o),new o((i,r)=>{let s=new Wn({next:a=>{try{t(a)}catch(l){r(l),s.unsubscribe()}},error:r,complete:i});this.subscribe(s)})}_subscribe(t){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(t)}[Kn](){return this}pipe(...t){return ru(t)(this)}toPromise(t){return t=su(t),new t((o,i)=>{let r;this.subscribe(s=>r=s,s=>i(s),()=>o(r))})}}return n.create=e=>new n(e),n})();function su(n){var e;return(e=n??Et.Promise)!==null&&e!==void 0?e:Promise}function Um(n){return n&&de(n.next)&&de(n.error)&&de(n.complete)}function zm(n){return n&&n instanceof wn||Um(n)&&Li(n)}function Gm(n){return de(n?.lift)}function Yn(n){return e=>{if(Gm(e))return e.lift(function(t){try{return n(t,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function Zn(n,e,t,o,i){return new ea(n,e,t,o,i)}var ea=class extends wn{constructor(e,t,o,i,r,s){super(e),this.onFinalize=r,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var au=Fi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var jt=(()=>{class n extends Be{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let o=new $i(this,this);return o.operator=t,o}_throwIfClosed(){if(this.closed)throw new au}next(t){qn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(t)}})}error(t){qn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:o}=this;for(;o.length;)o.shift().error(t)}})}complete(){qn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:o,isStopped:i,observers:r}=this;return o||i?Ks:(this.currentObservers=null,r.push(t),new nt(()=>{this.currentObservers=null,Oo(r,t)}))}_checkFinalizedStatuses(t){let{hasError:o,thrownError:i,isStopped:r}=this;o?t.error(i):r&&t.complete()}asObservable(){let t=new Be;return t.source=this,t}}return n.create=(e,t)=>new $i(e,t),n})(),$i=class extends jt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.next)===null||o===void 0||o.call(t,e)}error(e){var t,o;(o=(t=this.destination)===null||t===void 0?void 0:t.error)===null||o===void 0||o.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,o;return(o=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&o!==void 0?o:Ks}};var Ao=class extends jt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:o}=this;if(e)throw t;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};function qm(n){return n[n.length-1]}function lu(n){return de(qm(n))?n.pop():void 0}function uu(n,e,t,o){function i(r){return r instanceof t?r:new t(function(s){s(r)})}return new(t||(t=Promise))(function(r,s){function a(f){try{d(o.next(f))}catch(h){s(h)}}function l(f){try{d(o.throw(f))}catch(h){s(h)}}function d(f){f.done?r(f.value):i(f.value).then(a,l)}d((o=o.apply(n,e||[])).next())})}function cu(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function xn(n){return this instanceof xn?(this.v=n,this):new xn(n)}function du(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),i,r=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(w){return Promise.resolve(w).then(g,h)}}function a(g,w){o[g]&&(i[g]=function(P){return new Promise(function(W,z){r.push([g,P,W,z])>1||l(g,P)})},w&&(i[g]=w(i[g])))}function l(g,w){try{d(o[g](w))}catch(P){C(r[0][3],P)}}function d(g){g.value instanceof xn?Promise.resolve(g.value.v).then(f,h):C(r[0][2],g)}function f(g){l("next",g)}function h(g){l("throw",g)}function C(g,w){g(w),r.shift(),r.length&&l(r[0][0],r[0][1])}}function fu(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof cu=="function"?cu(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(r){t[r]=n[r]&&function(s){return new Promise(function(a,l){s=n[r](s),i(a,l,s.done,s.value)})}}function i(r,s,a,l){Promise.resolve(l).then(function(d){r({value:d,done:a})},s)}}var Hi=n=>n&&typeof n.length=="number"&&typeof n!="function";function Ui(n){return de(n?.then)}function zi(n){return de(n[Kn])}function Gi(n){return Symbol.asyncIterator&&de(n?.[Symbol.asyncIterator])}function qi(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function Wm(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Wi=Wm();function Ki(n){return de(n?.[Wi])}function Yi(n){return du(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:o,done:i}=yield xn(t.read());if(i)return yield xn(void 0);yield yield xn(o)}}finally{t.releaseLock()}})}function Zi(n){return de(n?.getReader)}function cn(n){if(n instanceof Be)return n;if(n!=null){if(zi(n))return Km(n);if(Hi(n))return Ym(n);if(Ui(n))return Zm(n);if(Gi(n))return pu(n);if(Ki(n))return Qm(n);if(Zi(n))return Jm(n)}throw qi(n)}function Km(n){return new Be(e=>{let t=n[Kn]();if(de(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ym(n){return new Be(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function Zm(n){return new Be(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ji)})}function Qm(n){return new Be(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function pu(n){return new Be(e=>{Xm(n,e).catch(t=>e.error(t))})}function Jm(n){return pu(Yi(n))}function Xm(n,e){var t,o,i,r;return uu(this,void 0,void 0,function*(){try{for(t=fu(n);o=yield t.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{o&&!o.done&&(r=t.return)&&(yield r.call(t))}finally{if(i)throw i.error}}e.complete()})}function Bt(n,e,t,o=0,i=!1){let r=e.schedule(function(){t(),i?n.add(this.schedule(null,o)):this.unsubscribe()},o);if(n.add(r),!i)return r}function Qi(n,e=0){return Yn((t,o)=>{t.subscribe(Zn(o,i=>Bt(o,n,()=>o.next(i),e),()=>Bt(o,n,()=>o.complete(),e),i=>Bt(o,n,()=>o.error(i),e)))})}function Ji(n,e=0){return Yn((t,o)=>{o.add(n.schedule(()=>t.subscribe(o),e))})}function mu(n,e){return cn(n).pipe(Ji(e),Qi(e))}function hu(n,e){return cn(n).pipe(Ji(e),Qi(e))}function gu(n,e){return new Be(t=>{let o=0;return e.schedule(function(){o===n.length?t.complete():(t.next(n[o++]),t.closed||this.schedule())})})}function yu(n,e){return new Be(t=>{let o;return Bt(t,e,()=>{o=n[Wi](),Bt(t,e,()=>{let i,r;try{({value:i,done:r}=o.next())}catch(s){t.error(s);return}r?t.complete():t.next(i)},0,!0)}),()=>de(o?.return)&&o.return()})}function Xi(n,e){if(!n)throw new Error("Iterable cannot be null");return new Be(t=>{Bt(t,e,()=>{let o=n[Symbol.asyncIterator]();Bt(t,e,()=>{o.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function vu(n,e){return Xi(Yi(n),e)}function _u(n,e){if(n!=null){if(zi(n))return mu(n,e);if(Hi(n))return gu(n,e);if(Ui(n))return hu(n,e);if(Gi(n))return Xi(n,e);if(Ki(n))return yu(n,e);if(Zi(n))return vu(n,e)}throw qi(n)}function ta(n,e){return e?_u(n,e):cn(n)}function Dn(n,e){return Yn((t,o)=>{let i=0;t.subscribe(Zn(o,r=>{o.next(n.call(e,r,i++))}))})}var{isArray:eh}=Array;function th(n,e){return eh(e)?n(...e):n(e)}function Cu(n){return Dn(e=>th(n,e))}var{isArray:nh}=Array,{getPrototypeOf:oh,prototype:ih,keys:rh}=Object;function bu(n){if(n.length===1){let e=n[0];if(nh(e))return{args:e,keys:null};if(sh(e)){let t=rh(e);return{args:t.map(o=>e[o]),keys:t}}}return{args:n,keys:null}}function sh(n){return n&&typeof n=="object"&&oh(n)===ih}function wu(n,e){return n.reduce((t,o,i)=>(t[o]=e[i],t),{})}function na(...n){let e=lu(n),{args:t,keys:o}=bu(n),i=new Be(r=>{let{length:s}=t;if(!s){r.complete();return}let a=new Array(s),l=s,d=s;for(let f=0;f<s;f++){let h=!1;cn(t[f]).subscribe(Zn(r,C=>{h||(h=!0,d--),a[f]=C},()=>l--,void 0,()=>{(!l||!h)&&(d||r.next(o?wu(o,a):a),r.complete())}))}});return e?i.pipe(Cu(e)):i}var ah="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",X=class extends Error{code;constructor(e,t){super(ch(e,t)),this.code=e}};function lh(n){return`NG0${Math.abs(n)}`}function ch(n,e){return`${lh(n)}${e?": "+e:""}`}function Nr(n){return{toString:n}.toString()}var Po=globalThis;function ve(n){for(let e in n)if(n[e]===ve)return e;throw Error("Could not find renamed property on target object.")}function uh(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function yt(n){if(typeof n=="string")return n;if(Array.isArray(n))return`[${n.map(yt).join(", ")}]`;if(n==null)return""+n;let e=n.overriddenName||n.name;if(e)return`${e}`;let t=n.toString();if(t==null)return""+t;let o=t.indexOf(`
`);return o>=0?t.slice(0,o):t}function _a(n,e){return n?e?`${n} ${e}`:n:e||""}var dh=ve({__forward_ref__:ve});function At(n){return n.__forward_ref__=At,n.toString=function(){return yt(this())},n}function ot(n){return sd(n)?n():n}function sd(n){return typeof n=="function"&&n.hasOwnProperty(dh)&&n.__forward_ref__===At}function Me(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function lo(n){return{providers:n.providers||[],imports:n.imports||[]}}function ml(n){return xu(n,ad)||xu(n,ld)}function xu(n,e){return n.hasOwnProperty(e)?n[e]:null}function fh(n){let e=n&&(n[ad]||n[ld]);return e||null}function Du(n){return n&&(n.hasOwnProperty(Eu)||n.hasOwnProperty(ph))?n[Eu]:null}var ad=ve({\u0275prov:ve}),Eu=ve({\u0275inj:ve}),ld=ve({ngInjectableDef:ve}),ph=ve({ngInjectorDef:ve}),Y=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,t){this._desc=e,this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=Me({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function cd(n){return n&&!!n.\u0275providers}var mh=ve({\u0275cmp:ve}),hh=ve({\u0275dir:ve}),gh=ve({\u0275pipe:ve});var ar=ve({\u0275fac:ve}),Fo=ve({__NG_ELEMENT_ID__:ve}),Su=ve({__NG_ENV_ID__:ve});function un(n){return typeof n=="string"?n:n==null?"":String(n)}function yh(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():un(n)}function ud(n,e){throw new X(-200,n)}function hl(n,e){throw new X(-201,!1)}var K=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(K||{}),Ca;function dd(){return Ca}function st(n){let e=Ca;return Ca=n,e}function fd(n,e,t){let o=ml(n);if(o&&o.providedIn=="root")return o.value===void 0?o.value=o.factory():o.value;if(t&K.Optional)return null;if(e!==void 0)return e;hl(n,"Injector")}var vh={},Sn=vh,_h="__NG_DI_FLAG__",lr=class{injector;constructor(e){this.injector=e}retrieve(e,t){let o=t;return this.injector.get(e,o.optional?Ri:Sn,o)}},cr="ngTempTokenPath",Ch="ngTokenPath",bh=/\n/gm,wh="\u0275",Mu="__source";function xh(n,e=K.Default){if(To()===void 0)throw new X(-203,!1);if(To()===null)return fd(n,void 0,e);{let t=To(),o;return t instanceof lr?o=t.injector:o=t,o.get(n,e&K.Optional?null:void 0,e)}}function ge(n,e=K.Default){return(dd()||xh)(ot(n),e)}function pe(n,e=K.Default){return ge(n,Pr(e))}function Pr(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function ba(n){let e=[];for(let t=0;t<n.length;t++){let o=ot(n[t]);if(Array.isArray(o)){if(o.length===0)throw new X(900,!1);let i,r=K.Default;for(let s=0;s<o.length;s++){let a=o[s],l=Dh(a);typeof l=="number"?l===-1?i=a.token:r|=l:i=a}e.push(ge(i,r))}else e.push(ge(o))}return e}function Dh(n){return n[_h]}function Eh(n,e,t,o){let i=n[cr];throw e[Mu]&&i.unshift(e[Mu]),n.message=Sh(`
`+n.message,i,t,o),n[Ch]=i,n[cr]=null,n}function Sh(n,e,t,o=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==wh?n.slice(2):n;let i=yt(e);if(Array.isArray(e))i=e.map(yt).join(" -> ");else if(typeof e=="object"){let r=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];r.push(s+":"+(typeof a=="string"?JSON.stringify(a):yt(a)))}i=`{${r.join(", ")}}`}return`${t}${o?"("+o+")":""}[${i}]: ${n.replace(bh,`
  `)}`}function In(n,e){let t=n.hasOwnProperty(ar);return t?n[ar]:null}function Mh(n,e,t){if(n.length!==e.length)return!1;for(let o=0;o<n.length;o++){let i=n[o],r=e[o];if(t&&(i=t(i),r=t(r)),r!==i)return!1}return!0}function Ih(n){return n.flat(Number.POSITIVE_INFINITY)}function gl(n,e){n.forEach(t=>Array.isArray(t)?gl(t,e):e(t))}function pd(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function ur(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Th(n,e,t,o){let i=n.length;if(i==e)n.push(t,o);else if(i===1)n.push(o,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let r=i-2;n[i]=n[r],i--}n[e]=t,n[e+1]=o}}function yl(n,e,t){let o=Qo(n,e);return o>=0?n[o|1]=t:(o=~o,Th(n,o,e,t)),o}function oa(n,e){let t=Qo(n,e);if(t>=0)return n[t|1]}function Qo(n,e){return Oh(n,e,1)}function Oh(n,e,t){let o=0,i=n.length>>t;for(;i!==o;){let r=o+(i-o>>1),s=n[r<<t];if(e===s)return r<<t;s>e?i=r:o=r+1}return~(i<<t)}var Tn={},at=[],dr=new Y(""),md=new Y("",-1),hd=new Y(""),fr=class{get(e,t=Sn){if(t===Sn){let o=new Error(`NullInjectorError: No provider for ${yt(e)}!`);throw o.name="NullInjectorError",o}return t}};function Vo(n){return n[mh]||null}function Ah(n){return n[hh]||null}function Nh(n){return n[gh]||null}function Ph(...n){return{\u0275providers:gd(!0,n),\u0275fromNgModule:!0}}function gd(n,...e){let t=[],o=new Set,i,r=s=>{t.push(s)};return gl(e,s=>{let a=s;wa(a,r,[],o)&&(i||=[],i.push(a))}),i!==void 0&&yd(i,r),t}function yd(n,e){for(let t=0;t<n.length;t++){let{ngModule:o,providers:i}=n[t];vl(i,r=>{e(r,o)})}}function wa(n,e,t,o){if(n=ot(n),!n)return!1;let i=null,r=Du(n),s=!r&&Vo(n);if(!r&&!s){let l=n.ngModule;if(r=Du(l),r)i=l;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=o.has(i);if(s){if(a)return!1;if(o.add(i),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of l)wa(d,e,t,o)}}else if(r){if(r.imports!=null&&!a){o.add(i);let d;try{gl(r.imports,f=>{wa(f,e,t,o)&&(d||=[],d.push(f))})}finally{}d!==void 0&&yd(d,e)}if(!a){let d=In(i)||(()=>new i);e({provide:i,useFactory:d,deps:at},i),e({provide:hd,useValue:i,multi:!0},i),e({provide:dr,useValue:()=>ge(i),multi:!0},i)}let l=r.providers;if(l!=null&&!a){let d=n;vl(l,f=>{e(f,d)})}}else return!1;return i!==n&&n.providers!==void 0}function vl(n,e){for(let t of n)cd(t)&&(t=t.\u0275providers),Array.isArray(t)?vl(t,e):e(t)}var kh=ve({provide:String,useValue:ve});function vd(n){return n!==null&&typeof n=="object"&&kh in n}function Rh(n){return!!(n&&n.useExisting)}function Fh(n){return!!(n&&n.useFactory)}function to(n){return typeof n=="function"}function Vh(n){return!!n.useClass}var kr=new Y(""),tr={},Iu={},ia;function _l(){return ia===void 0&&(ia=new fr),ia}var pn=class{},Lo=class extends pn{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,t,o,i){super(),this.parent=t,this.source=o,this.scopes=i,Da(e,s=>this.processProvider(s)),this.records.set(md,Qn(void 0,this)),i.has("environment")&&this.records.set(pn,Qn(void 0,this));let r=this.records.get(kr);r!=null&&typeof r.value=="string"&&this.scopes.add(r.value),this.injectorDefTypes=new Set(this.get(hd,at,K.Self))}retrieve(e,t){let o=t;return this.get(e,o.optional?Ri:Sn,o)}destroy(){ko(this),this._destroyed=!0;let e=q(null);try{for(let o of this._ngOnDestroyHooks)o.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let o of t)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),q(e)}}onDestroy(e){return ko(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ko(this);let t=Xt(this),o=st(void 0),i;try{return e()}finally{Xt(t),st(o)}}get(e,t=Sn,o=K.Default){if(ko(this),e.hasOwnProperty(Su))return e[Su](this);o=Pr(o);let i,r=Xt(this),s=st(void 0);try{if(!(o&K.SkipSelf)){let l=this.records.get(e);if(l===void 0){let d=Hh(e)&&ml(e);d&&this.injectableDefInScope(d)?l=Qn(xa(e),tr):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,o)}let a=o&K.Self?_l():this.parent;return t=o&K.Optional&&t===Sn?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[cr]=a[cr]||[]).unshift(yt(e)),r)throw a;return Eh(a,e,"R3InjectorError",this.source)}else throw a}finally{st(s),Xt(r)}}resolveInjectorInitializers(){let e=q(null),t=Xt(this),o=st(void 0),i;try{let r=this.get(dr,at,K.Self);for(let s of r)s()}finally{Xt(t),st(o),q(e)}}toString(){let e=[],t=this.records;for(let o of t.keys())e.push(yt(o));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ot(e);let t=to(e)?e:ot(e&&e.provide),o=jh(e);if(!to(e)&&e.multi===!0){let i=this.records.get(t);i||(i=Qn(void 0,tr,!0),i.factory=()=>ba(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,o)}hydrate(e,t,o){let i=q(null);try{return t.value===Iu?ud(yt(e)):t.value===tr&&(t.value=Iu,t.value=t.factory(void 0,o)),typeof t.value=="object"&&t.value&&$h(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{q(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=ot(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xa(n){let e=ml(n),t=e!==null?e.factory:In(n);if(t!==null)return t;if(n instanceof Y)throw new X(204,!1);if(n instanceof Function)return Lh(n);throw new X(204,!1)}function Lh(n){if(n.length>0)throw new X(204,!1);let t=fh(n);return t!==null?()=>t.factory(n):()=>new n}function jh(n){if(vd(n))return Qn(void 0,n.useValue);{let e=_d(n);return Qn(e,tr)}}function _d(n,e,t){let o;if(to(n)){let i=ot(n);return In(i)||xa(i)}else if(vd(n))o=()=>ot(n.useValue);else if(Fh(n))o=()=>n.useFactory(...ba(n.deps||[]));else if(Rh(n))o=(i,r)=>ge(ot(n.useExisting),r!==void 0&&r&K.Optional?K.Optional:void 0);else{let i=ot(n&&(n.useClass||n.provide));if(Bh(n))o=()=>new i(...ba(n.deps));else return In(i)||xa(i)}return o}function ko(n){if(n.destroyed)throw new X(205,!1)}function Qn(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function Bh(n){return!!n.deps}function $h(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function Hh(n){return typeof n=="function"||typeof n=="object"&&n instanceof Y}function Da(n,e){for(let t of n)Array.isArray(t)?Da(t,e):t&&cd(t)?Da(t.\u0275providers,e):e(t)}function Cd(n,e){let t;n instanceof Lo?(ko(n),t=n):t=new lr(n);let o,i=Xt(t),r=st(void 0);try{return e()}finally{Xt(i),st(r)}}function Uh(){return dd()!==void 0||To()!=null}function zh(n){return typeof n=="function"}var on=0,B=1,$=2,Ye=3,It=4,Nt=5,jo=6,pr=7,Ve=8,no=9,mn=10,Ae=11,Bo=12,Tu=13,co=14,Tt=15,On=16,Jn=17,en=18,Rr=19,bd=20,dn=21,ra=22,mr=23,vt=24,sa=25,Ze=26,wd=1;var An=7,hr=8,oo=9,Ke=10;function fn(n){return Array.isArray(n)&&typeof n[wd]=="object"}function rn(n){return Array.isArray(n)&&n[wd]===!0}function xd(n){return(n.flags&4)!==0}function uo(n){return n.componentOffset>-1}function Cl(n){return(n.flags&1)===1}function Ht(n){return!!n.template}function gr(n){return(n[$]&512)!==0}function fo(n){return(n[$]&256)===256}var Ea=class{previousValue;currentValue;firstChange;constructor(e,t,o){this.previousValue=e,this.currentValue=t,this.firstChange=o}isFirstChange(){return this.firstChange}};function Dd(n,e,t,o){e!==null?e.applyValueToInputSignal(e,o):n[t]=o}var $e=(()=>{let n=()=>Ed;return n.ngInherit=!0,n})();function Ed(n){return n.type.prototype.ngOnChanges&&(n.setInput=qh),Gh}function Gh(){let n=Md(this),e=n?.current;if(e){let t=n.previous;if(t===Tn)n.previous=e;else for(let o in e)t[o]=e[o];n.current=null,this.ngOnChanges(e)}}function qh(n,e,t,o,i){let r=this.declaredInputs[o],s=Md(n)||Wh(n,{previous:Tn,current:null}),a=s.current||(s.current={}),l=s.previous,d=l[r];a[r]=new Ea(d&&d.currentValue,t,l===Tn),Dd(n,e,i,t)}var Sd="__ngSimpleChanges__";function Md(n){return n[Sd]||null}function Wh(n,e){return n[Sd]=e}var Ou=null;var ye=function(n,e=null,t){Ou?.(n,e,t)},Id="svg",Kh="math";function Ut(n){for(;Array.isArray(n);)n=n[on];return n}function Td(n,e){return Ut(e[n])}function qt(n,e){return Ut(e[n.index])}function bl(n,e){return n.data[e]}function wl(n,e){return n[e]}function Yh(n,e,t,o){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=o}function zt(n,e){let t=e[n];return fn(t)?t:t[on]}function Zh(n){return(n[$]&4)===4}function xl(n){return(n[$]&128)===128}function Qh(n){return rn(n[Ye])}function io(n,e){return e==null?null:n[e]}function Od(n){n[Jn]=0}function Ad(n){n[$]&1024||(n[$]|=1024,xl(n)&&Vr(n))}function Jh(n,e){for(;n>0;)e=e[co],n--;return e}function Fr(n){return!!(n[$]&9216||n[vt]?.dirty)}function Sa(n){n[mn].changeDetectionScheduler?.notify(8),n[$]&64&&(n[$]|=1024),Fr(n)&&Vr(n)}function Vr(n){n[mn].changeDetectionScheduler?.notify(0);let e=Nn(n);for(;e!==null&&!(e[$]&8192||(e[$]|=8192,!xl(e)));)e=Nn(e)}function Nd(n,e){if(fo(n))throw new X(911,!1);n[dn]===null&&(n[dn]=[]),n[dn].push(e)}function Xh(n,e){if(n[dn]===null)return;let t=n[dn].indexOf(e);t!==-1&&n[dn].splice(t,1)}function Nn(n){let e=n[Ye];return rn(e)?e[Ye]:e}function Dl(n){return n[pr]??=[]}function El(n){return n.cleanup??=[]}function eg(n,e,t,o){let i=Dl(e);i.push(t),n.firstCreatePass&&El(n).push(o,i.length-1)}var U={lFrame:Hd(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ma=!1;function tg(){return U.lFrame.elementDepthCount}function ng(){U.lFrame.elementDepthCount++}function og(){U.lFrame.elementDepthCount--}function Pd(){return U.bindingsEnabled}function ig(){return U.skipHydrationRootTNode!==null}function rg(n){return U.skipHydrationRootTNode===n}function sg(){U.skipHydrationRootTNode=null}function te(){return U.lFrame.lView}function He(){return U.lFrame.tView}function x(n){return U.lFrame.contextLView=n,n[Ve]}function D(n){return U.lFrame.contextLView=null,n}function _t(){let n=kd();for(;n!==null&&n.type===64;)n=n.parent;return n}function kd(){return U.lFrame.currentTNode}function ag(){let n=U.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Jo(n,e){let t=U.lFrame;t.currentTNode=n,t.isParent=e}function Rd(){return U.lFrame.isParent}function lg(){U.lFrame.isParent=!1}function cg(){return U.lFrame.contextLView}function Fd(){return Ma}function Au(n){let e=Ma;return Ma=n,e}function Vd(){let n=U.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function Ld(){return U.lFrame.bindingIndex}function ug(n){return U.lFrame.bindingIndex=n}function po(){return U.lFrame.bindingIndex++}function Lr(n){let e=U.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function dg(){return U.lFrame.inI18n}function fg(n,e){let t=U.lFrame;t.bindingIndex=t.bindingRootIndex=n,Ia(e)}function pg(){return U.lFrame.currentDirectiveIndex}function Ia(n){U.lFrame.currentDirectiveIndex=n}function mg(n){let e=U.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function jd(){return U.lFrame.currentQueryIndex}function Sl(n){U.lFrame.currentQueryIndex=n}function hg(n){let e=n[B];return e.type===2?e.declTNode:e.type===1?n[Nt]:null}function Bd(n,e,t){if(t&K.SkipSelf){let i=e,r=n;for(;i=i.parent,i===null&&!(t&K.Host);)if(i=hg(r),i===null||(r=r[co],i.type&10))break;if(i===null)return!1;e=i,n=r}let o=U.lFrame=$d();return o.currentTNode=e,o.lView=n,!0}function Ml(n){let e=$d(),t=n[B];U.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function $d(){let n=U.lFrame,e=n===null?null:n.child;return e===null?Hd(n):e}function Hd(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function Ud(){let n=U.lFrame;return U.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var zd=Ud;function Il(){let n=Ud();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function gg(n){return(U.lFrame.contextLView=Jh(n,U.lFrame.contextLView))[Ve]}function Wt(){return U.lFrame.selectedIndex}function Pn(n){U.lFrame.selectedIndex=n}function Tl(){let n=U.lFrame;return bl(n.tView,n.selectedIndex)}function Ol(){U.lFrame.currentNamespace=Id}function Al(){yg()}function yg(){U.lFrame.currentNamespace=null}function vg(){return U.lFrame.currentNamespace}var Gd=!0;function Nl(){return Gd}function Pl(n){Gd=n}function _g(n,e,t){let{ngOnChanges:o,ngOnInit:i,ngDoCheck:r}=e.type.prototype;if(o){let s=Ed(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),r&&((t.preOrderHooks??=[]).push(n,r),(t.preOrderCheckHooks??=[]).push(n,r))}function qd(n,e){for(let t=e.directiveStart,o=e.directiveEnd;t<o;t++){let r=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:d,ngOnDestroy:f}=r;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),d&&((n.viewHooks??=[]).push(t,d),(n.viewCheckHooks??=[]).push(t,d)),f!=null&&(n.destroyHooks??=[]).push(t,f)}}function nr(n,e,t){Wd(n,e,3,t)}function or(n,e,t,o){(n[$]&3)===t&&Wd(n,e,t,o)}function aa(n,e){let t=n[$];(t&3)===e&&(t&=16383,t+=1,n[$]=t)}function Wd(n,e,t,o){let i=o!==void 0?n[Jn]&65535:0,r=o??-1,s=e.length-1,a=0;for(let l=i;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],o!=null&&a>=o)break}else e[l]<0&&(n[Jn]+=65536),(a<r||r==-1)&&(Cg(n,t,e,l),n[Jn]=(n[Jn]&4294901760)+l+2),l++}function Nu(n,e){ye(4,n,e);let t=q(null);try{e.call(n)}finally{q(t),ye(5,n,e)}}function Cg(n,e,t,o){let i=t[o]<0,r=t[o+1],s=i?-t[o]:t[o],a=n[s];i?n[$]>>14<n[Jn]>>16&&(n[$]&3)===e&&(n[$]+=16384,Nu(a,r)):Nu(a,r)}var eo=-1,kn=class{factory;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,t,o){this.factory=e,this.canSeeViewProviders=t,this.injectImpl=o}};function bg(n){return(n.flags&8)!==0}function wg(n){return(n.flags&16)!==0}function xg(n,e,t){let o=0;for(;o<t.length;){let i=t[o];if(typeof i=="number"){if(i!==0)break;o++;let r=t[o++],s=t[o++],a=t[o++];n.setAttribute(e,s,a,r)}else{let r=i,s=t[++o];Eg(r)?n.setProperty(e,r,s):n.setAttribute(e,r,s),o++}}return o}function Dg(n){return n===3||n===4||n===6}function Eg(n){return n.charCodeAt(0)===64}function $o(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let o=0;o<e.length;o++){let i=e[o];typeof i=="number"?t=i:t===0||(t===-1||t===2?Pu(n,t,i,null,e[++o]):Pu(n,t,i,null,null))}}return n}function Pu(n,e,t,o,i){let r=0,s=n.length;if(e===-1)s=-1;else for(;r<n.length;){let a=n[r++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=r-1;break}}}for(;r<n.length;){let a=n[r];if(typeof a=="number")break;if(a===t){i!==null&&(n[r+1]=i);return}r++,i!==null&&r++}s!==-1&&(n.splice(s,0,e),r=s+1),n.splice(r++,0,t),i!==null&&n.splice(r++,0,i)}function Kd(n){return n!==eo}function yr(n){return n&32767}function Sg(n){return n>>16}function vr(n,e){let t=Sg(n),o=e;for(;t>0;)o=o[co],t--;return o}var Ta=!0;function _r(n){let e=Ta;return Ta=n,e}var Mg=256,Yd=Mg-1,Zd=5,Ig=0,$t={};function Tg(n,e,t){let o;typeof t=="string"?o=t.charCodeAt(0)||0:t.hasOwnProperty(Fo)&&(o=t[Fo]),o==null&&(o=t[Fo]=Ig++);let i=o&Yd,r=1<<i;e.data[n+(i>>Zd)]|=r}function Cr(n,e){let t=Qd(n,e);if(t!==-1)return t;let o=e[B];o.firstCreatePass&&(n.injectorIndex=e.length,la(o.data,n),la(e,null),la(o.blueprint,null));let i=kl(n,e),r=n.injectorIndex;if(Kd(i)){let s=yr(i),a=vr(i,e),l=a[B].data;for(let d=0;d<8;d++)e[r+d]=a[s+d]|l[s+d]}return e[r+8]=i,r}function la(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Qd(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function kl(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,o=null,i=e;for(;i!==null;){if(o=nf(i),o===null)return eo;if(t++,i=i[co],o.injectorIndex!==-1)return o.injectorIndex|t<<16}return eo}function Oa(n,e,t){Tg(n,e,t)}function Jd(n,e,t){if(t&K.Optional||n!==void 0)return n;hl(e,"NodeInjector")}function Xd(n,e,t,o){if(t&K.Optional&&o===void 0&&(o=null),(t&(K.Self|K.Host))===0){let i=n[no],r=st(void 0);try{return i?i.get(e,o,t&K.Optional):fd(e,o,t&K.Optional)}finally{st(r)}}return Jd(o,e,t)}function ef(n,e,t,o=K.Default,i){if(n!==null){if(e[$]&2048&&!(o&K.Self)){let s=Pg(n,e,t,o,$t);if(s!==$t)return s}let r=tf(n,e,t,o,$t);if(r!==$t)return r}return Xd(e,t,o,i)}function tf(n,e,t,o,i){let r=Ag(t);if(typeof r=="function"){if(!Bd(e,n,o))return o&K.Host?Jd(i,t,o):Xd(e,t,o,i);try{let s;if(s=r(o),s==null&&!(o&K.Optional))hl(t);else return s}finally{zd()}}else if(typeof r=="number"){let s=null,a=Qd(n,e),l=eo,d=o&K.Host?e[Tt][Nt]:null;for((a===-1||o&K.SkipSelf)&&(l=a===-1?kl(n,e):e[a+8],l===eo||!Ru(o,!1)?a=-1:(s=e[B],a=yr(l),e=vr(l,e)));a!==-1;){let f=e[B];if(ku(r,a,f.data)){let h=Og(a,e,t,s,o,d);if(h!==$t)return h}l=e[a+8],l!==eo&&Ru(o,e[B].data[a+8]===d)&&ku(r,a,e)?(s=f,a=yr(l),e=vr(l,e)):a=-1}}return i}function Og(n,e,t,o,i,r){let s=e[B],a=s.data[n+8],l=o==null?uo(a)&&Ta:o!=s&&(a.type&3)!==0,d=i&K.Host&&r===a,f=ir(a,s,t,l,d);return f!==null?Ho(e,s,f,a,i):$t}function ir(n,e,t,o,i){let r=n.providerIndexes,s=e.data,a=r&1048575,l=n.directiveStart,d=n.directiveEnd,f=r>>20,h=o?a:a+f,C=i?a+f:d;for(let g=h;g<C;g++){let w=s[g];if(g<l&&t===w||g>=l&&w.type===t)return g}if(i){let g=s[l];if(g&&Ht(g)&&g.type===t)return l}return null}function Ho(n,e,t,o,i){let r=n[t],s=e.data;if(r instanceof kn){let a=r;a.resolving&&ud(yh(s[t]));let l=_r(a.canSeeViewProviders);a.resolving=!0;let d,f=a.injectImpl?st(a.injectImpl):null,h=Bd(n,o,K.Default);try{r=n[t]=a.factory(void 0,i,s,n,o),e.firstCreatePass&&t>=o.directiveStart&&_g(t,s[t],e)}finally{f!==null&&st(f),_r(l),a.resolving=!1,zd()}}return r}function Ag(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Fo)?n[Fo]:void 0;return typeof e=="number"?e>=0?e&Yd:Ng:e}function ku(n,e,t){let o=1<<n;return!!(t[e+(n>>Zd)]&o)}function Ru(n,e){return!(n&K.Self)&&!(n&K.Host&&e)}var Mn=class{_tNode;_lView;constructor(e,t){this._tNode=e,this._lView=t}get(e,t,o){return ef(this._tNode,this._lView,e,Pr(o),t)}};function Ng(){return new Mn(_t(),te())}function hn(n){return Nr(()=>{let e=n.prototype.constructor,t=e[ar]||Aa(e),o=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==o;){let r=i[ar]||Aa(i);if(r&&r!==t)return r;i=Object.getPrototypeOf(i)}return r=>new r})}function Aa(n){return sd(n)?()=>{let e=Aa(ot(n));return e&&e()}:In(n)}function Pg(n,e,t,o,i){let r=n,s=e;for(;r!==null&&s!==null&&s[$]&2048&&!gr(s);){let a=tf(r,s,t,o|K.Self,$t);if(a!==$t)return a;let l=r.parent;if(!l){let d=s[bd];if(d){let f=d.get(t,$t,o);if(f!==$t)return f}l=nf(s),s=s[co]}r=l}return i}function nf(n){let e=n[B],t=e.type;return t===2?e.declTNode:t===1?n[Nt]:null}function Fu(n,e=null,t=null,o){let i=kg(n,e,t,o);return i.resolveInjectorInitializers(),i}function kg(n,e=null,t=null,o,i=new Set){let r=[t||at,Ph(n)];return o=o||(typeof n=="object"?void 0:yt(n)),new Lo(r,e||_l(),o||null,i)}var ro=class n{static THROW_IF_NOT_FOUND=Sn;static NULL=new fr;static create(e,t){if(Array.isArray(e))return Fu({name:""},t,e,"");{let o=e.name??"";return Fu({name:o},e.parent,e.providers,o)}}static \u0275prov=Me({token:n,providedIn:"any",factory:()=>ge(md)});static __NG_ELEMENT_ID__=-1};var Rg=new Y("");Rg.__NG_ELEMENT_ID__=n=>{let e=_t();if(e===null)throw new X(204,!1);if(e.type&2)return e.value;if(n&K.Optional)return null;throw new X(204,!1)};var of=!1,rf=(()=>{class n{static __NG_ELEMENT_ID__=Fg;static __NG_ENV_ID__=t=>t}return n})(),Na=class extends rf{_lView;constructor(e){super(),this._lView=e}onDestroy(e){let t=this._lView;return fo(t)?(e(),()=>{}):(Nd(t,e),()=>Xh(t,e))}};function Fg(){return new Na(te())}var Uo=class{},sf=new Y("",{providedIn:"root",factory:()=>!1});var af=new Y(""),lf=new Y(""),jr=(()=>{class n{taskId=0;pendingTasks=new Set;get _hasPendingTasks(){return this.hasPendingTasks.value}hasPendingTasks=new Ao(!1);add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}has(t){return this.pendingTasks.has(t)}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static \u0275prov=Me({token:n,providedIn:"root",factory:()=>new n})}return n})();var Pa=class extends jt{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Uh()&&(this.destroyRef=pe(rf,{optional:!0})??void 0,this.pendingTasks=pe(jr,{optional:!0})??void 0)}emit(e){let t=q(null);try{super.next(e)}finally{q(t)}}subscribe(e,t,o){let i=e,r=t||(()=>null),s=o;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),r=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(r=this.wrapInTimeout(r),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:r,complete:s});return e instanceof nt&&e.add(a),a}wrapInTimeout(e){return t=>{let o=this.pendingTasks?.add();setTimeout(()=>{try{e(t)}finally{o!==void 0&&this.pendingTasks?.remove(o)}})}}},L=Pa;function br(...n){}function cf(n){let e,t;function o(){n=br;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),o()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),o()})),()=>o()}function Vu(n){return queueMicrotask(()=>n()),()=>{n=br}}var Rl="isAngularZone",wr=Rl+"_ID",Vg=0,ze=class n{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new L(!1);onMicrotaskEmpty=new L(!1);onStable=new L(!1);onError=new L(!1);constructor(e){let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:r=of}=e;if(typeof Zone>"u")throw new X(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&o,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=r,Bg(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Rl)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new X(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new X(909,!1)}run(e,t,o){return this._inner.run(e,t,o)}runTask(e,t,o,i){let r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,e,Lg,br,br);try{return r.runTask(s,t,o)}finally{r.cancelTask(s)}}runGuarded(e,t,o){return this._inner.runGuarded(e,t,o)}runOutsideAngular(e){return this._outer.run(e)}},Lg={};function Fl(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function jg(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){cf(()=>{n.callbackScheduled=!1,ka(n),n.isCheckStableRunning=!0,Fl(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),ka(n)}function Bg(n){let e=()=>{jg(n)},t=Vg++;n._inner=n._inner.fork({name:"angular",properties:{[Rl]:!0,[wr]:t,[wr+t]:!0},onInvokeTask:(o,i,r,s,a,l)=>{if($g(l))return o.invokeTask(r,s,a,l);try{return Lu(n),o.invokeTask(r,s,a,l)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),ju(n)}},onInvoke:(o,i,r,s,a,l,d)=>{try{return Lu(n),o.invoke(r,s,a,l,d)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!Hg(l)&&e(),ju(n)}},onHasTask:(o,i,r,s)=>{o.hasTask(r,s),i===r&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,ka(n),Fl(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(o,i,r,s)=>(o.handleError(r,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function ka(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Lu(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function ju(n){n._nesting--,Fl(n)}var Ra=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new L;onMicrotaskEmpty=new L;onStable=new L;onError=new L;run(e,t,o){return e.apply(t,o)}runGuarded(e,t,o){return e.apply(t,o)}runOutsideAngular(e){return e()}runTask(e,t,o,i){return e.apply(t,o)}};function $g(n){return uf(n,"__ignore_ng_zone__")}function Hg(n){return uf(n,"__scheduler_tick__")}function uf(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var tn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Ug=new Y("",{providedIn:"root",factory:()=>{let n=pe(ze),e=pe(tn);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function zg(){return mo(_t(),te())}function mo(n,e){return new Ct(qt(n,e))}var Ct=(()=>{class n{nativeElement;constructor(t){this.nativeElement=t}static __NG_ELEMENT_ID__=zg}return n})();function Gg(n){return n instanceof Ct?n.nativeElement:n}function qg(n){return typeof n=="function"&&n[Dt]!==void 0}function S(n,e){let t=Us(n,e?.equal),o=t[Dt];return t.set=i=>ki(o,i),t.update=i=>zs(o,i),t.asReadonly=Wg.bind(t),t}function Wg(){let n=this[Dt];if(n.readonlyFn===void 0){let e=()=>this();e[Dt]=n,n.readonlyFn=e}return n.readonlyFn}function df(n){return qg(n)&&typeof n.set=="function"}function Kg(){return this._results[Symbol.iterator]()}var Fa=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new jt}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){this.dirty=!1;let o=Ih(e);(this._changesDetected=!Mh(this._results,o,t))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Kg};function ff(n){return(n.flags&128)===128}var pf=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(pf||{}),mf=new Map,Yg=0;function Zg(){return Yg++}function Qg(n){mf.set(n[Rr],n)}function Va(n){mf.delete(n[Rr])}var Bu="__ngContext__";function Xo(n,e){fn(e)?(n[Bu]=e[Rr],Qg(e)):n[Bu]=e}function hf(n){return yf(n[Bo])}function gf(n){return yf(n[It])}function yf(n){for(;n!==null&&!rn(n);)n=n[It];return n}var La;function vf(n){La=n}function Jg(){if(La!==void 0)return La;if(typeof document<"u")return document;throw new X(210,!1)}var Vl=new Y("",{providedIn:"root",factory:()=>Xg}),Xg="ng",Ll=new Y(""),ei=new Y("",{providedIn:"platform",factory:()=>"unknown"});var jl=new Y("",{providedIn:"root",factory:()=>Jg().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var ey="h",ty="b";var _f=!1,ny=new Y("",{providedIn:"root",factory:()=>_f});var Cf=function(n){return n[n.CHANGE_DETECTION=0]="CHANGE_DETECTION",n[n.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",n}(Cf||{}),Br=new Y(""),$u=new Set;function Bl(n){$u.has(n)||($u.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}var oy=(()=>{class n{impl=null;execute(){this.impl?.execute()}static \u0275prov=Me({token:n,providedIn:"root",factory:()=>new n})}return n})();var iy=(n,e,t,o)=>{};function ry(n,e,t,o){iy(n,e,t,o)}var sy=()=>null;function bf(n,e,t=!1){return sy(n,e,t)}function wf(n,e){let t=n.contentQueries;if(t!==null){let o=q(null);try{for(let i=0;i<t.length;i+=2){let r=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];Sl(r),a.contentQueries(2,e[s],s)}}}finally{q(o)}}}function ja(n,e,t){Sl(0);let o=q(null);try{e(n,t)}finally{q(o)}}function xf(n,e,t){if(xd(e)){let o=q(null);try{let i=e.directiveStart,r=e.directiveEnd;for(let s=i;s<r;s++){let a=n.data[s];if(a.contentQueries){let l=t[s];a.contentQueries(1,l,s)}}}finally{q(o)}}}var Gt=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gt||{});var Ba=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ah})`}};function Df(n){return n instanceof Ba?n.changingThisBreaksApplicationSecurity:n}function ay(n,e){return n.createText(e)}function ly(n,e,t){n.setValue(e,t)}function Ef(n,e,t){return n.createElement(e,t)}function xr(n,e,t,o,i){n.insertBefore(e,t,o,i)}function Sf(n,e,t){n.appendChild(e,t)}function Hu(n,e,t,o,i){o!==null?xr(n,e,t,o,i):Sf(n,e,t)}function cy(n,e,t){n.removeChild(null,e,t)}function uy(n,e,t){n.setAttribute(e,"style",t)}function dy(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Mf(n,e,t){let{mergedAttrs:o,classes:i,styles:r}=t;o!==null&&xg(n,e,o),i!==null&&dy(n,e,i),r!==null&&uy(n,e,r)}function If(n){return n.ownerDocument}function fy(n,e,t){let o=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let r=e.length;if(i+r===o||n.charCodeAt(i+r)<=32)return i}t=i+1}}var Tf="ng-template";function py(n,e,t,o){let i=0;if(o){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&fy(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if($l(n))return!1;if(i=e.indexOf(1,i),i>-1){let r;for(;++i<e.length&&typeof(r=e[i])=="string";)if(r.toLowerCase()===t)return!0}return!1}function $l(n){return n.type===4&&n.value!==Tf}function my(n,e,t){let o=n.type===4&&!t?Tf:n.value;return e===o}function hy(n,e,t){let o=4,i=n.attrs,r=i!==null?vy(i):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!St(o)&&!St(l))return!1;if(s&&St(l))continue;s=!1,o=l|o&1;continue}if(!s)if(o&4){if(o=2|o&1,l!==""&&!my(n,l,t)||l===""&&e.length===1){if(St(o))return!1;s=!0}}else if(o&8){if(i===null||!py(n,i,l,t)){if(St(o))return!1;s=!0}}else{let d=e[++a],f=gy(l,i,$l(n),t);if(f===-1){if(St(o))return!1;s=!0;continue}if(d!==""){let h;if(f>r?h="":h=i[f+1].toLowerCase(),o&2&&d!==h){if(St(o))return!1;s=!0}}}}return St(o)||s}function St(n){return(n&1)===0}function gy(n,e,t,o){if(e===null)return-1;let i=0;if(o||!t){let r=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)r=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=r?1:2}return-1}else return _y(e,n)}function yy(n,e,t=!1){for(let o=0;o<e.length;o++)if(hy(n,e[o],t))return!0;return!1}function vy(n){for(let e=0;e<n.length;e++){let t=n[e];if(Dg(t))return e}return n.length}function _y(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let o=n[t];if(typeof o=="number")return-1;if(o===e)return t;t++}return-1}function Uu(n,e){return n?":not("+e.trim()+")":e}function Cy(n){let e=n[0],t=1,o=2,i="",r=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(o&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else o&8?i+="."+s:o&4&&(i+=" "+s);else i!==""&&!St(s)&&(e+=Uu(r,i),i=""),o=s,r=r||!St(o);t++}return i!==""&&(e+=Uu(r,i)),e}function by(n){return n.map(Cy).join(",")}function wy(n){let e=[],t=[],o=1,i=2;for(;o<n.length;){let r=n[o];if(typeof r=="string")i===2?r!==""&&e.push(r,n[++o]):i===8&&t.push(r);else{if(!St(i))break;i=r}o++}return t.length&&e.push(1,...t),e}var lt={};function Hl(n,e,t,o,i,r,s,a,l,d,f){let h=Ze+o,C=h+i,g=xy(h,C),w=typeof d=="function"?d():d;return g[B]={type:n,blueprint:g,template:t,queries:null,viewQuery:a,declTNode:e,data:g.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:C,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof r=="function"?r():r,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:w,incompleteFirstPass:!1,ssrId:f}}function xy(n,e){let t=[];for(let o=0;o<e;o++)t.push(o<n?null:lt);return t}function Dy(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Hl(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Ul(n,e,t,o,i,r,s,a,l,d,f){let h=e.blueprint.slice();return h[on]=i,h[$]=o|4|128|8|64|1024,(d!==null||n&&n[$]&2048)&&(h[$]|=2048),Od(h),h[Ye]=h[co]=n,h[Ve]=t,h[mn]=s||n&&n[mn],h[Ae]=a||n&&n[Ae],h[no]=l||n&&n[no]||null,h[Nt]=r,h[Rr]=Zg(),h[jo]=f,h[bd]=d,h[Tt]=e.type==2?n[Tt]:h,h}function Ey(n,e,t){let o=qt(e,n),i=Dy(t),r=n[mn].rendererFactory,s=zl(n,Ul(n,i,null,Of(t),o,e,null,r.createRenderer(o,t),null,null,null));return n[e.index]=s}function Of(n){let e=16;return n.signals?e=4096:n.onPush&&(e=64),e}function Af(n,e,t,o){if(t===0)return-1;let i=e.length;for(let r=0;r<t;r++)e.push(o),n.blueprint.push(o),n.data.push(null);return i}function zl(n,e){return n[Bo]?n[Tu][It]=e:n[Bo]=e,n[Tu]=e,e}function m(n=1){Nf(He(),te(),Wt()+n,!1)}function Nf(n,e,t,o){if(!o)if((e[$]&3)===3){let r=n.preOrderCheckHooks;r!==null&&nr(e,r,t)}else{let r=n.preOrderHooks;r!==null&&or(e,r,0,t)}Pn(t)}var $r=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}($r||{});function $a(n,e,t,o){let i=q(null);try{let[r,s,a]=n.inputs[t],l=null;(s&$r.SignalBased)!==0&&(l=e[r][Dt]),l!==null&&l.transformFn!==void 0?o=l.transformFn(o):a!==null&&(o=a.call(e,o)),n.setInput!==null?n.setInput(e,l,o,t,r):Dd(e,l,r,o)}finally{q(i)}}function Pf(n,e,t,o,i){let r=Wt(),s=o&2;try{Pn(-1),s&&e.length>Ze&&Nf(n,e,Ze,!1),ye(s?2:0,i),t(o,i)}finally{Pn(r),ye(s?3:1,i)}}function Gl(n,e,t){Ay(n,e,t),(t.flags&64)===64&&Ny(n,e,t)}function kf(n,e,t=qt){let o=e.localNames;if(o!==null){let i=e.index+1;for(let r=0;r<o.length;r+=2){let s=o[r+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function Sy(n,e,t,o){let r=o.get(ny,_f)||t===Gt.ShadowDom,s=n.selectRootElement(e,r);return My(s),s}function My(n){Iy(n)}var Iy=()=>null;function Ty(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Rf(n,e,t,o,i,r,s,a){if(!a&&ql(e,n,t,o,i)){uo(e)&&Oy(t,e.index);return}if(e.type&3){let l=qt(e,t);o=Ty(o),i=s!=null?s(i,e.value||"",o):i,r.setProperty(l,o,i)}else e.type&12}function Oy(n,e){let t=zt(e,n);t[$]&16||(t[$]|=64)}function Ay(n,e,t){let o=t.directiveStart,i=t.directiveEnd;uo(t)&&Ey(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||Cr(t,e);let r=t.initialInputs;for(let s=o;s<i;s++){let a=n.data[s],l=Ho(e,n,s,t);if(Xo(l,e),r!==null&&Fy(e,s-o,l,a,t,r),Ht(a)){let d=zt(t.index,e);d[Ve]=Ho(e,n,s,t)}}}function Ny(n,e,t){let o=t.directiveStart,i=t.directiveEnd,r=t.index,s=pg();try{Pn(r);for(let a=o;a<i;a++){let l=n.data[a],d=e[a];Ia(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Py(l,d)}}finally{Pn(-1),Ia(s)}}function Py(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function Ff(n,e){let t=n.directiveRegistry,o=null;if(t)for(let i=0;i<t.length;i++){let r=t[i];yy(e,r.selectors,!1)&&(o??=[],Ht(r)?o.unshift(r):o.push(r))}return o}function ky(n,e,t,o,i,r){let s=qt(n,e);Ry(e[Ae],s,r,n.value,t,o,i)}function Ry(n,e,t,o,i,r,s){if(r==null)n.removeAttribute(e,i,t);else{let a=s==null?un(r):s(r,o||"",i);n.setAttribute(e,i,a,t)}}function Fy(n,e,t,o,i,r){let s=r[e];if(s!==null)for(let a=0;a<s.length;a+=2){let l=s[a],d=s[a+1];$a(o,t,l,d)}}function Vy(n,e){let t=n[no],o=t?t.get(tn,null):null;o&&o.handleError(e)}function ql(n,e,t,o,i){let r=n.inputs?.[o],s=n.hostDirectiveInputs?.[o],a=!1;if(s)for(let l=0;l<s.length;l+=2){let d=s[l],f=s[l+1],h=e.data[d];$a(h,t[d],f,i),a=!0}if(r)for(let l of r){let d=t[l],f=e.data[l];$a(f,d,o,i),a=!0}return a}function Ly(n,e){let t=zt(e,n),o=t[B];jy(o,t);let i=t[on];i!==null&&t[jo]===null&&(t[jo]=bf(i,t[no])),ye(18),Wl(o,t,t[Ve]),ye(19,t[Ve])}function jy(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function Wl(n,e,t){Ml(e);try{let o=n.viewQuery;o!==null&&ja(1,o,t);let i=n.template;i!==null&&Pf(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[en]?.finishViewCreation(n),n.staticContentQueries&&wf(n,e),n.staticViewQueries&&ja(2,n.viewQuery,t);let r=n.components;r!==null&&By(e,r)}catch(o){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),o}finally{e[$]&=-5,Il()}}function By(n,e){for(let t=0;t<e.length;t++)Ly(n,e[t])}function Hr(n,e,t,o){let i=q(null);try{let r=e.tView,a=n[$]&4096?4096:16,l=Ul(n,r,t,a,null,e,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null),d=n[e.index];l[On]=d;let f=n[en];return f!==null&&(l[en]=f.createEmbeddedView(r)),Wl(r,l,t),l}finally{q(i)}}function zo(n,e){return!e||e.firstChild===null||ff(n)}var $y;function Kl(n,e){return $y(n,e)}var nn=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(nn||{});function Vf(n){return(n.flags&32)===32}function Xn(n,e,t,o,i){if(o!=null){let r,s=!1;rn(o)?r=o:fn(o)&&(s=!0,o=o[on]);let a=Ut(o);n===0&&t!==null?i==null?Sf(e,t,a):xr(e,t,a,i||null,!0):n===1&&t!==null?xr(e,t,a,i||null,!0):n===2?cy(e,a,s):n===3&&e.destroyNode(a),r!=null&&Xy(e,n,r,t,i)}}function Hy(n,e){Lf(n,e),e[on]=null,e[Nt]=null}function Uy(n,e,t,o,i,r){o[on]=i,o[Nt]=e,zr(n,o,t,1,i,r)}function Lf(n,e){e[mn].changeDetectionScheduler?.notify(9),zr(n,e,e[Ae],2,null,null)}function zy(n){let e=n[Bo];if(!e)return ca(n[B],n);for(;e;){let t=null;if(fn(e))t=e[Bo];else{let o=e[Ke];o&&(t=o)}if(!t){for(;e&&!e[It]&&e!==n;)fn(e)&&ca(e[B],e),e=e[Ye];e===null&&(e=n),fn(e)&&ca(e[B],e),t=e&&e[It]}e=t}}function Yl(n,e){let t=n[oo],o=t.indexOf(e);t.splice(o,1)}function Ur(n,e){if(fo(e))return;let t=e[Ae];t.destroyNode&&zr(n,e,t,3,null,null),zy(e)}function ca(n,e){if(fo(e))return;let t=q(null);try{e[$]&=-129,e[$]|=256,e[vt]&&Bs(e[vt]),qy(n,e),Gy(n,e),e[B].type===1&&e[Ae].destroy();let o=e[On];if(o!==null&&rn(e[Ye])){o!==e[Ye]&&Yl(o,e);let i=e[en];i!==null&&i.detachView(n)}Va(e)}finally{q(t)}}function Gy(n,e){let t=n.cleanup,o=e[pr];if(t!==null)for(let s=0;s<t.length-1;s+=2)if(typeof t[s]=="string"){let a=t[s+3];a>=0?o[a]():o[-a].unsubscribe(),s+=2}else{let a=o[t[s+1]];t[s].call(a)}o!==null&&(e[pr]=null);let i=e[dn];if(i!==null){e[dn]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let r=e[mr];if(r!==null){e[mr]=null;for(let s of r)s.destroy()}}function qy(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let o=0;o<t.length;o+=2){let i=e[t[o]];if(!(i instanceof kn)){let r=t[o+1];if(Array.isArray(r))for(let s=0;s<r.length;s+=2){let a=i[r[s]],l=r[s+1];ye(4,a,l);try{l.call(a)}finally{ye(5,a,l)}}else{ye(4,i,r);try{r.call(i)}finally{ye(5,i,r)}}}}}function Wy(n,e,t){return Ky(n,e.parent,t)}function Ky(n,e,t){let o=e;for(;o!==null&&o.type&168;)e=o,o=e.parent;if(o===null)return t[on];if(uo(o)){let{encapsulation:i}=n.data[o.directiveStart+o.componentOffset];if(i===Gt.None||i===Gt.Emulated)return null}return qt(o,t)}function Yy(n,e,t){return Qy(n,e,t)}function Zy(n,e,t){return n.type&40?qt(n,t):null}var Qy=Zy,zu;function Zl(n,e,t,o){let i=Wy(n,o,e),r=e[Ae],s=o.parent||e[Nt],a=Yy(s,o,e);if(i!=null)if(Array.isArray(t))for(let l=0;l<t.length;l++)Hu(r,i,t[l],a,!1);else Hu(r,i,t,a,!1);zu!==void 0&&zu(r,o,e,t,i)}function Ro(n,e){if(e!==null){let t=e.type;if(t&3)return qt(e,n);if(t&4)return Ha(-1,n[e.index]);if(t&8){let o=e.child;if(o!==null)return Ro(n,o);{let i=n[e.index];return rn(i)?Ha(-1,i):Ut(i)}}else{if(t&128)return Ro(n,e.next);if(t&32)return Kl(e,n)()||Ut(n[e.index]);{let o=jf(n,e);if(o!==null){if(Array.isArray(o))return o[0];let i=Nn(n[Tt]);return Ro(i,o)}else return Ro(n,e.next)}}}return null}function jf(n,e){if(e!==null){let o=n[Tt][Nt],i=e.projection;return o.projection[i]}return null}function Ha(n,e){let t=Ke+n+1;if(t<e.length){let o=e[t],i=o[B].firstChild;if(i!==null)return Ro(o,i)}return e[An]}function Ql(n,e,t,o,i,r,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=o[t.index],l=t.type;if(s&&e===0&&(a&&Xo(Ut(a),o),t.flags|=2),!Vf(t))if(l&8)Ql(n,e,t.child,o,i,r,!1),Xn(e,n,i,a,r);else if(l&32){let d=Kl(t,o),f;for(;f=d();)Xn(e,n,i,f,r);Xn(e,n,i,a,r)}else l&16?Jy(n,e,o,t,i,r):Xn(e,n,i,a,r);t=s?t.projectionNext:t.next}}function zr(n,e,t,o,i,r){Ql(t,o,n.firstChild,e,i,r,!1)}function Jy(n,e,t,o,i,r){let s=t[Tt],l=s[Nt].projection[o.projection];if(Array.isArray(l))for(let d=0;d<l.length;d++){let f=l[d];Xn(e,n,i,f,r)}else{let d=l,f=s[Ye];ff(o)&&(d.flags|=128),Ql(n,e,d,f,i,r,!0)}}function Xy(n,e,t,o,i){let r=t[An],s=Ut(t);r!==s&&Xn(e,n,o,r,i);for(let a=Ke;a<t.length;a++){let l=t[a];zr(l[B],l,n,e,o,r)}}function ev(n,e,t,o,i){if(e)i?n.addClass(t,o):n.removeClass(t,o);else{let r=o.indexOf("-")===-1?void 0:nn.DashCase;i==null?n.removeStyle(t,o,r):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),r|=nn.Important),n.setStyle(t,o,i,r))}}function Dr(n,e,t,o,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let r=e[t.index];r!==null&&o.push(Ut(r)),rn(r)&&tv(r,o);let s=t.type;if(s&8)Dr(n,e,t.child,o);else if(s&32){let a=Kl(t,e),l;for(;l=a();)o.push(l)}else if(s&16){let a=jf(e,t);if(Array.isArray(a))o.push(...a);else{let l=Nn(e[Tt]);Dr(l[B],l,a,o,!0)}}t=i?t.projectionNext:t.next}return o}function tv(n,e){for(let t=Ke;t<n.length;t++){let o=n[t],i=o[B].firstChild;i!==null&&Dr(o[B],o,i,e)}n[An]!==n[on]&&e.push(n[An])}function Bf(n){if(n[sa]!==null){for(let e of n[sa])e.impl.addSequence(e);n[sa].length=0}}var $f=[];function nv(n){return n[vt]??ov(n)}function ov(n){let e=$f.pop()??Object.create(rv);return e.lView=n,e}function iv(n){n.lView[vt]!==n&&(n.lView=null,$f.push(n))}var rv=H(I({},Io),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{Vr(n.lView)},consumerOnSignalRead(){this.lView[vt]=this}});function sv(n){let e=n[vt]??Object.create(av);return e.lView=n,e}var av=H(I({},Io),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:n=>{let e=Nn(n.lView);for(;e&&!Hf(e[B]);)e=Nn(e);e&&Ad(e)},consumerOnSignalRead(){this.lView[vt]=this}});function Hf(n){return n.type!==2}function Uf(n){if(n[mr]===null)return;let e=!0;for(;e;){let t=!1;for(let o of n[mr])o.dirty&&(t=!0,o.zone===null||Zone.current===o.zone?o.run():o.zone.run(()=>o.run()));e=t&&!!(n[$]&8192)}}var lv=100;function zf(n,e=!0,t=0){let i=n[mn].rendererFactory,r=!1;r||i.begin?.();try{cv(n,t)}catch(s){throw e&&Vy(n,s),s}finally{r||i.end?.()}}function cv(n,e){let t=Fd();try{Au(!0),Ua(n,e);let o=0;for(;Fr(n);){if(o===lv)throw new X(103,!1);o++,Ua(n,1)}}finally{Au(t)}}function uv(n,e,t,o){if(fo(e))return;let i=e[$],r=!1,s=!1;Ml(e);let a=!0,l=null,d=null;r||(Hf(n)?(d=nv(e),l=Ai(d)):ks()===null?(a=!1,d=sv(e),l=Ai(d)):e[vt]&&(Bs(e[vt]),e[vt]=null));try{Od(e),ug(n.bindingStartIndex),t!==null&&Pf(n,e,t,2,o);let f=(i&3)===3;if(!r)if(f){let g=n.preOrderCheckHooks;g!==null&&nr(e,g,null)}else{let g=n.preOrderHooks;g!==null&&or(e,g,0,null),aa(e,0)}if(s||dv(e),Uf(e),Gf(e,0),n.contentQueries!==null&&wf(n,e),!r)if(f){let g=n.contentCheckHooks;g!==null&&nr(e,g)}else{let g=n.contentHooks;g!==null&&or(e,g,1),aa(e,1)}pv(n,e);let h=n.components;h!==null&&Wf(e,h,0);let C=n.viewQuery;if(C!==null&&ja(2,C,o),!r)if(f){let g=n.viewCheckHooks;g!==null&&nr(e,g)}else{let g=n.viewHooks;g!==null&&or(e,g,2),aa(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[ra]){for(let g of e[ra])g();e[ra]=null}r||(Bf(e),e[$]&=-73)}catch(f){throw r||Vr(e),f}finally{d!==null&&(Ls(d,l),a&&iv(d)),Il()}}function Gf(n,e){for(let t=hf(n);t!==null;t=gf(t))for(let o=Ke;o<t.length;o++){let i=t[o];qf(i,e)}}function dv(n){for(let e=hf(n);e!==null;e=gf(e)){if(!(e[$]&2))continue;let t=e[oo];for(let o=0;o<t.length;o++){let i=t[o];Ad(i)}}}function fv(n,e,t){ye(18);let o=zt(e,n);qf(o,t),ye(19,o[Ve])}function qf(n,e){xl(n)&&Ua(n,e)}function Ua(n,e){let o=n[B],i=n[$],r=n[vt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(r?.dirty&&js(r)),s||=!1,r&&(r.dirty=!1),n[$]&=-9217,s)uv(o,n,o.template,n[Ve]);else if(i&8192){Uf(n),Gf(n,1);let a=o.components;a!==null&&Wf(n,a,1),Bf(n)}}function Wf(n,e,t){for(let o=0;o<e.length;o++)fv(n,e[o],t)}function pv(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let o=0;o<t.length;o++){let i=t[o];if(i<0)Pn(~i);else{let r=i,s=t[++o],a=t[++o];fg(s,r);let l=e[r];ye(24,l),a(2,l),ye(25,l)}}}finally{Pn(-1)}}function Jl(n,e){let t=Fd()?64:1088;for(n[mn].changeDetectionScheduler?.notify(e);n;){n[$]|=t;let o=Nn(n);if(gr(n)&&!o)return n;n=o}return null}function Kf(n,e,t,o){return[n,!0,0,e,null,o,null,t,null,null]}function Yf(n,e){let t=Ke+e;if(t<n.length)return n[t]}function Gr(n,e,t,o=!0){let i=e[B];if(mv(i,e,n,t),o){let s=Ha(t,n),a=e[Ae],l=a.parentNode(n[An]);l!==null&&Uy(i,n[Nt],a,e,l,s)}let r=e[jo];r!==null&&r.firstChild!==null&&(r.firstChild=null)}function Zf(n,e){let t=Go(n,e);return t!==void 0&&Ur(t[B],t),t}function Go(n,e){if(n.length<=Ke)return;let t=Ke+e,o=n[t];if(o){let i=o[On];i!==null&&i!==n&&Yl(i,o),e>0&&(n[t-1][It]=o[It]);let r=ur(n,Ke+e);Hy(o[B],o);let s=r[en];s!==null&&s.detachView(r[B]),o[Ye]=null,o[It]=null,o[$]&=-129}return o}function mv(n,e,t,o){let i=Ke+o,r=t.length;o>0&&(t[i-1][It]=e),o<r-Ke?(e[It]=t[i],pd(t,Ke+o,e)):(t.push(e),e[It]=null),e[Ye]=t;let s=e[On];s!==null&&t!==s&&Qf(s,e);let a=e[en];a!==null&&a.insertView(n),Sa(e),e[$]|=128}function Qf(n,e){let t=n[oo],o=e[Ye];if(fn(o))n[$]|=2;else{let i=o[Ye][Tt];e[Tt]!==i&&(n[$]|=2)}t===null?n[oo]=[e]:t.push(e)}var qo=class{_lView;_cdRefInjectingView;notifyErrorHandler;_appRef=null;_attachedToViewContainer=!1;get rootNodes(){let e=this._lView,t=e[B];return Dr(t,e,t.firstChild,[])}constructor(e,t,o=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=o}get context(){return this._lView[Ve]}set context(e){this._lView[Ve]=e}get destroyed(){return fo(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Ye];if(rn(e)){let t=e[hr],o=t?t.indexOf(this):-1;o>-1&&(Go(e,o),ur(t,o))}this._attachedToViewContainer=!1}Ur(this._lView[B],this._lView)}onDestroy(e){Nd(this._lView,e)}markForCheck(){Jl(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[$]&=-129}reattach(){Sa(this._lView),this._lView[$]|=128}detectChanges(){this._lView[$]|=1024,zf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=gr(this._lView),t=this._lView[On];t!==null&&!e&&Yl(t,this._lView),Lf(this._lView[B],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,!1);this._appRef=e;let t=gr(this._lView),o=this._lView[On];o!==null&&!t&&Qf(o,this._lView),Sa(this._lView)}};var Wo=(()=>{class n{static __NG_ELEMENT_ID__=yv}return n})(),hv=Wo,gv=class extends hv{_declarationLView;_declarationTContainer;elementRef;constructor(e,t,o){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,o){let i=Hr(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:o});return new qo(i)}};function yv(){return Xl(_t(),te())}function Xl(n,e){return n.type&4?new gv(e,n,mo(n,e)):null}function ec(n,e,t,o,i){let r=n.data[e];if(r===null)r=vv(n,e,t,o,i),dg()&&(r.flags|=32);else if(r.type&64){r.type=t,r.value=o,r.attrs=i;let s=ag();r.injectorIndex=s===null?-1:s.injectorIndex}return Jo(r,!0),r}function vv(n,e,t,o,i){let r=kd(),s=Rd(),a=s?r:r&&r.parent,l=n.data[e]=Cv(n,a,t,e,o,i);return _v(n,l,r,s),l}function _v(n,e,t,o){n.firstChild===null&&(n.firstChild=e),t!==null&&(o?t.child==null&&e.parent!==null&&(t.child=e):t.next===null&&(t.next=e,e.prev=t))}function Cv(n,e,t,o,i,r){let s=e?e.injectorIndex:-1,a=0;return ig()&&(a|=128),{type:t,index:o,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:r,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var $S=new RegExp(`^(\\d+)*(${ty}|${ey})*(.*)`);var bv=()=>null;function Ko(n,e){return bv(n,e)}var wv=class{},Jf=class{},za=class{resolveComponentFactory(e){throw Error(`No component factory found for ${yt(e)}.`)}},tc=class{static NULL=new za},so=class{},ho=(()=>{class n{destroyNode=null;static __NG_ELEMENT_ID__=()=>xv()}return n})();function xv(){let n=te(),e=_t(),t=zt(e.index,n);return(fn(t)?t:n)[Ae]}var Dv=(()=>{class n{static \u0275prov=Me({token:n,providedIn:"root",factory:()=>null})}return n})();var ua={},Ga=class{injector;parentInjector;constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,o){o=Pr(o);let i=this.injector.get(e,ua,o);return i!==ua||t===ua?i:this.parentInjector.get(e,t,o)}};function Gu(n,e,t){let o=t?n.styles:null,i=t?n.classes:null,r=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")r=a;else if(r==1)i=_a(i,a);else if(r==2){let l=a,d=e[++s];o=_a(o,l+": "+d+";")}}t?n.styles=o:n.stylesWithoutHost=o,t?n.classes=i:n.classesWithoutHost=i}function me(n,e=K.Default){let t=te();if(t===null)return ge(n,e);let o=_t();return ef(o,t,ot(n),e)}function Xf(n,e,t,o,i){let r=o===null?null:{"":-1},s=i(n,t);if(s!==null){let a,l=null,d=null,f=Sv(s);f===null?a=s:[a,l,d]=f,Tv(n,e,t,a,r,l,d)}r!==null&&o!==null&&Ev(t,o,r)}function Ev(n,e,t){let o=n.localNames=[];for(let i=0;i<e.length;i+=2){let r=t[e[i+1]];if(r==null)throw new X(-301,!1);o.push(e[i],r)}}function Sv(n){let e=null,t=!1;for(let s=0;s<n.length;s++){let a=n[s];if(s===0&&Ht(a)&&(e=a),a.findHostDirectiveDefs!==null){t=!0;break}}if(!t)return null;let o=null,i=null,r=null;for(let s of n)s.findHostDirectiveDefs!==null&&(o??=[],i??=new Map,r??=new Map,Mv(s,o,r,i)),s===e&&(o??=[],o.push(s));return o!==null?(o.push(...e===null?n:n.slice(1)),[o,i,r]):null}function Mv(n,e,t,o){let i=e.length;n.findHostDirectiveDefs(n,e,o),t.set(n,[i,e.length-1])}function Iv(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Tv(n,e,t,o,i,r,s){let a=o.length,l=!1;for(let C=0;C<a;C++){let g=o[C];!l&&Ht(g)&&(l=!0,Iv(n,t,C)),Oa(Cr(t,e),n,g.type)}Rv(t,n.data.length,a);for(let C=0;C<a;C++){let g=o[C];g.providersResolver&&g.providersResolver(g)}let d=!1,f=!1,h=Af(n,e,a,null);a>0&&(t.directiveToIndex=new Map);for(let C=0;C<a;C++){let g=o[C];if(t.mergedAttrs=$o(t.mergedAttrs,g.hostAttrs),Av(n,t,e,h,g),kv(h,g,i),s!==null&&s.has(g)){let[P,W]=s.get(g);t.directiveToIndex.set(g.type,[h,P+t.directiveStart,W+t.directiveStart])}else(r===null||!r.has(g))&&t.directiveToIndex.set(g.type,h);g.contentQueries!==null&&(t.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(t.flags|=64);let w=g.type.prototype;!d&&(w.ngOnChanges||w.ngOnInit||w.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),d=!0),!f&&(w.ngOnChanges||w.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),f=!0),h++}Ov(n,t,r)}function Ov(n,e,t){for(let o=e.directiveStart;o<e.directiveEnd;o++){let i=n.data[o];if(t===null||!t.has(i))qu(0,e,i,o),qu(1,e,i,o),Ku(e,o,!1);else{let r=t.get(i);Wu(0,e,r,o),Wu(1,e,r,o),Ku(e,o,!0)}}}function qu(n,e,t,o){let i=n===0?t.inputs:t.outputs;for(let r in i)if(i.hasOwnProperty(r)){let s;n===0?s=e.inputs??={}:s=e.outputs??={},s[r]??=[],s[r].push(o),ep(e,r)}}function Wu(n,e,t,o){let i=n===0?t.inputs:t.outputs;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r],a;n===0?a=e.hostDirectiveInputs??={}:a=e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(o,r),ep(e,s)}}function ep(n,e){e==="class"?n.flags|=8:e==="style"&&(n.flags|=16)}function Ku(n,e,t){let{attrs:o,inputs:i,hostDirectiveInputs:r}=n;if(o===null||!t&&i===null||t&&r===null||$l(n)){n.initialInputs??=[],n.initialInputs.push(null);return}let s=null,a=0;for(;a<o.length;){let l=o[a];if(l===0){a+=4;continue}else if(l===5){a+=2;continue}else if(typeof l=="number")break;if(!t&&i.hasOwnProperty(l)){let d=i[l];for(let f of d)if(f===e){s??=[],s.push(l,o[a+1]);break}}else if(t&&r.hasOwnProperty(l)){let d=r[l];for(let f=0;f<d.length;f+=2)if(d[f]===e){s??=[],s.push(d[f+1],o[a+1]);break}}a+=2}n.initialInputs??=[],n.initialInputs.push(s)}function Av(n,e,t,o,i){n.data[o]=i;let r=i.factory||(i.factory=In(i.type,!0)),s=new kn(r,Ht(i),me);n.blueprint[o]=s,t[o]=s,Nv(n,e,o,Af(n,t,i.hostVars,lt),i)}function Nv(n,e,t,o,i){let r=i.hostBindings;if(r){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Pv(s)!=a&&s.push(a),s.push(t,o,r)}}function Pv(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function kv(n,e,t){if(t){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)t[e.exportAs[o]]=n;Ht(e)&&(t[""]=n)}}function Rv(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function tp(n,e,t,o,i,r,s,a){let l=e.consts,d=io(l,s),f=ec(e,n,2,o,d);return r&&Xf(e,t,f,io(l,a),i),f.mergedAttrs=$o(f.mergedAttrs,f.attrs),f.attrs!==null&&Gu(f,f.attrs,!1),f.mergedAttrs!==null&&Gu(f,f.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,f),f}function np(n,e){qd(n,e),xd(e)&&n.queries.elementEnd(e)}var qa=class extends tc{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Vo(e);return new Er(t,this.ngModule)}};function Fv(n){return Object.keys(n).map(e=>{let[t,o,i]=n[e],r={propName:t,templateName:e,isSignal:(o&$r.SignalBased)!==0};return i&&(r.transform=i),r})}function Vv(n){return Object.keys(n).map(e=>({propName:n[e],templateName:e}))}function Lv(n,e,t){let o=e instanceof pn?e:e?.injector;return o&&n.getStandaloneInjector!==null&&(o=n.getStandaloneInjector(o)||o),o?new Ga(t,o):t}function jv(n){let e=n.get(so,null);if(e===null)throw new X(407,!1);let t=n.get(Dv,null),o=n.get(Uo,null);return{rendererFactory:e,sanitizer:t,changeDetectionScheduler:o}}function Bv(n,e){let t=(n.selectors[0][0]||"div").toLowerCase();return Ef(e,t,t==="svg"?Id:t==="math"?Kh:null)}var Er=class extends Jf{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Fv(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Vv(this.componentDef.outputs),this.cachedOutputs}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=by(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!t}create(e,t,o,i){ye(22);let r=q(null);try{let s=this.componentDef,a=o?["ng-version","19.2.18"]:wy(this.componentDef.selectors[0]),l=Hl(0,null,null,1,0,null,null,null,null,[a],null),d=Lv(s,i||this.ngModule,e),f=jv(d),h=f.rendererFactory.createRenderer(null,s),C=o?Sy(h,o,s.encapsulation,d):Bv(s,h),g=Ul(null,l,null,512|Of(s),null,null,f,h,d,null,bf(C,d,!0));g[Ze]=C,Ml(g);let w=null;try{let P=tp(Ze,l,g,"#host",()=>[this.componentDef],!0,0);C&&(Mf(h,C,P),Xo(C,g)),Gl(l,g,P),xf(l,P,g),np(l,P),t!==void 0&&$v(P,this.ngContentSelectors,t),w=zt(P.index,g),g[Ve]=w[Ve],Wl(l,g,null)}catch(P){throw w!==null&&Va(w),Va(g),P}finally{ye(23),Il()}return new Wa(this.componentType,g)}finally{q(r)}}},Wa=class extends wv{_rootLView;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,t){super(),this._rootLView=t,this._tNode=bl(t[B],Ze),this.location=mo(this._tNode,t),this.instance=zt(this._tNode.index,t)[Ve],this.hostView=this.changeDetectorRef=new qo(t,void 0,!1),this.componentType=e}setInput(e,t){let o=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView,r=ql(o,i[B],i,e,t);this.previousInputValues.set(e,t);let s=zt(o.index,i);Jl(s,1)}get injector(){return new Mn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function $v(n,e,t){let o=n.projection=[];for(let i=0;i<e.length;i++){let r=t[i];o.push(r!=null&&r.length?Array.from(r):null)}}var qr=(()=>{class n{static __NG_ELEMENT_ID__=Hv}return n})();function Hv(){let n=_t();return ip(n,te())}var Uv=qr,op=class extends Uv{_lContainer;_hostTNode;_hostLView;constructor(e,t,o){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=o}get element(){return mo(this._hostTNode,this._hostLView)}get injector(){return new Mn(this._hostTNode,this._hostLView)}get parentInjector(){let e=kl(this._hostTNode,this._hostLView);if(Kd(e)){let t=vr(e,this._hostLView),o=yr(e),i=t[B].data[o+8];return new Mn(i,t)}else return new Mn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Yu(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-Ke}createEmbeddedView(e,t,o){let i,r;typeof o=="number"?i=o:o!=null&&(i=o.index,r=o.injector);let s=Ko(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},r,s);return this.insertImpl(a,i,zo(this._hostTNode,s)),a}createComponent(e,t,o,i,r){let s=e&&!zh(e),a;if(s)a=t;else{let w=t||{};a=w.index,o=w.injector,i=w.projectableNodes,r=w.environmentInjector||w.ngModuleRef}let l=s?e:new Er(Vo(e)),d=o||this.parentInjector;if(!r&&l.ngModule==null){let P=(s?d:this.parentInjector).get(pn,null);P&&(r=P)}let f=Vo(l.componentType??{}),h=Ko(this._lContainer,f?.id??null),C=h?.firstChild??null,g=l.create(d,i,C,r);return this.insertImpl(g.hostView,a,zo(this._hostTNode,h)),g}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,o){let i=e._lView;if(Qh(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Ye],d=new op(l,l[Nt],l[Ye]);d.detach(d.indexOf(e))}}let r=this._adjustIndex(t),s=this._lContainer;return Gr(s,i,r,o),e.attachToViewContainerRef(),pd(da(s),r,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Yu(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),o=Go(this._lContainer,t);o&&(ur(da(this._lContainer),t),Ur(o[B],o))}detach(e){let t=this._adjustIndex(e,-1),o=Go(this._lContainer,t);return o&&ur(da(this._lContainer),t)!=null?new qo(o):null}_adjustIndex(e,t=0){return e??this.length+t}};function Yu(n){return n[hr]}function da(n){return n[hr]||(n[hr]=[])}function ip(n,e){let t,o=e[n.index];return rn(o)?t=o:(t=Kf(o,e,null,n),e[n.index]=t,zl(e,t)),Gv(t,e,n,o),new op(t,n,e)}function zv(n,e){let t=n[Ae],o=t.createComment(""),i=qt(e,n),r=t.parentNode(i);return xr(t,r,o,t.nextSibling(i),!1),o}var Gv=Kv,qv=()=>!1;function Wv(n,e,t){return qv(n,e,t)}function Kv(n,e,t,o){if(n[An])return;let i;t.type&8?i=Ut(o):i=zv(e,t),n[An]=i}var Ka=class n{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new n(this.queryList)}setDirty(){this.queryList.setDirty()}},Ya=class n{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let t=e.queries;if(t!==null){let o=e.contentQueries!==null?e.contentQueries[0]:t.length,i=[];for(let r=0;r<o;r++){let s=t.getByIndex(r),a=this.queries[s.indexInDeclarationView];i.push(a.clone())}return new n(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)nc(e,t).matches!==null&&this.queries[t].setDirty()}},Za=class{flags;read;predicate;constructor(e,t,o=null){this.flags=t,this.read=o,typeof e=="string"?this.predicate=n_(e):this.predicate=e}},Qa=class n{queries;constructor(e=[]){this.queries=e}elementStart(e,t){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let o=0;o<this.length;o++){let i=t!==null?t.length:0,r=this.getByIndex(o).embeddedTView(e,i);r&&(r.indexInDeclarationView=o,t!==null?t.push(r):t=[r])}return t!==null?new n(t):null}template(e,t){for(let o=0;o<this.queries.length;o++)this.queries[o].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},Ja=class n{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,t=-1){this.metadata=e,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new n(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let t=this._declarationNodeIndex,o=e.parent;for(;o!==null&&o.type&8&&o.index!==t;)o=o.parent;return t===(o!==null?o.index:-1)}return this._appliesToNextNode}matchTNode(e,t){let o=this.metadata.predicate;if(Array.isArray(o))for(let i=0;i<o.length;i++){let r=o[i];this.matchTNodeWithReadOption(e,t,Yv(t,r)),this.matchTNodeWithReadOption(e,t,ir(t,e,r,!1,!1))}else o===Wo?t.type&4&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ir(t,e,o,!1,!1))}matchTNodeWithReadOption(e,t,o){if(o!==null){let i=this.metadata.read;if(i!==null)if(i===Ct||i===qr||i===Wo&&t.type&4)this.addMatch(t.index,-2);else{let r=ir(t,e,i,!1,!1);r!==null&&this.addMatch(t.index,r)}else this.addMatch(t.index,o)}}addMatch(e,t){this.matches===null?this.matches=[e,t]:this.matches.push(e,t)}};function Yv(n,e){let t=n.localNames;if(t!==null){for(let o=0;o<t.length;o+=2)if(t[o]===e)return t[o+1]}return null}function Zv(n,e){return n.type&11?mo(n,e):n.type&4?Xl(n,e):null}function Qv(n,e,t,o){return t===-1?Zv(e,n):t===-2?Jv(n,e,o):Ho(n,n[B],t,e)}function Jv(n,e,t){if(t===Ct)return mo(e,n);if(t===Wo)return Xl(e,n);if(t===qr)return ip(e,n)}function rp(n,e,t,o){let i=e[en].queries[o];if(i.matches===null){let r=n.data,s=t.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let d=s[l];if(d<0)a.push(null);else{let f=r[d];a.push(Qv(e,f,s[l+1],t.metadata.read))}}i.matches=a}return i.matches}function Xa(n,e,t,o){let i=n.queries.getByIndex(t),r=i.matches;if(r!==null){let s=rp(n,e,i,t);for(let a=0;a<r.length;a+=2){let l=r[a];if(l>0)o.push(s[a/2]);else{let d=r[a+1],f=e[-l];for(let h=Ke;h<f.length;h++){let C=f[h];C[On]===C[Ye]&&Xa(C[B],C,d,o)}if(f[oo]!==null){let h=f[oo];for(let C=0;C<h.length;C++){let g=h[C];Xa(g[B],g,d,o)}}}}}return o}function Xv(n,e){return n[en].queries[e].queryList}function e_(n,e,t){let o=new Fa((t&4)===4);return eg(n,e,o,o.destroy),(e[en]??=new Ya).queries.push(new Ka(o))-1}function t_(n,e,t){let o=He();return o.firstCreatePass&&(o_(o,new Za(n,e,t),-1),(e&2)===2&&(o.staticViewQueries=!0)),e_(o,te(),e)}function n_(n){return n.split(",").map(e=>e.trim())}function o_(n,e,t){n.queries===null&&(n.queries=new Qa),n.queries.track(new Ja(e,t))}function nc(n,e){return n.queries.getByIndex(e)}function i_(n,e){let t=n[B],o=nc(t,e);return o.crossesNgTemplate?Xa(t,n,e,[]):rp(t,n,o,e)}var Sr=class{};var Mr=class extends Sr{injector;componentFactoryResolver=new qa(this);instance=null;constructor(e){super();let t=new Lo([...e.providers,{provide:Sr,useValue:this},{provide:tc,useValue:this.componentFactoryResolver}],e.parent||_l(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function r_(n,e,t=null){return new Mr({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}var s_=(()=>{class n{_injector;cachedInjectors=new Map;constructor(t){this._injector=t}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let o=gd(!1,t.type),i=o.length>0?r_([o],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=Me({token:n,providedIn:"environment",factory:()=>new n(ge(pn))})}return n})();function we(n){return Nr(()=>{let e=sp(n),t=H(I({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===pf.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(s_).getOrCreateStandaloneInjector(t):null,getExternalStyles:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gt.Emulated,styles:n.styles||at,_:null,schemas:n.schemas||null,tView:null,id:""});e.standalone&&Bl("NgStandalone"),ap(t);let o=n.dependencies;return t.directiveDefs=Zu(o,!1),t.pipeDefs=Zu(o,!0),t.id=d_(t),t})}function a_(n){return Vo(n)||Ah(n)}function l_(n){return n!==null}function go(n){return Nr(()=>({type:n.type,bootstrap:n.bootstrap||at,declarations:n.declarations||at,imports:n.imports||at,exports:n.exports||at,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function c_(n,e){if(n==null)return Tn;let t={};for(let o in n)if(n.hasOwnProperty(o)){let i=n[o],r,s,a,l;Array.isArray(i)?(a=i[0],r=i[1],s=i[2]??r,l=i[3]||null):(r=i,s=i,a=$r.None,l=null),t[r]=[o,a,l],e[r]=s}return t}function u_(n){if(n==null)return Tn;let e={};for(let t in n)n.hasOwnProperty(t)&&(e[n[t]]=t);return e}function Qe(n){return Nr(()=>{let e=sp(n);return ap(e),e})}function oc(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone??!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function sp(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputConfig:n.inputs||Tn,exportAs:n.exportAs||null,standalone:n.standalone??!0,signals:n.signals===!0,selectors:n.selectors||at,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:c_(n.inputs,e),outputs:u_(n.outputs),debugInfo:null}}function ap(n){n.features?.forEach(e=>e(n))}function Zu(n,e){if(!n)return null;let t=e?Nh:a_;return()=>(typeof n=="function"?n():n).map(o=>t(o)).filter(l_)}function d_(n){let e=0,t=typeof n.consts=="function"?"":n.consts,o=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,t,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery];for(let r of o.join("|"))e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function f_(n){return Object.getPrototypeOf(n.prototype).constructor}function bt(n){let e=f_(n.type),t=!0,o=[n];for(;e;){let i;if(Ht(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new X(903,!1);i=e.\u0275dir}if(i){if(t){o.push(i);let s=n;s.inputs=fa(n.inputs),s.declaredInputs=fa(n.declaredInputs),s.outputs=fa(n.outputs);let a=i.hostBindings;a&&y_(n,a);let l=i.viewQuery,d=i.contentQueries;if(l&&h_(n,l),d&&g_(n,d),p_(n,i),uh(n.outputs,i.outputs),Ht(i)&&i.data.animation){let f=n.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let r=i.features;if(r)for(let s=0;s<r.length;s++){let a=r[s];a&&a.ngInherit&&a(n),a===bt&&(t=!1)}}e=Object.getPrototypeOf(e)}m_(o)}function p_(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let o=e.inputs[t];o!==void 0&&(n.inputs[t]=o,n.declaredInputs[t]=e.declaredInputs[t])}}function m_(n){let e=0,t=null;for(let o=n.length-1;o>=0;o--){let i=n[o];i.hostVars=e+=i.hostVars,i.hostAttrs=$o(i.hostAttrs,t=$o(t,i.hostAttrs))}}function fa(n){return n===Tn?{}:n===at?[]:n}function h_(n,e){let t=n.viewQuery;t?n.viewQuery=(o,i)=>{e(o,i),t(o,i)}:n.viewQuery=e}function g_(n,e){let t=n.contentQueries;t?n.contentQueries=(o,i,r)=>{e(o,i,r),t(o,i,r)}:n.contentQueries=e}function y_(n,e){let t=n.hostBindings;t?n.hostBindings=(o,i)=>{e(o,i),t(o,i)}:n.hostBindings=e}function lp(n,e,t){return n[e]=t}function Ot(n,e,t){let o=n[e];return Object.is(o,t)?!1:(n[e]=t,!0)}function ic(n,e,t,o){let i=Ot(n,e,t);return Ot(n,e+1,o)||i}function cp(n,e,t,o,i){let r=ic(n,e,t,o);return Ot(n,e+2,i)||r}function v_(n,e,t,o,i,r,s,a,l){let d=e.consts,f=ec(e,n,4,s||null,a||null);Pd()&&Xf(e,t,f,io(d,l),Ff),f.mergedAttrs=$o(f.mergedAttrs,f.attrs),qd(e,f);let h=f.tView=Hl(2,f,o,i,r,e.directiveRegistry,e.pipeRegistry,null,e.schemas,d,null);return e.queries!==null&&(e.queries.template(e,f),h.queries=e.queries.embeddedTView(f)),f}function el(n,e,t,o,i,r,s,a,l,d){let f=t+Ze,h=e.firstCreatePass?v_(f,e,n,o,i,r,s,a,l):e.data[f];Jo(h,!1);let C=__(e,n,h,t);Nl()&&Zl(e,n,C,h),Xo(C,n);let g=Kf(C,n,C,h);return n[f]=g,zl(n,g),Wv(g,h,n),Cl(h)&&Gl(e,n,h),l!=null&&kf(n,h,d),h}function A(n,e,t,o,i,r,s,a){let l=te(),d=He(),f=io(d.consts,r);return el(l,d,n,e,t,o,i,f,s,a),A}var __=C_;function C_(n,e,t,o){return Pl(!0),e[Ae].createComment("")}var up=new Y("");var b_=(()=>{class n{static \u0275prov=Me({token:n,providedIn:"root",factory:()=>new tl})}return n})(),tl=class{queuedEffectCount=0;queues=new Map;schedule(e){this.enqueue(e)}remove(e){let t=e.zone,o=this.queues.get(t);o.has(e)&&(o.delete(e),this.queuedEffectCount--)}enqueue(e){let t=e.zone;this.queues.has(t)||this.queues.set(t,new Set);let o=this.queues.get(t);o.has(e)||(this.queuedEffectCount++,o.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,t]of this.queues)e===null?this.flushQueue(t):e.run(()=>this.flushQueue(t))}flushQueue(e){for(let t of e)e.delete(t),this.queuedEffectCount--,t.run()}};function ti(n){return!!n&&typeof n.then=="function"}function dp(n){return!!n&&typeof n.subscribe=="function"}var w_=new Y("");var fp=(()=>{class n{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((t,o)=>{this.resolve=t,this.reject=o});appInits=pe(w_,{optional:!0})??[];injector=pe(ro);constructor(){}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let r=Cd(this.injector,i);if(ti(r))t.push(r);else if(dp(r)){let s=new Promise((a,l)=>{r.subscribe({complete:a,error:l})});t.push(s)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{o()}).catch(i=>{this.reject(i)}),t.length===0&&o(),this.initialized=!0}static \u0275fac=function(o){return new(o||n)};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),x_=new Y("");function D_(){Hs(()=>{throw new X(600,!1)})}function E_(n){return n.isBoundToModule}var S_=10;var Yo=(()=>{class n{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=pe(Ug);afterRenderManager=pe(oy);zonelessEnabled=pe(sf);rootEffectScheduler=pe(b_);dirtyFlags=0;tracingSnapshot=null;externalTestViews=new Set;afterTick=new jt;get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];isStable=pe(jr).hasPendingTasks.pipe(Dn(t=>!t));constructor(){pe(Br,{optional:!0})}whenStable(){let t;return new Promise(o=>{t=this.isStable.subscribe({next:i=>{i&&o()}})}).finally(()=>{t.unsubscribe()})}_injector=pe(pn);_rendererFactory=null;get injector(){return this._injector}bootstrap(t,o){return this.bootstrapImpl(t,o)}bootstrapImpl(t,o,i=ro.NULL){ye(10);let r=t instanceof Jf;if(!this._injector.get(fp).done){let g="";throw new X(405,g)}let a;r?a=t:a=this._injector.get(tc).resolveComponentFactory(t),this.componentTypes.push(a.componentType);let l=E_(a)?void 0:this._injector.get(Sr),d=o||a.selector,f=a.create(i,[],d,l),h=f.location.nativeElement,C=f.injector.get(up,null);return C?.registerApplication(h),f.onDestroy(()=>{this.detachView(f.hostView),rr(this.components,f),C?.unregisterApplication(h)}),this._loadComponent(f),ye(11,f),f}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ye(12),this.tracingSnapshot!==null?this.tracingSnapshot.run(Cf.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw new X(101,!1);let t=q(null);try{this._runningTick=!0,this.synchronize()}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,q(t),this.afterTick.next(),ye(13)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(so,null,{optional:!0}));let t=0;for(;this.dirtyFlags!==0&&t++<S_;)ye(14),this.synchronizeOnce(),ye(15)}synchronizeOnce(){if(this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush()),this.dirtyFlags&7){let t=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o,notifyErrorHandler:i}of this.allViews)M_(o,i,t,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}else this._rendererFactory?.begin?.(),this._rendererFactory?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Fr(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let o=t;this._views.push(o),o.attachToAppRef(this)}detachView(t){let o=t;rr(this._views,o),o.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(x_,[]).forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>rr(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new X(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(o){return new(o||n)};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function rr(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function M_(n,e,t,o){if(!t&&!Fr(n))return;zf(n,e,t&&!o?0:1)}function ni(n,e,t,o){let i=te(),r=po();if(Ot(i,r,e)){let s=He(),a=Tl();ky(a,i,n,e,t,o)}return ni}function I_(n,e,t,o){return Ot(n,po(),t)?e+un(t)+o:lt}function T_(n,e,t,o,i,r){let s=Ld(),a=ic(n,s,t,i);return Lr(2),a?e+un(t)+o+un(i)+r:lt}function O_(n,e,t,o,i,r,s,a){let l=Ld(),d=cp(n,l,t,i,s);return Lr(3),d?e+un(t)+o+un(i)+r+un(s)+a:lt}function er(n,e){return n<<17|e<<2}function Rn(n){return n>>17&32767}function A_(n){return(n&2)==2}function N_(n,e){return n&131071|e<<17}function nl(n){return n|2}function ao(n){return(n&131068)>>2}function pa(n,e){return n&-131069|e<<2}function P_(n){return(n&1)===1}function ol(n){return n|1}function k_(n,e,t,o,i,r){let s=r?e.classBindings:e.styleBindings,a=Rn(s),l=ao(s);n[o]=t;let d=!1,f;if(Array.isArray(t)){let h=t;f=h[1],(f===null||Qo(h,f)>0)&&(d=!0)}else f=t;if(i)if(l!==0){let C=Rn(n[a+1]);n[o+1]=er(C,a),C!==0&&(n[C+1]=pa(n[C+1],o)),n[a+1]=N_(n[a+1],o)}else n[o+1]=er(a,0),a!==0&&(n[a+1]=pa(n[a+1],o)),a=o;else n[o+1]=er(l,0),a===0?a=o:n[l+1]=pa(n[l+1],o),l=o;d&&(n[o+1]=nl(n[o+1])),Qu(n,f,o,!0),Qu(n,f,o,!1),R_(e,f,n,o,r),s=er(a,l),r?e.classBindings=s:e.styleBindings=s}function R_(n,e,t,o,i){let r=i?n.residualClasses:n.residualStyles;r!=null&&typeof e=="string"&&Qo(r,e)>=0&&(t[o+1]=ol(t[o+1]))}function Qu(n,e,t,o){let i=n[t+1],r=e===null,s=o?Rn(i):ao(i),a=!1;for(;s!==0&&(a===!1||r);){let l=n[s],d=n[s+1];F_(l,e)&&(a=!0,n[s+1]=o?ol(d):nl(d)),s=o?Rn(d):ao(d)}a&&(n[t+1]=o?nl(i):ol(i))}function F_(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Qo(n,e)>=0:!1}var Mt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function V_(n){return n.substring(Mt.key,Mt.keyEnd)}function L_(n){return j_(n),pp(n,mp(n,0,Mt.textEnd))}function pp(n,e){let t=Mt.textEnd;return t===e?-1:(e=Mt.keyEnd=B_(n,Mt.key=e,t),mp(n,e,t))}function j_(n){Mt.key=0,Mt.keyEnd=0,Mt.value=0,Mt.valueEnd=0,Mt.textEnd=n.length}function mp(n,e,t){for(;e<t&&n.charCodeAt(e)<=32;)e++;return e}function B_(n,e,t){for(;e<t&&n.charCodeAt(e)>32;)e++;return e}function T(n,e,t){let o=te(),i=po();if(Ot(o,i,e)){let r=He(),s=Tl();Rf(r,s,o,n,e,o[Ae],t,!1)}return T}function il(n,e,t,o,i){ql(e,n,t,i?"class":"style",o)}function sn(n,e,t){return hp(n,e,t,!1),sn}function re(n,e){return hp(n,e,null,!0),re}function Fn(n){H_(K_,$_,n,!0)}function $_(n,e){for(let t=L_(e);t>=0;t=pp(e,t))yl(n,V_(e),!0)}function hp(n,e,t,o){let i=te(),r=He(),s=Lr(2);if(r.firstUpdatePass&&yp(r,n,s,o),e!==lt&&Ot(i,s,e)){let a=r.data[Wt()];vp(r,a,i,i[Ae],n,i[s+1]=Z_(e,t),o,s)}}function H_(n,e,t,o){let i=He(),r=Lr(2);i.firstUpdatePass&&yp(i,null,r,o);let s=te();if(t!==lt&&Ot(s,r,t)){let a=i.data[Wt()];if(_p(a,o)&&!gp(i,r)){let l=o?a.classesWithoutHost:a.stylesWithoutHost;l!==null&&(t=_a(l,t||"")),il(i,a,s,t,o)}else Y_(i,a,s,s[Ae],s[r+1],s[r+1]=W_(n,e,t),o,r)}}function gp(n,e){return e>=n.expandoStartIndex}function yp(n,e,t,o){let i=n.data;if(i[t+1]===null){let r=i[Wt()],s=gp(n,t);_p(r,o)&&e===null&&!s&&(e=!1),e=U_(i,r,e,o),k_(i,r,e,t,s,o)}}function U_(n,e,t,o){let i=mg(n),r=o?e.residualClasses:e.residualStyles;if(i===null)(o?e.classBindings:e.styleBindings)===0&&(t=ma(null,n,e,t,o),t=Zo(t,e.attrs,o),r=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=ma(i,n,e,t,o),r===null){let l=z_(n,e,o);l!==void 0&&Array.isArray(l)&&(l=ma(null,n,e,l[1],o),l=Zo(l,e.attrs,o),G_(n,e,o,l))}else r=q_(n,e,o)}return r!==void 0&&(o?e.residualClasses=r:e.residualStyles=r),t}function z_(n,e,t){let o=t?e.classBindings:e.styleBindings;if(ao(o)!==0)return n[Rn(o)]}function G_(n,e,t,o){let i=t?e.classBindings:e.styleBindings;n[Rn(i)]=o}function q_(n,e,t){let o,i=e.directiveEnd;for(let r=1+e.directiveStylingLast;r<i;r++){let s=n[r].hostAttrs;o=Zo(o,s,t)}return Zo(o,e.attrs,t)}function ma(n,e,t,o,i){let r=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(r=e[a],o=Zo(o,r.hostAttrs,i),r!==n);)a++;return n!==null&&(t.directiveStylingLast=a),o}function Zo(n,e,t){let o=t?1:2,i=-1;if(e!==null)for(let r=0;r<e.length;r++){let s=e[r];typeof s=="number"?i=s:i===o&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),yl(n,s,t?!0:e[++r]))}return n===void 0?null:n}function W_(n,e,t){if(t==null||t==="")return at;let o=[],i=Df(t);if(Array.isArray(i))for(let r=0;r<i.length;r++)n(o,i[r],!0);else if(typeof i=="object")for(let r in i)i.hasOwnProperty(r)&&n(o,r,i[r]);else typeof i=="string"&&e(o,i);return o}function K_(n,e,t){let o=String(e);o!==""&&!o.includes(" ")&&yl(n,o,t)}function Y_(n,e,t,o,i,r,s,a){i===lt&&(i=at);let l=0,d=0,f=0<i.length?i[0]:null,h=0<r.length?r[0]:null;for(;f!==null||h!==null;){let C=l<i.length?i[l+1]:void 0,g=d<r.length?r[d+1]:void 0,w=null,P;f===h?(l+=2,d+=2,C!==g&&(w=h,P=g)):h===null||f!==null&&f<h?(l+=2,w=f):(d+=2,w=h,P=g),w!==null&&vp(n,e,t,o,w,P,s,a),f=l<i.length?i[l]:null,h=d<r.length?r[d]:null}}function vp(n,e,t,o,i,r,s,a){if(!(e.type&3))return;let l=n.data,d=l[a+1],f=P_(d)?Ju(l,e,t,i,ao(d),s):void 0;if(!Ir(f)){Ir(r)||A_(d)&&(r=Ju(l,null,t,i,a,s));let h=Td(Wt(),t);ev(o,s,h,i,r)}}function Ju(n,e,t,o,i,r){let s=e===null,a;for(;i>0;){let l=n[i],d=Array.isArray(l),f=d?l[1]:l,h=f===null,C=t[i+1];C===lt&&(C=h?at:void 0);let g=h?oa(C,o):f===o?C:void 0;if(d&&!Ir(g)&&(g=oa(l,o)),Ir(g)&&(a=g,s))return a;let w=n[i+1];i=s?Rn(w):ao(w)}if(e!==null){let l=r?e.residualClasses:e.residualStyles;l!=null&&(a=oa(l,o))}return a}function Ir(n){return n!==void 0}function Z_(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=yt(Df(n)))),n}function _p(n,e){return(n.flags&(e?8:16))!==0}var rl=class{destroy(e){}updateValue(e,t){}swap(e,t){let o=Math.min(e,t),i=Math.max(e,t),r=this.detach(i);if(i-o>1){let s=this.detach(o);this.attach(o,r),this.attach(i,s)}else this.attach(o,r)}move(e,t){this.attach(t,this.detach(e))}};function ha(n,e,t,o,i){return n===t&&Object.is(e,o)?1:Object.is(i(n,e),i(t,o))?-1:0}function Q_(n,e,t){let o,i,r=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;r<=s&&r<=l;){let d=n.at(r),f=e[r],h=ha(r,d,r,f,t);if(h!==0){h<0&&n.updateValue(r,f),r++;continue}let C=n.at(s),g=e[l],w=ha(s,C,l,g,t);if(w!==0){w<0&&n.updateValue(s,g),s--,l--;continue}let P=t(r,d),W=t(s,C),z=t(r,f);if(Object.is(z,W)){let tt=t(l,g);Object.is(tt,P)?(n.swap(r,s),n.updateValue(s,g),l--,s--):n.move(s,r),n.updateValue(r,f),r++;continue}if(o??=new Tr,i??=ed(n,r,s,t),sl(n,o,r,z))n.updateValue(r,f),r++,s++;else if(i.has(z))o.set(P,n.detach(r)),s--;else{let tt=n.create(r,e[r]);n.attach(r,tt),r++,s++}}for(;r<=l;)Xu(n,o,t,r,e[r]),r++}else if(e!=null){let l=e[Symbol.iterator](),d=l.next();for(;!d.done&&r<=s;){let f=n.at(r),h=d.value,C=ha(r,f,r,h,t);if(C!==0)C<0&&n.updateValue(r,h),r++,d=l.next();else{o??=new Tr,i??=ed(n,r,s,t);let g=t(r,h);if(sl(n,o,r,g))n.updateValue(r,h),r++,s++,d=l.next();else if(!i.has(g))n.attach(r,n.create(r,h)),r++,s++,d=l.next();else{let w=t(r,f);o.set(w,n.detach(r)),s--}}}for(;!d.done;)Xu(n,o,t,n.length,d.value),d=l.next()}for(;r<=s;)n.destroy(n.detach(s--));o?.forEach(l=>{n.destroy(l)})}function sl(n,e,t,o){return e!==void 0&&e.has(o)?(n.attach(t,e.get(o)),e.delete(o),!0):!1}function Xu(n,e,t,o,i){if(sl(n,e,o,t(o,i)))n.updateValue(o,i);else{let r=n.create(o,i);n.attach(o,r)}}function ed(n,e,t,o){let i=new Set;for(let r=e;r<=t;r++)i.add(o(r,n.at(r)));return i}var Tr=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let o=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(o);)o=i.get(o);i.set(o,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,o]of this.kvMap)if(e(o,t),this._vMap!==void 0){let i=this._vMap;for(;i.has(o);)o=i.get(o),e(o,t)}}};function M(n,e){Bl("NgControlFlow");let t=te(),o=po(),i=t[o]!==lt?t[o]:-1,r=i!==-1?Or(t,Ze+i):void 0,s=0;if(Ot(t,o,n)){let a=q(null);try{if(r!==void 0&&Zf(r,s),n!==-1){let l=Ze+n,d=Or(t,l),f=ul(t[B],l),h=Ko(d,f.tView.ssrId),C=Hr(t,f,e,{dehydratedView:h});Gr(d,C,s,zo(f,h))}}finally{q(a)}}else if(r!==void 0){let a=Yf(r,s);a!==void 0&&(a[Ve]=e)}}var al=class{lContainer;$implicit;$index;constructor(e,t,o){this.lContainer=e,this.$implicit=t,this.$index=o}get $count(){return this.lContainer.length-Ke}};function Pt(n){return n}function gn(n,e){return e}var ll=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,t,o){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=o}};function se(n,e,t,o,i,r,s,a,l,d,f,h,C){Bl("NgControlFlow");let g=te(),w=He(),P=l!==void 0,W=te(),z=a?s.bind(W[Tt][Ve]):s,tt=new ll(P,z);W[Ze+n]=tt,el(g,w,n+1,e,t,o,i,io(w.consts,r)),P&&el(g,w,n+2,l,d,f,h,io(w.consts,C))}var cl=class extends rl{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,t,o){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=o}get length(){return this.lContainer.length-Ke}at(e){return this.getLView(e)[Ve].$implicit}attach(e,t){let o=t[jo];this.needsIndexUpdate||=e!==this.length,Gr(this.lContainer,t,e,zo(this.templateTNode,o))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,J_(this.lContainer,e)}create(e,t){let o=Ko(this.lContainer,this.templateTNode.tView.ssrId),i=Hr(this.hostLView,this.templateTNode,new al(this.lContainer,t,e),{dehydratedView:o});return this.operationsCounter?.recordCreate(),i}destroy(e){Ur(e[B],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Ve].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Ve].$index=e}getLView(e){return X_(this.lContainer,e)}};function ae(n){let e=q(null),t=Wt();try{let o=te(),i=o[B],r=o[t],s=t+1,a=Or(o,s);if(r.liveCollection===void 0){let d=ul(i,s);r.liveCollection=new cl(a,o,d)}else r.liveCollection.reset();let l=r.liveCollection;if(Q_(l,n,r.trackByFn),l.updateIndexes(),r.hasEmptyBlock){let d=po(),f=l.length===0;if(Ot(o,d,f)){let h=t+2,C=Or(o,h);if(f){let g=ul(i,h),w=Ko(C,g.tView.ssrId),P=Hr(o,g,void 0,{dehydratedView:w});Gr(C,P,0,zo(g,w))}else Zf(C,0)}}}finally{q(e)}}function Or(n,e){return n[e]}function J_(n,e){return Go(n,e)}function X_(n,e){return Yf(n,e)}function ul(n,e){return bl(n,e)}function u(n,e,t,o){let i=te(),r=He(),s=Ze+n,a=i[Ae],l=r.firstCreatePass?tp(s,r,i,e,Ff,Pd(),t,o):r.data[s],d=e0(r,i,l,a,e,n);i[s]=d;let f=Cl(l);return Jo(l,!0),Mf(a,d,l),!Vf(l)&&Nl()&&Zl(r,i,d,l),(tg()===0||f)&&Xo(d,i),ng(),f&&(Gl(r,i,l),xf(r,l,i)),o!==null&&kf(i,l),u}function c(){let n=_t();Rd()?lg():(n=n.parent,Jo(n,!1));let e=n;rg(e)&&sg(),og();let t=He();return t.firstCreatePass&&np(t,e),e.classesWithoutHost!=null&&bg(e)&&il(t,e,te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&wg(e)&&il(t,e,te(),e.stylesWithoutHost,!1),c}function it(n,e,t,o){return u(n,e,t,o),c(),it}var e0=(n,e,t,o,i,r)=>(Pl(!0),Ef(o,i,vg()));function R(){return te()}var En=void 0;function t0(n){let e=Math.floor(Math.abs(n)),t=n.toString().replace(/^[^.]*\.?/,"").length;return e===1&&t===0?1:5}var n0=["en",[["a","p"],["AM","PM"],En],[["AM","PM"],En,En],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],En,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],En,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",En,"{1} 'at' {0}",En],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",t0],ga={};function rc(n){let e=o0(n),t=td(e);if(t)return t;let o=e.split("-")[0];if(t=td(o),t)return t;if(o==="en")return n0;throw new X(701,!1)}function td(n){return n in ga||(ga[n]=Po.ng&&Po.ng.common&&Po.ng.common.locales&&Po.ng.common.locales[n]),ga[n]}var yo=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(yo||{});function o0(n){return n.toLowerCase().replace(/_/g,"-")}var Ar="en-US";var i0=Ar;function r0(n){typeof n=="string"&&(i0=n.toLowerCase().replace(/_/g,"-"))}function nd(n,e,t){return function o(i){if(i===Function)return t;let r=uo(n)?zt(n.index,e):e;Jl(r,5);let s=e[Ve],a=od(e,s,t,i),l=o.__ngNextListenerFn__;for(;l;)a=od(e,s,l,i)&&a,l=l.__ngNextListenerFn__;return a}}function od(n,e,t,o){let i=q(null);try{return ye(6,e,t),t(o)!==!1}catch(r){return s0(n,r),!1}finally{ye(7,e,t),q(i)}}function s0(n,e){let t=n[no],o=t?t.get(tn,null):null;o&&o.handleError(e)}function id(n,e,t,o,i,r){let s=e[t],a=e[B],d=a.data[t].outputs[o],f=s[d],h=a.firstCreatePass?El(a):null,C=Dl(e),g=f.subscribe(r),w=C.length;C.push(r,g),h&&h.push(i,n.index,w,-(w+1))}function b(n,e,t,o){let i=te(),r=He(),s=_t();return Cp(r,i,i[Ae],s,n,e,o),b}function a0(n,e,t,o){let i=n.cleanup;if(i!=null)for(let r=0;r<i.length-1;r+=2){let s=i[r];if(s===t&&i[r+1]===o){let a=e[pr],l=i[r+2];return a.length>l?a[l]:null}typeof s=="string"&&(r+=2)}return null}function Cp(n,e,t,o,i,r,s){let a=Cl(o),d=n.firstCreatePass?El(n):null,f=Dl(e),h=!0;if(o.type&3||s){let C=qt(o,e),g=s?s(C):C,w=f.length,P=s?z=>s(Ut(z[o.index])):o.index,W=null;if(!s&&a&&(W=a0(n,e,i,o.index)),W!==null){let z=W.__ngLastListenerFn__||W;z.__ngNextListenerFn__=r,W.__ngLastListenerFn__=r,h=!1}else{r=nd(o,e,r),ry(e,g,i,r);let z=t.listen(g,i,r);f.push(r,z),d&&d.push(i,P,w,w+1)}}else r=nd(o,e,r);if(h){let C=o.outputs?.[i],g=o.hostDirectiveOutputs?.[i];if(g&&g.length)for(let w=0;w<g.length;w+=2){let P=g[w],W=g[w+1];id(o,e,P,W,i,r)}if(C&&C.length)for(let w of C)id(o,e,w,i,i,r)}}function y(n=1){return gg(n)}function Wr(n,e,t){t_(n,e,t)}function Kr(n){let e=te(),t=He(),o=jd();Sl(o+1);let i=nc(t,o);if(n.dirty&&Zh(e)===((i.metadata.flags&2)===2)){if(i.matches===null)n.reset([]);else{let r=i_(e,o);n.reset(r,Gg),n.notifyOnChanges()}return!0}return!1}function Yr(){return Xv(te(),jd())}function bp(n){let e=cg();return wl(e,Ze+n)}function p(n,e=""){let t=te(),o=He(),i=n+Ze,r=o.firstCreatePass?ec(o,i,1,e,null):o.data[i],s=l0(o,t,r,e,n);t[i]=s,Nl()&&Zl(o,t,s,r),Jo(r,!1)}var l0=(n,e,t,o,i)=>(Pl(!0),ay(e[Ae],o));function V(n){return ne("",n,""),V}function ne(n,e,t){let o=te(),i=I_(o,n,e,t);return i!==lt&&ac(o,Wt(),i),ne}function yn(n,e,t,o,i){let r=te(),s=T_(r,n,e,t,o,i);return s!==lt&&ac(r,Wt(),s),yn}function sc(n,e,t,o,i,r,s){let a=te(),l=O_(a,n,e,t,o,i,r,s);return l!==lt&&ac(a,Wt(),l),sc}function ac(n,e,t){let o=Td(e,n);ly(n[Ae],o,t)}function ct(n,e,t){df(e)&&(e=e());let o=te(),i=po();if(Ot(o,i,e)){let r=He(),s=Tl();Rf(r,s,o,n,e,o[Ae],t,!1)}return ct}function ft(n,e){let t=df(n);return t&&n.set(e),t}function ut(n,e){let t=te(),o=He(),i=_t();return Cp(o,t,t[Ae],i,n,e),ut}function c0(n,e,t){let o=He();if(o.firstCreatePass){let i=Ht(n);dl(t,o.data,o.blueprint,i,!0),dl(e,o.data,o.blueprint,i,!1)}}function dl(n,e,t,o,i){if(n=ot(n),Array.isArray(n))for(let r=0;r<n.length;r++)dl(n[r],e,t,o,i);else{let r=He(),s=te(),a=_t(),l=to(n)?n:ot(n.provide),d=_d(n),f=a.providerIndexes&1048575,h=a.directiveStart,C=a.providerIndexes>>20;if(to(n)||!n.multi){let g=new kn(d,i,me),w=va(l,e,i?f:f+C,h);w===-1?(Oa(Cr(a,s),r,l),ya(r,n,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(g),s.push(g)):(t[w]=g,s[w]=g)}else{let g=va(l,e,f+C,h),w=va(l,e,f,f+C),P=g>=0&&t[g],W=w>=0&&t[w];if(i&&!W||!i&&!P){Oa(Cr(a,s),r,l);let z=f0(i?d0:u0,t.length,i,o,d);!i&&W&&(t[w].providerFactory=z),ya(r,n,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(z),s.push(z)}else{let z=wp(t[i?w:g],d,!i&&o);ya(r,n,g>-1?g:w,z)}!i&&o&&W&&t[w].componentProviders++}}}function ya(n,e,t,o){let i=to(e),r=Vh(e);if(i||r){let l=(r?ot(e.useClass):e).prototype.ngOnDestroy;if(l){let d=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let f=d.indexOf(t);f===-1?d.push(t,[o,l]):d[f+1].push(o,l)}else d.push(t,l)}}}function wp(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function va(n,e,t,o){for(let i=t;i<o;i++)if(e[i]===n)return i;return-1}function u0(n,e,t,o,i){return fl(this.multi,[])}function d0(n,e,t,o,i){let r=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,l=Ho(o,o[B],this.providerFactory.index,i);s=l.slice(0,a),fl(r,s);for(let d=a;d<l.length;d++)s.push(l[d])}else s=[],fl(r,s);return s}function fl(n,e){for(let t=0;t<n.length;t++){let o=n[t];e.push(o())}return e}function f0(n,e,t,o,i){let r=new kn(n,t,me);return r.multi=[],r.index=e,r.componentProviders=0,wp(r,i,o&&!t),r}function an(n,e=[]){return t=>{t.providersResolver=(o,i)=>c0(o,i?i(n):n,e)}}function xp(n,e){let t=n[e];return t===lt?void 0:t}function p0(n,e,t,o,i,r,s){let a=e+t;return ic(n,a,i,r)?lp(n,a+2,s?o.call(s,i,r):o(i,r)):xp(n,a+2)}function m0(n,e,t,o,i,r,s,a){let l=e+t;return cp(n,l,i,r,s)?lp(n,l+3,a?o.call(a,i,r,s):o(i,r,s)):xp(n,l+3)}function Zr(n,e){let t=He(),o,i=n+Ze;t.firstCreatePass?(o=h0(e,t.pipeRegistry),t.data[i]=o,o.onDestroy&&(t.destroyHooks??=[]).push(i,o.onDestroy)):o=t.data[i];let r=o.factory||(o.factory=In(o.type,!0)),s,a=st(me);try{let l=_r(!1),d=r();return _r(l),Yh(t,te(),i,d),d}finally{st(a)}}function h0(n,e){if(e)for(let t=e.length-1;t>=0;t--){let o=e[t];if(n===o.name)return o}}function Dp(n,e,t,o){let i=n+Ze,r=te(),s=wl(r,i);return Sp(r,i)?p0(r,Vd(),e,s.transform,t,o,s):s.transform(t,o)}function Ep(n,e,t,o,i){let r=n+Ze,s=te(),a=wl(s,r);return Sp(s,r)?m0(s,Vd(),e,a.transform,t,o,i,a):a.transform(t,o,i)}function Sp(n,e){return n[B].data[e].pure}var g0=(()=>{class n{zone=pe(ze);changeDetectionScheduler=pe(Uo);applicationRef=pe(Yo);_onMicrotaskEmptySubscription;initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static \u0275fac=function(o){return new(o||n)};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function y0({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ze(H(I({},v0()),{scheduleInRootZone:t})),[{provide:ze,useFactory:n},{provide:dr,multi:!0,useFactory:()=>{let o=pe(g0,{optional:!0});return()=>o.initialize()}},{provide:dr,multi:!0,useFactory:()=>{let o=pe(_0);return()=>{o.initialize()}}},e===!0?{provide:af,useValue:!0}:[],{provide:lf,useValue:t??of}]}function v0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var _0=(()=>{class n{subscription=new nt;initialized=!1;zone=pe(ze);pendingTasks=pe(jr);initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ze.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ze.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(o){return new(o||n)};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var C0=(()=>{class n{appRef=pe(Yo);taskService=pe(jr);ngZone=pe(ze);zonelessEnabled=pe(sf);tracing=pe(Br,{optional:!0});disableScheduling=pe(af,{optional:!0})??!1;zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new nt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(wr):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(pe(lf,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Ra||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;let o=!1;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2,o=!0;break}case 12:{this.appRef.dirtyFlags|=16,o=!0;break}case 13:{this.appRef.dirtyFlags|=2,o=!0;break}case 11:{o=!0;break}case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick(o))return;let i=this.useMicrotaskScheduler?Vu:cf;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>i(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>i(()=>this.tick()))}shouldScheduleTick(t){return!(this.disableScheduling&&!t||this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(wr+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(t),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Vu(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static \u0275fac=function(o){return new(o||n)};static \u0275prov=Me({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function b0(){return typeof $localize<"u"&&$localize.locale||Ar}var Qr=new Y("",{providedIn:"root",factory:()=>pe(Qr,K.Optional|K.SkipSelf)||b0()});var pl=new Y(""),w0=new Y("");function No(n){return!n.moduleRef}function x0(n){let e=No(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ze);return t.run(()=>{No(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let o=e.get(tn,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:r=>{o.handleError(r)}})}),No(n)){let r=()=>e.destroy(),s=n.platformInjector.get(pl);s.add(r),e.onDestroy(()=>{i.unsubscribe(),s.delete(r)})}else{let r=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pl);s.add(r),n.moduleRef.onDestroy(()=>{rr(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(r)})}return E0(o,t,()=>{let r=e.get(fp);return r.runInitializers(),r.donePromise.then(()=>{let s=e.get(Qr,Ar);if(r0(s||Ar),!e.get(w0,!0))return No(n)?e.get(Yo):(n.allPlatformModules.push(n.moduleRef),n.moduleRef);if(No(n)){let l=e.get(Yo);return n.rootComponent!==void 0&&l.bootstrap(n.rootComponent),l}else return D0(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function D0(n,e){let t=n.injector.get(Yo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>t.bootstrap(o));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new X(-403,!1);e.push(n)}function E0(n,e,t){try{let o=t();return ti(o)?o.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):o}catch(o){throw e.runOutsideAngular(()=>n.handleError(o)),o}}var sr=null;function S0(n=[],e){return ro.create({name:e,providers:[{provide:kr,useValue:"platform"},{provide:pl,useValue:new Set([()=>sr=null])},...n]})}function M0(n=[]){if(sr)return sr;let e=S0(n);return sr=e,D_(),I0(e),e}function I0(n){let e=n.get(Ll,null);Cd(n,()=>{e?.forEach(t=>t())})}var lc=(()=>{class n{static __NG_ELEMENT_ID__=T0}return n})();function T0(n){return O0(_t(),te(),(n&16)===16)}function O0(n,e,t){if(uo(n)&&!t){let o=zt(n.index,e);return new qo(o,o)}else if(n.type&175){let o=e[Tt];return new qo(o,e)}return null}function Mp(n){let{rootComponent:e,appProviders:t,platformProviders:o,platformRef:i}=n;ye(8);try{let r=i?.injector??M0(o),s=[y0({}),{provide:Uo,useExisting:C0},...t||[]],a=new Mr({providers:s,parent:r,debugName:"",runEnvironmentInitializers:!1});return x0({r3Injector:a.injector,platformInjector:r,rootComponent:e})}catch(r){return Promise.reject(r)}finally{ye(9)}}function Ip(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function vn(n){return qs(n)}function le(n,e){return $s(n,e?.equal)}var rd=class{[Dt];constructor(e){this[Dt]=e}destroy(){this[Dt].destroy()}};var Kt=new Y("");var Tp=null;function _n(){return Tp}function cc(n){Tp??=n}var oi=class{};var fc=function(n){return n[n.Decimal=0]="Decimal",n[n.Percent=1]="Percent",n[n.Currency=2]="Currency",n[n.Scientific=3]="Scientific",n}(fc||{});var Yt={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function vo(n,e){let t=rc(n),o=t[yo.NumberSymbols][e];if(typeof o>"u"){if(e===Yt.CurrencyDecimal)return t[yo.NumberSymbols][Yt.Decimal];if(e===Yt.CurrencyGroup)return t[yo.NumberSymbols][Yt.Group]}return o}function Ap(n,e){return rc(n)[yo.NumberFormats][e]}var A0=/^(\d+)?\.((\d+)(-(\d+))?)?$/,Op=22,Jr=".",ii="0",N0=";",P0=",",uc="#";function k0(n,e,t,o,i,r,s=!1){let a="",l=!1;if(!isFinite(n))a=vo(t,Yt.Infinity);else{let d=V0(n);s&&(d=F0(d));let f=e.minInt,h=e.minFrac,C=e.maxFrac;if(r){let tt=r.match(A0);if(tt===null)throw new Error(`${r} is not a valid digit info`);let Bn=tt[1],pt=tt[3],fe=tt[5];Bn!=null&&(f=dc(Bn)),pt!=null&&(h=dc(pt)),fe!=null?C=dc(fe):pt!=null&&h>C&&(C=h)}L0(d,h,C);let g=d.digits,w=d.integerLen,P=d.exponent,W=[];for(l=g.every(tt=>!tt);w<f;w++)g.unshift(0);for(;w<0;w++)g.unshift(0);w>0?W=g.splice(w,g.length):(W=g,g=[0]);let z=[];for(g.length>=e.lgSize&&z.unshift(g.splice(-e.lgSize,g.length).join(""));g.length>e.gSize;)z.unshift(g.splice(-e.gSize,g.length).join(""));g.length&&z.unshift(g.join("")),a=z.join(vo(t,o)),W.length&&(a+=vo(t,i)+W.join("")),P&&(a+=vo(t,Yt.Exponential)+"+"+P)}return n<0&&!l?a=e.negPre+a+e.negSuf:a=e.posPre+a+e.posSuf,a}function Np(n,e,t){let o=Ap(e,fc.Decimal),i=R0(o,vo(e,Yt.MinusSign));return k0(n,i,e,Yt.Group,Yt.Decimal,t)}function R0(n,e="-"){let t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},o=n.split(N0),i=o[0],r=o[1],s=i.indexOf(Jr)!==-1?i.split(Jr):[i.substring(0,i.lastIndexOf(ii)+1),i.substring(i.lastIndexOf(ii)+1)],a=s[0],l=s[1]||"";t.posPre=a.substring(0,a.indexOf(uc));for(let f=0;f<l.length;f++){let h=l.charAt(f);h===ii?t.minFrac=t.maxFrac=f+1:h===uc?t.maxFrac=f+1:t.posSuf+=h}let d=a.split(P0);if(t.gSize=d[1]?d[1].length:0,t.lgSize=d[2]||d[1]?(d[2]||d[1]).length:0,r){let f=i.length-t.posPre.length-t.posSuf.length,h=r.indexOf(uc);t.negPre=r.substring(0,h).replace(/'/g,""),t.negSuf=r.slice(h+f).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}function F0(n){if(n.digits[0]===0)return n;let e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(e===0?n.digits.push(0,0):e===1&&n.digits.push(0),n.integerLen+=2),n}function V0(n){let e=Math.abs(n)+"",t=0,o,i,r,s,a;for((i=e.indexOf(Jr))>-1&&(e=e.replace(Jr,"")),(r=e.search(/e/i))>0?(i<0&&(i=r),i+=+e.slice(r+1),e=e.substring(0,r)):i<0&&(i=e.length),r=0;e.charAt(r)===ii;r++);if(r===(a=e.length))o=[0],i=1;else{for(a--;e.charAt(a)===ii;)a--;for(i-=r,o=[],s=0;r<=a;r++,s++)o[s]=Number(e.charAt(r))}return i>Op&&(o=o.splice(0,Op-1),t=i-1,i=1),{digits:o,exponent:t,integerLen:i}}function L0(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let o=n.digits,i=o.length-n.integerLen,r=Math.min(Math.max(e,i),t),s=r+n.integerLen,a=o[s];if(s>0){o.splice(Math.max(n.integerLen,s));for(let h=s;h<o.length;h++)o[h]=0}else{i=Math.max(0,i),n.integerLen=1,o.length=Math.max(1,s=r+1),o[0]=0;for(let h=1;h<s;h++)o[h]=0}if(a>=5)if(s-1<0){for(let h=0;h>s;h--)o.unshift(0),n.integerLen++;o.unshift(1),n.integerLen++}else o[s-1]++;for(;i<Math.max(0,r);i++)o.push(0);let l=r!==0,d=e+n.integerLen,f=o.reduceRight(function(h,C,g,w){return C=C+h,w[g]=C<10?C:C-10,l&&(w[g]===0&&g>=d?w.pop():l=!1),C>=10?1:0},0);f&&(o.unshift(f),n.integerLen++)}function dc(n){let e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}function Pp(n,e){return new X(2100,!1)}var pc=(()=>{class n{_locale;constructor(t){this._locale=t}transform(t,o,i){if(!j0(t))return null;i||=this._locale;try{let r=B0(t);return Np(r,i,o)}catch(r){throw Pp(n,r.message)}}static \u0275fac=function(o){return new(o||n)(me(Qr,16))};static \u0275pipe=oc({name:"number",type:n,pure:!0})}return n})();function j0(n){return!(n==null||n===""||n!==n)}function B0(n){if(typeof n=="string"&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if(typeof n!="number")throw new Error(`${n} is not a number`);return n}var mc=(()=>{class n{transform(t,o,i){if(t==null)return null;if(!(typeof t=="string"||Array.isArray(t)))throw Pp(n,t);return t.slice(o,i)}static \u0275fac=function(o){return new(o||n)};static \u0275pipe=oc({name:"slice",type:n,pure:!1})}return n})();var xe=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=go({type:n});static \u0275inj=lo({})}return n})();function hc(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let o=t.indexOf("="),[i,r]=o==-1?[t,""]:[t.slice(0,o),t.slice(o+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}var gc="browser",kp="server";function Xr(n){return n===kp}var ri=class{};var ns=new Y(""),Cc=(()=>{class n{_zone;_plugins;_eventNameToPlugin=new Map;constructor(t,o){this._zone=o,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,o,i,r){return this._findPluginFor(o).addEventListener(t,o,i,r)}getZone(){return this._zone}_findPluginFor(t){let o=this._eventNameToPlugin.get(t);if(o)return o;if(o=this._plugins.find(r=>r.supports(t)),!o)throw new X(5101,!1);return this._eventNameToPlugin.set(t,o),o}static \u0275fac=function(o){return new(o||n)(ge(ns),ge(ze))};static \u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),si=class{_doc;constructor(e){this._doc=e}manager},es="ng-app-id";function Fp(n){for(let e of n)e.remove()}function Vp(n,e){let t=e.createElement("style");return t.textContent=n,t}function H0(n,e,t,o){let i=n.head?.querySelectorAll(`style[${es}="${e}"],link[${es}="${e}"]`);if(i)for(let r of i)r.removeAttribute(es),r instanceof HTMLLinkElement?o.set(r.href.slice(r.href.lastIndexOf("/")+1),{usage:0,elements:[r]}):r.textContent&&t.set(r.textContent,{usage:0,elements:[r]})}function vc(n,e){let t=e.createElement("link");return t.setAttribute("rel","stylesheet"),t.setAttribute("href",n),t}var bc=(()=>{class n{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;isServer;constructor(t,o,i,r={}){this.doc=t,this.appId=o,this.nonce=i,this.isServer=Xr(r),H0(t,o,this.inline,this.external),this.hosts.add(t.head)}addStyles(t,o){for(let i of t)this.addUsage(i,this.inline,Vp);o?.forEach(i=>this.addUsage(i,this.external,vc))}removeStyles(t,o){for(let i of t)this.removeUsage(i,this.inline);o?.forEach(i=>this.removeUsage(i,this.external))}addUsage(t,o,i){let r=o.get(t);r?r.usage++:o.set(t,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(t,this.doc)))})}removeUsage(t,o){let i=o.get(t);i&&(i.usage--,i.usage<=0&&(Fp(i.elements),o.delete(t)))}ngOnDestroy(){for(let[,{elements:t}]of[...this.inline,...this.external])Fp(t);this.hosts.clear()}addHost(t){this.hosts.add(t);for(let[o,{elements:i}]of this.inline)i.push(this.addElement(t,Vp(o,this.doc)));for(let[o,{elements:i}]of this.external)i.push(this.addElement(t,vc(o,this.doc)))}removeHost(t){this.hosts.delete(t)}addElement(t,o){return this.nonce&&o.setAttribute("nonce",this.nonce),this.isServer&&o.setAttribute(es,this.appId),t.appendChild(o)}static \u0275fac=function(o){return new(o||n)(ge(Kt),ge(Vl),ge(jl,8),ge(ei))};static \u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),yc={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},wc=/%COMP%/g;var jp="%COMP%",U0=`_nghost-${jp}`,z0=`_ngcontent-${jp}`,G0=!0,q0=new Y("",{providedIn:"root",factory:()=>G0});function W0(n){return z0.replace(wc,n)}function K0(n){return U0.replace(wc,n)}function Bp(n,e){return e.map(t=>t.replace(wc,n))}var xc=(()=>{class n{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;platformId;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(t,o,i,r,s,a,l,d=null,f=null){this.eventManager=t,this.sharedStylesHost=o,this.appId=i,this.removeStylesOnCompDestroy=r,this.doc=s,this.platformId=a,this.ngZone=l,this.nonce=d,this.tracingService=f,this.platformIsServer=Xr(a),this.defaultRenderer=new ai(t,s,l,this.platformIsServer,this.tracingService)}createRenderer(t,o){if(!t||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Gt.ShadowDom&&(o=H(I({},o),{encapsulation:Gt.Emulated}));let i=this.getOrCreateRenderer(t,o);return i instanceof ts?i.applyToHost(t):i instanceof li&&i.applyStyles(),i}getOrCreateRenderer(t,o){let i=this.rendererByCompId,r=i.get(o.id);if(!r){let s=this.doc,a=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,h=this.platformIsServer,C=this.tracingService;switch(o.encapsulation){case Gt.Emulated:r=new ts(l,d,o,this.appId,f,s,a,h,C);break;case Gt.ShadowDom:return new _c(l,d,t,o,s,a,this.nonce,h,C);default:r=new li(l,d,o,f,s,a,h,C);break}i.set(o.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(t){this.rendererByCompId.delete(t)}static \u0275fac=function(o){return new(o||n)(ge(Cc),ge(bc),ge(Vl),ge(q0),ge(Kt),ge(ei),ge(ze),ge(jl),ge(Br,8))};static \u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),ai=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,t,o,i,r){this.eventManager=e,this.doc=t,this.ngZone=o,this.platformIsServer=i,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,t){return t?this.doc.createElementNS(yc[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Lp(e)?e.content:e).appendChild(t)}insertBefore(e,t,o){e&&(Lp(e)?e.content:e).insertBefore(t,o)}removeChild(e,t){t.remove()}selectRootElement(e,t){let o=typeof e=="string"?this.doc.querySelector(e):e;if(!o)throw new X(-5104,!1);return t||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,o,i){if(i){t=i+":"+t;let r=yc[i];r?e.setAttributeNS(r,t,o):e.setAttribute(t,o)}else e.setAttribute(t,o)}removeAttribute(e,t,o){if(o){let i=yc[o];i?e.removeAttributeNS(i,t):e.removeAttribute(`${o}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,o,i){i&(nn.DashCase|nn.Important)?e.style.setProperty(t,o,i&nn.Important?"important":""):e.style[t]=o}removeStyle(e,t,o){o&nn.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,o){e!=null&&(e[t]=o)}setValue(e,t){e.nodeValue=t}listen(e,t,o,i){if(typeof e=="string"&&(e=_n().getGlobalEventTarget(this.doc,e),!e))throw new X(5102,!1);let r=this.decoratePreventDefault(o);return this.tracingService?.wrapEventListener&&(r=this.tracingService.wrapEventListener(e,t,r)),this.eventManager.addEventListener(e,t,r,i)}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Lp(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var _c=class extends ai{sharedStylesHost;hostEl;shadowRoot;constructor(e,t,o,i,r,s,a,l,d){super(e,r,s,l,d),this.sharedStylesHost=t,this.hostEl=o,this.shadowRoot=o.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let f=i.styles;f=Bp(i.id,f);for(let C of f){let g=document.createElement("style");a&&g.setAttribute("nonce",a),g.textContent=C,this.shadowRoot.appendChild(g)}let h=i.getExternalStyles?.();if(h)for(let C of h){let g=vc(C,r);a&&g.setAttribute("nonce",a),this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,o){return super.insertBefore(this.nodeOrShadowRoot(e),t,o)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},li=class extends ai{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,t,o,i,r,s,a,l,d){super(e,r,s,a,l),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i;let f=o.styles;this.styles=d?Bp(d,f):f,this.styleUrls=o.getExternalStyles?.(d)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ts=class extends li{contentAttr;hostAttr;constructor(e,t,o,i,r,s,a,l,d){let f=i+"-"+o.id;super(e,t,o,r,s,a,l,d,f),this.contentAttr=W0(f),this.hostAttr=K0(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let o=super.createElement(e,t);return super.setAttribute(o,this.contentAttr,""),o}};var os=class n extends oi{supportsDOMEvents=!0;static makeCurrent(){cc(new n)}onAndCancel(e,t,o,i){return e.addEventListener(t,o,i),()=>{e.removeEventListener(t,o,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=Y0();return t==null?null:Z0(t)}resetBaseElement(){ci=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return hc(document.cookie,e)}},ci=null;function Y0(){return ci=ci||document.head.querySelector("base"),ci?ci.getAttribute("href"):null}function Z0(n){return new URL(n,document.baseURI).pathname}var Q0=(()=>{class n{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||n)};static \u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),Hp=(()=>{class n extends si{constructor(t){super(t)}supports(t){return!0}addEventListener(t,o,i,r){return t.addEventListener(o,i,r),()=>this.removeEventListener(t,o,i,r)}removeEventListener(t,o,i,r){return t.removeEventListener(o,i,r)}static \u0275fac=function(o){return new(o||n)(ge(Kt))};static \u0275prov=Me({token:n,factory:n.\u0275fac})}return n})(),$p=["alt","control","meta","shift"],J0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},X0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Up=(()=>{class n extends si{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,o,i,r){let s=n.parseEventName(o),a=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>_n().onAndCancel(t,s.domEventName,a,r))}static parseEventName(t){let o=t.toLowerCase().split("."),i=o.shift();if(o.length===0||!(i==="keydown"||i==="keyup"))return null;let r=n._normalizeKey(o.pop()),s="",a=o.indexOf("code");if(a>-1&&(o.splice(a,1),s="code."),$p.forEach(d=>{let f=o.indexOf(d);f>-1&&(o.splice(f,1),s+=d+".")}),s+=r,o.length!=0||r.length===0)return null;let l={};return l.domEventName=i,l.fullKey=s,l}static matchEventFullKeyCode(t,o){let i=J0[t.key]||t.key,r="";return o.indexOf("code.")>-1&&(i=t.code,r="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),$p.forEach(s=>{if(s!==i){let a=X0[s];a(t)&&(r+=s+".")}}),r+=i,r===o)}static eventCallback(t,o,i){return r=>{n.matchEventFullKeyCode(r,t)&&i.runGuarded(()=>o(r))}}static _normalizeKey(t){return t==="esc"?"escape":t}static \u0275fac=function(o){return new(o||n)(ge(Kt))};static \u0275prov=Me({token:n,factory:n.\u0275fac})}return n})();function Dc(n,e,t){return Mp(I({rootComponent:n,platformRef:t?.platformRef},eC(e)))}function eC(n){return{appProviders:[...rC,...n?.providers??[]],platformProviders:iC}}function tC(){os.makeCurrent()}function nC(){return new tn}function oC(){return vf(document),document}var iC=[{provide:ei,useValue:gc},{provide:Ll,useValue:tC,multi:!0},{provide:Kt,useFactory:oC}];var rC=[{provide:kr,useValue:"root"},{provide:tn,useFactory:nC},{provide:ns,useClass:Hp,multi:!0,deps:[Kt]},{provide:ns,useClass:Up,multi:!0,deps:[Kt]},xc,bc,Cc,{provide:so,useExisting:xc},{provide:ri,useClass:Q0},[]];var Xp=(()=>{class n{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,o){this._renderer=t,this._elementRef=o}setProperty(t,o){this._renderer.setProperty(this._elementRef.nativeElement,t,o)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(o){return new(o||n)(me(ho),me(Ct))};static \u0275dir=Qe({type:n})}return n})(),ls=(()=>{class n extends Xp{static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,features:[bt]})}return n})(),hi=new Y("");var sC={provide:hi,useExisting:At(()=>Ie),multi:!0};function aC(){let n=_n()?_n().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var lC=new Y(""),Ie=(()=>{class n extends Xp{_compositionMode;_composing=!1;constructor(t,o,i){super(t,o),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!aC())}writeValue(t){let o=t??"";this.setProperty("value",o)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(o){return new(o||n)(me(ho),me(Ct),me(lC,8))};static \u0275dir=Qe({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,i){o&1&&b("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[an([sC]),bt]})}return n})();function cC(n){return n==null?null:Array.isArray(n)||typeof n=="string"?n.length:n instanceof Set?n.size:null}var cs=new Y(""),uC=new Y("");function dC(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}function fC(n){return e=>{if(e.value==null||n==null)return null;let t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}function pC(n){return e=>{let t=e.value?.length??cC(e.value);return t!==null&&t>n?{maxlength:{requiredLength:n,actualLength:t}}:null}}function zp(n){return null}function em(n){return n!=null}function tm(n){return ti(n)?ta(n):n}function nm(n){let e={};return n.forEach(t=>{e=t!=null?I(I({},e),t):e}),Object.keys(e).length===0?null:e}function om(n,e){return e.map(t=>t(n))}function mC(n){return!n.validate}function im(n){return n.map(e=>mC(e)?e:t=>e.validate(t))}function hC(n){if(!n)return null;let e=n.filter(em);return e.length==0?null:function(t){return nm(om(t,e))}}function rm(n){return n!=null?hC(im(n)):null}function gC(n){if(!n)return null;let e=n.filter(em);return e.length==0?null:function(t){let o=om(t,e).map(tm);return na(o).pipe(Dn(nm))}}function sm(n){return n!=null?gC(im(n)):null}function Gp(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function yC(n){return n._rawValidators}function vC(n){return n._rawAsyncValidators}function Ec(n){return n?Array.isArray(n)?n:[n]:[]}function rs(n,e){return Array.isArray(n)?n.includes(e):n===e}function qp(n,e){let t=Ec(e);return Ec(n).forEach(i=>{rs(t,i)||t.push(i)}),t}function Wp(n,e){return Ec(e).filter(t=>!rs(n,t))}var ss=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=sm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Sc=class extends ss{name;get formDirective(){return null}get path(){return null}},mi=class extends ss{_parent=null;name=null;valueAccessor=null},Mc=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},_C={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},wI=H(I({},_C),{"[class.ng-submitted]":"isSubmitted"}),Ne=(()=>{class n extends Mc{constructor(t){super(t)}static \u0275fac=function(o){return new(o||n)(me(mi,2))};static \u0275dir=Qe({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,i){o&2&&re("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[bt]})}return n})();var ui="VALID",is="INVALID",_o="PENDING",di="DISABLED",bo=class{},as=class extends bo{value;source;constructor(e,t){super(),this.value=e,this.source=t}},fi=class extends bo{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},pi=class extends bo{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},Co=class extends bo{status;source;constructor(e,t){super(),this.status=e,this.source=t}};function CC(n){return(us(n)?n.validators:n)||null}function bC(n){return Array.isArray(n)?rm(n):n||null}function wC(n,e){return(us(e)?e.asyncValidators:n)||null}function xC(n){return Array.isArray(n)?sm(n):n||null}function us(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var Ic=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return vn(this.statusReactive)}set status(e){vn(()=>this.statusReactive.set(e))}_status=le(()=>this.statusReactive());statusReactive=S(void 0);get valid(){return this.status===ui}get invalid(){return this.status===is}get pending(){return this.status==_o}get disabled(){return this.status===di}get enabled(){return this.status!==di}errors;get pristine(){return vn(this.pristineReactive)}set pristine(e){vn(()=>this.pristineReactive.set(e))}_pristine=le(()=>this.pristineReactive());pristineReactive=S(!0);get dirty(){return!this.pristine}get touched(){return vn(this.touchedReactive)}set touched(e){vn(()=>this.touchedReactive.set(e))}_touched=le(()=>this.touchedReactive());touchedReactive=S(!1);get untouched(){return!this.touched}_events=new jt;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(qp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(qp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wp(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wp(e,this._rawAsyncValidators))}hasValidator(e){return rs(this._rawValidators,e)}hasAsyncValidator(e){return rs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let o=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(H(I({},e),{sourceControl:o})),t&&e.emitEvent!==!1&&this._events.next(new pi(!0,o))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:o})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,o),t&&e.emitEvent!==!1&&this._events.next(new pi(!1,o))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let o=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(H(I({},e),{sourceControl:o})),t&&e.emitEvent!==!1&&this._events.next(new fi(!1,o))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,o),t&&e.emitEvent!==!1&&this._events.next(new fi(!0,o))}markAsPending(e={}){this.status=_o;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Co(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(H(I({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=di,this.errors=null,this._forEachChild(i=>{i.disable(H(I({},e),{onlySelf:!0}))}),this._updateValue();let o=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new as(this.value,o)),this._events.next(new Co(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(H(I({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ui,this._forEachChild(o=>{o.enable(H(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(H(I({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ui||this.status===_o)&&this._runAsyncValidator(o,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new as(this.value,t)),this._events.next(new Co(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(H(I({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?di:ui}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=_o,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let o=tm(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((o,i)=>o&&o._find(i),this)}getError(e,t){let o=t?this.get(t):this;return o&&o.errors?o.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,o){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||o)&&this._events.next(new Co(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,o)}_initObservables(){this.valueChanges=new L,this.statusChanges=new L}_calculateStatus(){return this._allControlsDisabled()?di:this.errors?is:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_o)?_o:this._anyControlsHaveStatus(is)?is:ui}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let o=!this._anyControlsDirty(),i=this.pristine!==o;this.pristine=o,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new fi(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new pi(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){us(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=bC(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=xC(this._rawAsyncValidators)}};var am=new Y("",{providedIn:"root",factory:()=>Tc}),Tc="always";function DC(n,e){return[...e.path,n]}function EC(n,e,t=Tc){MC(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),IC(n,e),OC(n,e),TC(n,e),SC(n,e)}function Kp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function SC(n,e){if(e.valueAccessor.setDisabledState){let t=o=>{e.valueAccessor.setDisabledState(o)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function MC(n,e){let t=yC(n);e.validator!==null?n.setValidators(Gp(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let o=vC(n);e.asyncValidator!==null?n.setAsyncValidators(Gp(o,e.asyncValidator)):typeof o=="function"&&n.setAsyncValidators([o]);let i=()=>n.updateValueAndValidity();Kp(e._rawValidators,i),Kp(e._rawAsyncValidators,i)}function IC(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&lm(n,e)})}function TC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&lm(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function lm(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function OC(n,e){let t=(o,i)=>{e.valueAccessor.writeValue(o),i&&e.viewToModelUpdate(o)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function AC(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function NC(n){return Object.getPrototypeOf(n.constructor)===ls}function PC(n,e){if(!e)return null;Array.isArray(e);let t,o,i;return e.forEach(r=>{r.constructor===Ie?t=r:NC(r)?o=r:i=r}),i||o||t||null}function Yp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Zp(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var kC=class extends Ic{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,o){super(CC(t),wC(o,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),us(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Zp(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Yp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Yp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Zp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var RC={provide:mi,useExisting:At(()=>Te)},Qp=Promise.resolve(),Te=(()=>{class n extends mi{_changeDetectorRef;callSetDisabledState;control=new kC;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new L;constructor(t,o,i,r,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=t,this._setValidators(o),this._setAsyncValidators(i),this.valueAccessor=PC(this,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let o=t.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),AC(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){EC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Qp.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let o=t.isDisabled.currentValue,i=o!==0&&Ip(o);Qp.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?DC(t,this._parent):[t]}static \u0275fac=function(o){return new(o||n)(me(Sc,9),me(cs,10),me(uC,10),me(hi,10),me(lc,8),me(am,8))};static \u0275dir=Qe({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[an([RC]),bt,$e]})}return n})();var FC={provide:hi,useExisting:At(()=>gi),multi:!0},gi=(()=>{class n extends ls{writeValue(t){let o=t??"";this.setProperty("value",o)}registerOnChange(t){this.onChange=o=>{t(o==""?null:parseFloat(o))}}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,i){o&1&&b("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[an([FC]),bt]})}return n})();var VC={provide:hi,useExisting:At(()=>wt),multi:!0};function cm(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function LC(n){return n.split(":")[0]}var wt=(()=>{class n extends ls{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let o=this._getOptionId(t),i=cm(o,t);this.setProperty("value",i)}registerOnChange(t){this.onChange=o=>{this.value=this._getOptionValue(o),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o),t))return o;return null}_getOptionValue(t){let o=LC(t);return this._optionMap.has(o)?this._optionMap.get(o):t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(o,i){o&1&&b("change",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[an([VC]),bt]})}return n})(),Xe=(()=>{class n{_element;_renderer;_select;id;constructor(t,o,i){this._element=t,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(cm(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||n)(me(Ct),me(ho),me(wt,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})(),jC={provide:hi,useExisting:At(()=>um),multi:!0};function Jp(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function BC(n){return n.split(":")[0]}var um=(()=>{class n extends ls{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let o;if(Array.isArray(t)){let i=t.map(r=>this._getOptionId(r));o=(r,s)=>{r._setSelected(i.indexOf(s.toString())>-1)}}else o=(i,r)=>{i._setSelected(!1)};this._optionMap.forEach(o)}registerOnChange(t){this.onChange=o=>{let i=[],r=o.selectedOptions;if(r!==void 0){let s=r;for(let a=0;a<s.length;a++){let l=s[a],d=this._getOptionValue(l.value);i.push(d)}}else{let s=o.options;for(let a=0;a<s.length;a++){let l=s[a];if(l.selected){let d=this._getOptionValue(l.value);i.push(d)}}}this.value=i,t(i)}}_registerOption(t){let o=(this._idCounter++).toString();return this._optionMap.set(o,t),o}_getOptionId(t){for(let o of this._optionMap.keys())if(this._compareWith(this._optionMap.get(o)._value,t))return o;return null}_getOptionValue(t){let o=BC(t);return this._optionMap.has(o)?this._optionMap.get(o)._value:t}static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(o,i){o&1&&b("change",function(s){return i.onChange(s.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[an([jC]),bt]})}return n})(),et=(()=>{class n{_element;_renderer;_select;id;_value;constructor(t,o,i){this._element=t,this._renderer=o,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Jp(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Jp(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(o){return new(o||n)(me(Ct),me(ho),me(um,9))};static \u0275dir=Qe({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return n})();function $C(n){return typeof n=="number"?n:parseInt(n,10)}function dm(n){return typeof n=="number"?n:parseFloat(n)}var Oc=(()=>{class n{_validator=zp;_onChange;_enabled;ngOnChanges(t){if(this.inputName in t){let o=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(o),this._validator=this._enabled?this.createValidator(o):zp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}static \u0275fac=function(o){return new(o||n)};static \u0275dir=Qe({type:n,features:[$e]})}return n})(),HC={provide:cs,useExisting:At(()=>yi),multi:!0},yi=(()=>{class n extends Oc{max;inputName="max";normalizeInput=t=>dm(t);createValidator=t=>fC(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&ni("max",i._enabled?i.max:null)},inputs:{max:"max"},standalone:!1,features:[an([HC]),bt]})}return n})(),UC={provide:cs,useExisting:At(()=>vi),multi:!0},vi=(()=>{class n extends Oc{min;inputName="min";normalizeInput=t=>dm(t);createValidator=t=>dC(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&ni("min",i._enabled?i.min:null)},inputs:{min:"min"},standalone:!1,features:[an([UC]),bt]})}return n})();var zC={provide:cs,useExisting:At(()=>Ac),multi:!0},Ac=(()=>{class n extends Oc{maxlength;inputName="maxlength";normalizeInput=t=>$C(t);createValidator=t=>pC(t);static \u0275fac=(()=>{let t;return function(i){return(t||(t=hn(n)))(i||n)}})();static \u0275dir=Qe({type:n,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(o,i){o&2&&ni("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[an([zC]),bt]})}return n})();var GC=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=go({type:n});static \u0275inj=lo({})}return n})();var De=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:am,useValue:t.callSetDisabledState??Tc}]}}static \u0275fac=function(o){return new(o||n)};static \u0275mod=go({type:n});static \u0275inj=lo({imports:[GC]})}return n})();function dt(n,e){for(let t of n.modifiers)if(qC(e,t.samples))return t.value;return n.value}function qC(n,e){let t=e.split(",");for(let o of t){let i=o.trim();if(i.includes("-")){let[r,s]=i.split("-").map(Number);if(n>=r&&n<=s)return!0}else if(n===Number(i))return!0}return!1}function fm(n){let e=n.toLowerCase().trim();return e==="source name"?"source_name":e.startsWith("characteristics[")?"characteristics":e.startsWith("comment[")?"comment":e.startsWith("factor value[")||e.startsWith("factorvalue[")?"factor_value":"special"}var ym=Am(pm());function mm(n=1){return{columns:[],sampleCount:n,pools:[],metadata:{loadedAt:new Date,modifiedAt:new Date}}}function kc(n){let e=[];for(let t=1;t<=n.sampleCount;t++){let o=[];for(let i of n.columns){let r=i.value;for(let s of i.modifiers)if(WC(t,s.samples)){r=s.value;break}o.push(r)}e.push(o)}return e}function WC(n,e){let t=e.split(",");for(let o of t){let i=o.trim();if(i.includes("-")){let[r,s]=i.split("-").map(Number);if(n>=r&&n<=s)return!0}else if(n===Number(i))return!0}return!1}var KC=[{name:"source name",type:"source_name",description:"Unique sample identifier",category:"Core Sample Metadata",isRequired:!0},{name:"characteristics[organism]",type:"characteristics",description:"Organism of the sample",category:"Characteristics",isRequired:!0,ontologies:["ncbitaxon"],examples:["Homo sapiens","Mus musculus"]},{name:"characteristics[disease]",type:"characteristics",description:"Disease under study",category:"Characteristics",isRequired:!0,ontologies:["efo","mondo","doid"],examples:["normal","breast cancer"]},{name:"characteristics[organism part]",type:"characteristics",description:"Part of organism anatomy",category:"Characteristics",isRequired:!0,ontologies:["uberon","bto"],examples:["liver","brain","blood"]},{name:"characteristics[cell type]",type:"characteristics",description:"Cell type",category:"Characteristics",ontologies:["cl","bto"],examples:["T cell","hepatocyte"]},{name:"characteristics[age]",type:"characteristics",description:"Age of the individual",category:"Characteristics",pattern:"^(\\d+Y)?(\\d+M)?(\\d+D)?(-\\d+Y(\\d+M)?(\\d+D)?)?$|^not available$|^not applicable$",examples:["30Y","30Y6M","25Y-35Y"]},{name:"characteristics[sex]",type:"characteristics",description:"Biological sex",category:"Characteristics",ontologies:["pato"],examples:["male","female"]},{name:"characteristics[ancestry category]",type:"characteristics",description:"Ancestry or ethnicity",category:"Characteristics",ontologies:["hancestro"]},{name:"characteristics[cell line]",type:"characteristics",description:"Cell line name",category:"Characteristics",ontologies:["clo","bto"],examples:["HeLa","HEK293"]},{name:"characteristics[enrichment process]",type:"characteristics",description:"Enrichment process applied",category:"Characteristics"},{name:"characteristics[pooled sample]",type:"characteristics",description:"Pooled sample indicator",category:"Characteristics",examples:["not pooled","pooled","SN=sample1,sample2"]},{name:"characteristics[spiked compound]",type:"characteristics",description:"Spiked compound details",category:"Characteristics",examples:["SP=iRT;CT=peptide;QY=1fmol"]},{name:"characteristics[synthetic peptide]",type:"characteristics",description:"Synthetic peptide indicator",category:"Characteristics",examples:["synthetic","not synthetic"]},{name:"characteristics[individual]",type:"characteristics",description:"Patient/individual identifier",category:"Characteristics"},{name:"characteristics[biological replicate]",type:"characteristics",description:"Biological replicate number",category:"Characteristics"},{name:"assay name",type:"special",description:"MS run identifier",category:"Assay Information",isRequired:!0},{name:"technology type",type:"special",description:"Technology used for data generation",category:"Assay Information",isRequired:!0,examples:["proteomic profiling by mass spectrometry"]},{name:"comment[fraction identifier]",type:"comment",description:"Fraction number",category:"Comments",examples:["1","2","3"]},{name:"comment[label]",type:"comment",description:"Label applied to sample",category:"Comments",isRequired:!0,ontologies:["ms","pride"],examples:["label free sample","TMT126","iTRAQ4plex-114"]},{name:"comment[data file]",type:"comment",description:"Raw data file name",category:"Comments",isRequired:!0,examples:["sample1.raw","sample1.mzML"]},{name:"comment[instrument]",type:"comment",description:"Mass spectrometer model",category:"Comments",isRequired:!0,ontologies:["ms"],examples:["Orbitrap Fusion Lumos","Q Exactive HF"]},{name:"comment[technical replicate]",type:"comment",description:"Technical replicate number",category:"Comments",examples:["1","2"]},{name:"comment[modification parameters]",type:"comment",description:"Protein modifications",category:"Modifications & Enzymes",isRequired:!0,ontologies:["unimod"],examples:["NT=Oxidation;MT=Variable;TA=M;AC=UNIMOD:35","NT=Carbamidomethyl;TA=C;MT=fixed;AC=UNIMOD:4"]},{name:"comment[cleavage agent details]",type:"comment",description:"Digestion enzyme information",category:"Modifications & Enzymes",isRequired:!0,ontologies:["ms"],examples:["NT=Trypsin;AC=MS:1001251","NT=Trypsin/P;AC=MS:1001313"]},{name:"comment[fragment mass tolerance]",type:"comment",description:"Fragment ion mass tolerance",category:"Mass Tolerances",pattern:"^\\d+(\\.\\d+)?\\s*(ppm|Da)$|^not available$|^not applicable$",examples:["20 ppm","0.02 Da"]},{name:"comment[precursor mass tolerance]",type:"comment",description:"Precursor ion mass tolerance",category:"Mass Tolerances",pattern:"^\\d+(\\.\\d+)?\\s*(ppm|Da)$|^not available$|^not applicable$",examples:["10 ppm","20 ppm"]},{name:"comment[collision energy]",type:"comment",description:"Collision energy used",category:"Technical Parameters",pattern:"^\\d+(\\.\\d+)?%? (NCE|eV)(;\\d+(\\.\\d+)?%? (NCE|eV))*$|^not available$",examples:["30 NCE","30% NCE","27 eV","25 NCE;27 NCE;30 NCE"]},{name:"comment[dissociation method]",type:"comment",description:"Fragmentation method",category:"Technical Parameters",ontologies:["ms","pride"],examples:["HCD","CID","ETD","EThcD"]},{name:"comment[proteomics data acquisition method]",type:"comment",description:"DDA, DIA, etc.",category:"Technical Parameters",ontologies:["ms"],examples:["Data-dependent acquisition","Data-independent acquisition"]},{name:"comment[scan window lower limit]",type:"comment",description:"Lower m/z limit of DIA scan window",category:"Technical Parameters",pattern:"^\\d+(\\.\\d+)?$",examples:["400","350.5"]},{name:"comment[scan window upper limit]",type:"comment",description:"Upper m/z limit of DIA scan window",category:"Technical Parameters",pattern:"^\\d+(\\.\\d+)?$",examples:["1200","1000.5"]},{name:"comment[isolation window width]",type:"comment",description:"Width of the isolation window in m/z units",category:"Technical Parameters",pattern:"^\\d+(\\.\\d+)?$",examples:["25","8","4"]},{name:"comment[MS2 mass analyzer]",type:"comment",description:"Mass analyzer used for MS2 acquisition",category:"Technical Parameters",ontologies:["ms"],examples:["orbitrap","ion trap","TOF"]},{name:"comment[depletion]",type:"comment",description:"Depletion method applied",category:"Sample Preparation"},{name:"comment[reduction reagent]",type:"comment",description:"Reduction reagent used",category:"Sample Preparation",examples:["DTT","TCEP"]},{name:"comment[alkylation reagent]",type:"comment",description:"Alkylation reagent used",category:"Sample Preparation",examples:["IAA","IAM","Chloroacetamide"]},{name:"comment[fractionation method]",type:"comment",description:"Fractionation method",category:"Sample Preparation",ontologies:["pride"],examples:["High-pH reversed-phase chromatography","SCX"]},{name:"comment[file uri]",type:"comment",description:"Public URI of the file",category:"File & Project Information",examples:["ftp://ftp.pride.ebi.ac.uk/pride/..."]},{name:"comment[proteomexchange accession number]",type:"comment",description:"ProteomeXchange accession",category:"File & Project Information",pattern:"^PXD\\d{6}$",examples:["PXD000001"]}];function ds(n){return KC.find(e=>e.name.toLowerCase()===n.toLowerCase())}function hm(n){return ds(n)?.isRequired===!0}function gm(n){return ds(n)?.ontologies||[]}function wo(n){if(n.length===0)return"";let e=[...n].sort((r,s)=>r-s),t=[],o=e[0],i=e[0];for(let r=1;r<=e.length;r++)r<e.length&&e[r]===i+1?i=e[r]:(o===i?t.push(String(o)):i-o===1?(t.push(String(o)),t.push(String(i))):t.push(`${o}-${i}`),r<e.length&&(o=e[r],i=e[r]));return t.join(",")}function fs(n){if(!n||n.trim()==="")return[];let e=[],t=n.split(",");for(let o of t){let i=o.trim();if(i.includes("-")){let[r,s]=i.split("-"),a=parseInt(r,10),l=parseInt(s,10);if(!isNaN(a)&&!isNaN(l))for(let d=a;d<=l;d++)e.push(d)}else{let r=parseInt(i,10);isNaN(r)||e.push(r)}}return[...new Set(e)].sort((o,i)=>o-i)}var YC={detectPools:!0,trimValues:!0,normalizeColumnNames:!0,delimiter:"	"},_i=class{parseFromContent(e,t={}){let o=I(I({},YC),t),i=performance.now(),r=[];try{let s=ym.default.parse(e,{delimiter:o.delimiter,header:!1,skipEmptyLines:!0,transformHeader:void 0});if(s.errors.length>0){let C=s.errors.filter(g=>g.type==="Quotes"||g.type==="FieldMismatch");if(C.length>0)return{success:!1,error:`Parse error: ${C[0].message}`,warnings:r,stats:{rowCount:0,columnCount:0,poolCount:0,parseTimeMs:0}};for(let g of s.errors)r.push(`Row ${g.row}: ${g.message}`)}let a=s.data;if(a.length===0)return{success:!1,error:"Empty file",warnings:r,stats:{rowCount:0,columnCount:0,poolCount:0,parseTimeMs:0}};let l=a[0],d=a.slice(1),f=this.buildTable(l,d,o,r),h=performance.now()-i;return{success:!0,table:f,warnings:r,stats:{rowCount:f.sampleCount,columnCount:f.columns.length,poolCount:f.pools.length,parseTimeMs:h}}}catch(s){return{success:!1,error:`Parse error: ${s instanceof Error?s.message:String(s)}`,warnings:r,stats:{rowCount:0,columnCount:0,poolCount:0,parseTimeMs:0}}}}parseFromUrl(o){return O(this,arguments,function*(e,t={}){try{let i=yield fetch(e);if(!i.ok)return{success:!1,error:`Failed to fetch: ${i.status} ${i.statusText}`,warnings:[],stats:{rowCount:0,columnCount:0,poolCount:0,parseTimeMs:0}};let r=yield i.text(),s=this.parseFromContent(r,t);return s.success&&s.table&&(s.table.metadata=H(I({},s.table.metadata),{sourceUrl:e})),s}catch(i){return{success:!1,error:`Fetch error: ${i instanceof Error?i.message:String(i)}`,warnings:[],stats:{rowCount:0,columnCount:0,poolCount:0,parseTimeMs:0}}}})}parseFromFile(o){return O(this,arguments,function*(e,t={}){return new Promise(i=>{let r=new FileReader;r.onload=s=>{let a=s.target?.result,l=this.parseFromContent(a,t);l.success&&l.table&&(l.table.metadata=H(I({},l.table.metadata),{filename:e.name})),i(l)},r.onerror=()=>{i({success:!1,error:`File read error: ${r.error?.message||"Unknown error"}`,warnings:[],stats:{rowCount:0,columnCount:0,poolCount:0,parseTimeMs:0}})},r.readAsText(e)})})}buildTable(e,t,o,i){let r=mm(t.length),s=new Map;return e.forEach((a,l)=>{let d=o.normalizeColumnNames?a.toLowerCase().trim():a.trim(),f=(s.get(d)||0)+1;s.set(d,f),f>1&&i.push(`Duplicate column name: "${d}" (occurrence ${f})`);let h=this.createColumn(d,l,t,o);r.columns.push(h)}),o.detectPools&&(r.pools=this.detectPools(r.columns,t,i)),r.metadata=H(I({},r.metadata),{loadedAt:new Date,modifiedAt:new Date}),r}createColumn(e,t,o,i){let r=new Map,s=!1,a=!1;o.forEach((g,w)=>{let P=g[t]||"";i.trimValues&&(P=P.trim());let W=P.toLowerCase();if(W==="not applicable"&&(s=!0),W==="not available"&&(a=!0),P==="")return;let z=w+1;r.has(P)||r.set(P,[]),r.get(P).push(z)});let l="",d=0;for(let[g,w]of r)w.length>d&&(d=w.length,l=g);let f=[];for(let[g,w]of r)g!==l&&f.push({samples:wo(w),value:g});let h=fm(e),C=ds(e);return{name:e,type:h,value:l,modifiers:f,columnPosition:t,isRequired:hm(e),ontologyType:C?.ontologies?.[0],ontologyOptions:gm(e),notApplicable:s,notAvailable:a}}detectPools(e,t,o){let i=[],r=e.findIndex(d=>d.name.includes("pooled sample"));if(r===-1)return i;let s=e.findIndex(d=>d.name==="source name"),a=[],l=[];t.forEach((d,f)=>{let h=d[r]?.trim()||"";h.startsWith("SN=")?a.push({rowIndex:f,row:d,value:h}):h.toLowerCase()==="pooled"&&l.push(f+1)});for(let d of a){let f=d.value.substring(3).split(",").map(w=>w.trim()).filter(w=>w),h=s!==-1?d.row[s]?.trim()||`Pool ${i.length+1}`:`Pool ${i.length+1}`,C=[],g=[];s!==-1&&t.forEach((w,P)=>{let W=w[s]?.trim()||"";if(f.includes(W)){let z=w[r]?.trim().toLowerCase()||"";z==="not pooled"||z===""||z==="independent"?g.push(P+1):z.startsWith("sn=")||C.push(P+1)}}),i.push({poolName:h,pooledOnlySamples:C,pooledAndIndependentSamples:g,isReference:!0,sdrfValue:d.value})}if(a.length===0&&l.length>0){let d=[];if(s!==-1)for(let h of l){let g=t[h-1][s]?.trim()||"";g&&d.push(g)}let f=d.length>0?`SN=${d.join(",")}`:"";i.push({poolName:"Pool 1",pooledOnlySamples:l,pooledAndIndependentSamples:[],isReference:!1,sdrfValue:f})}return i}},LI=new _i;function vm(){return{isValid:!0,errors:[],warnings:[],info:[],summary:{errorCount:0,warningCount:0,infoCount:0,columnsValidated:0,samplesValidated:0,ontologyValidated:!1},timestamp:new Date}}function Cn(n,e,t){return I({type:"error",code:n,message:e},t)}function Zt(n,e,t){return I({type:"warning",code:n,message:e},t)}var ZC={baseUrl:"https://www.ebi.ac.uk/ols4/api",defaultRows:10,cacheTtlMs:5*60*1e3,timeoutMs:1e4,enableCache:!0},Vn=class{config;cache=new Map;constructor(e={}){this.config=I(I({},ZC),e)}search(e){return O(this,null,function*(){let t=e.query?.trim()||"";if(t.length<2)return{suggestions:[],totalCount:0,hasMore:!1,query:t,ontologies:e.ontology||[]};let o=this.getCacheKey(e);if(this.config.enableCache){let i=this.getFromCache(o);if(i)return{suggestions:i,totalCount:i.length,hasMore:i.length>=(e.rows||this.config.defaultRows),query:t,ontologies:e.ontology||[]}}try{let i=this.buildSearchUrl(e),r=yield this.fetchWithTimeout(i);if(!r.ok)throw new Error(`OLS API error: ${r.status} ${r.statusText}`);let s=yield r.json(),a=this.mapOlsResponse(s,e);return this.config.enableCache&&this.addToCache(o,a),{suggestions:a,totalCount:s.response?.numFound||a.length,hasMore:(s.response?.numFound||0)>a.length,query:t,ontologies:e.ontology||[]}}catch(i){return console.error("OLS search error:",i),{suggestions:[],totalCount:0,hasMore:!1,query:t,ontologies:e.ontology||[]}}})}searchOrganism(e,t){return O(this,null,function*(){return(yield this.search({query:e,ontology:["ncbitaxon"],rows:t||15})).suggestions})}searchDisease(e,t){return O(this,null,function*(){return(yield this.search({query:e,ontology:["efo","mondo","doid"],rows:t||15})).suggestions})}searchCellType(e,t){return O(this,null,function*(){return(yield this.search({query:e,ontology:["cl","bto"],rows:t||15})).suggestions})}searchTissue(e,t){return O(this,null,function*(){return(yield this.search({query:e,ontology:["uberon","bto"],rows:t||15})).suggestions})}searchInstrument(e,t){return O(this,null,function*(){return(yield this.search({query:e,ontology:["ms"],rows:t||15})).suggestions})}searchPride(e,t){return O(this,null,function*(){return(yield this.search({query:e,ontology:["pride"],rows:t||15})).suggestions})}validateTerm(e,t){return O(this,null,function*(){return!e||e.trim()===""?!1:(yield this.search({query:e,ontology:t,exact:!0,rows:1})).suggestions.length>0})}getTermByIri(e){return O(this,null,function*(){try{let t=encodeURIComponent(encodeURIComponent(e)),o=`${this.config.baseUrl}/terms/${t}`,i=yield this.fetchWithTimeout(o);if(!i.ok)return null;let r=yield i.json();return{id:r.obo_id||r.short_form||"",label:r.label||"",iri:r.iri||e,ontologyPrefix:r.ontology_prefix||"",description:r.description?.[0]||"",synonyms:r.synonyms||[]}}catch{return null}})}clearCache(){this.cache.clear()}getCacheStats(){let e=0;for(let t of this.cache.values())e+=JSON.stringify(t.value).length;return{size:e,entries:this.cache.size}}buildSearchUrl(e){let t=new URLSearchParams;if(t.set("q",e.query),t.set("rows",String(e.rows||this.config.defaultRows)),e.ontology&&e.ontology.length>0)for(let o of e.ontology)t.append("ontology",o.toLowerCase());return e.exact&&t.set("exact","true"),e.type&&t.set("type",e.type),t.set("fieldList","id,iri,short_form,obo_id,label,description,ontology_prefix,synonym"),t.set("queryFields","label,synonym,short_form,obo_id"),t.set("highlight","true"),`${this.config.baseUrl}/select?${t.toString()}`}mapOlsResponse(e,t){return(e.response?.docs||[]).map(i=>({id:i.obo_id||i.short_form||i.id||"",label:i.label||"",iri:i.iri||"",ontologyPrefix:i.ontology_prefix||"",description:i.description?.[0]||"",synonyms:i.synonym||[],isExactMatch:t.exact||i.label?.toLowerCase()===t.query.toLowerCase()}))}getCacheKey(e){return JSON.stringify({query:e.query.toLowerCase(),ontology:e.ontology?.sort()||[],exact:e.exact||!1,rows:e.rows||this.config.defaultRows,type:e.type})}getFromCache(e){let t=this.cache.get(e);return t?Date.now()-t.timestamp>this.config.cacheTtlMs?(this.cache.delete(e),null):t.value:null}addToCache(e,t){if(this.cache.set(e,{value:t,timestamp:Date.now()}),this.cache.size>1e3){let o=this.cache.keys().next().value;o&&this.cache.delete(o)}}fetchWithTimeout(e){return O(this,null,function*(){let t=new AbortController,o=setTimeout(()=>t.abort(),this.config.timeoutMs);try{return yield fetch(e,{signal:t.signal,headers:{Accept:"application/json"}})}finally{clearTimeout(o)}})}},UI=new Vn;var xo={collisionEnergy:/^\d+(\.\d+)?%? (NCE|eV)(;\d+(\.\d+)?%? (NCE|eV))*$|^not available$/,age:/^(\d+Y)?(\d+M)?(\d+D)?(-(\d+Y)?(\d+M)?(\d+D)?)?$|^not available$|^not applicable$/,massTolerance:/^\d+(\.\d+)?\s*(ppm|Da)$|^not available$|^not applicable$/,scanWindowLimit:/^\d+(\.\d+)?$|^not available$|^not applicable$/,pxdAccession:/^PXD\d{6}$/},_m=["source name","characteristics[organism]","characteristics[disease]","characteristics[organism part]","assay name","technology type","comment[label]","comment[data file]","comment[instrument]","comment[modification parameters]","comment[cleavage agent details]"],QC={"characteristics[organism]":["ncbitaxon"],"characteristics[disease]":["efo","mondo","doid"],"characteristics[cell type]":["cl","bto"],"characteristics[organism part]":["uberon","bto"],"characteristics[cell line]":["clo","bto"],"comment[instrument]":["ms"],"comment[dissociation method]":["ms","pride"],"comment[fractionation method]":["pride"]},Ci=class{olsService;constructor(e){this.olsService=e||new Vn}validate(o){return O(this,arguments,function*(e,t={}){let i=vm();i.options=t;let r=[],s=[],a=this.validateRequiredColumns(e);r.push(...a);for(let f of e.columns){if(t.skipColumns?.includes(f.name))continue;let h=this.validateColumnFormat(f,e.sampleCount);r.push(...h.filter(C=>C.type==="error")),s.push(...h.filter(C=>C.type==="warning"))}if(t.validateOntology!==!1){let f=yield this.validateOntologyTerms(e,t);s.push(...f)}let l=this.validatePools(e);r.push(...l.filter(f=>f.type==="error")),s.push(...l.filter(f=>f.type==="warning"));let d=this.validateStructure(e);return r.push(...d.filter(f=>f.type==="error")),s.push(...d.filter(f=>f.type==="warning")),i.errors=r,i.warnings=s,i.isValid=r.length===0,i.timestamp=new Date,i.summary={errorCount:r.length,warningCount:s.length,infoCount:0,columnsValidated:e.columns.length,samplesValidated:e.sampleCount,ontologyValidated:t.validateOntology!==!1},t.strictMode&&s.length>0&&(i.isValid=!1),i})}validateRequiredColumns(e){let t=[],o=new Set(e.columns.map(i=>i.name.toLowerCase()));for(let i of _m)o.has(i.toLowerCase())||t.push(Cn("MISSING_REQUIRED_COLUMN",`Required column '${i}' is missing`,{column:i}));return t}validateColumnFormat(e,t){let o=[],i=e.name.toLowerCase(),r=this.getUniqueValuesToValidate(e);if(i.includes("collision energy"))for(let s of r)s&&!xo.collisionEnergy.test(s)&&o.push(Cn("INVALID_COLLISION_ENERGY",`Invalid collision energy format: '${s}'. Expected: {value} {unit} (e.g., '30 NCE', '25% NCE;27% NCE')`,{column:e.name,value:s}));else if(i==="characteristics[age]")for(let s of r)s&&!xo.age.test(s)&&o.push(Zt("INVALID_AGE_FORMAT",`Non-standard age format: '${s}'. Expected: XY[XM][XD] (e.g., '30Y', '30Y6M', '25Y-35Y')`,{column:e.name,value:s}));else if(i.includes("mass tolerance")||i.includes("precursor mass tolerance")||i.includes("fragment mass tolerance"))for(let s of r)s&&!xo.massTolerance.test(s)&&o.push(Cn("INVALID_MASS_TOLERANCE",`Invalid mass tolerance format: '${s}'. Expected: {value} {unit} (e.g., '10 ppm', '0.02 Da')`,{column:e.name,value:s}));else if(i.includes("scan window lower limit")||i.includes("scan window upper limit")||i.includes("isolation window width"))for(let s of r)s&&!xo.scanWindowLimit.test(s)&&o.push(Zt("INVALID_PATTERN",`Invalid numeric format: '${s}'. Expected: numeric value`,{column:e.name,value:s}));else if(i==="comment[modification parameters]"){for(let s of r)if(s&&s!=="not available"){let a=this.validateModificationFormat(s,e.name);o.push(...a)}}else if(i==="comment[cleavage agent details]"){for(let s of r)if(s&&s!=="not available"){let a=this.validateCleavageFormat(s,e.name);o.push(...a)}}else if(i==="comment[proteomexchange accession number]")for(let s of r)s&&!xo.pxdAccession.test(s)&&o.push(Zt("INVALID_PATTERN",`Invalid ProteomeXchange accession: '${s}'. Expected format: PXD000000`,{column:e.name,value:s}));return e.isRequired&&!e.value&&e.modifiers.length===0&&o.push(Cn("EMPTY_REQUIRED_VALUE",`Required column '${e.name}' has no values`,{column:e.name})),o}validateModificationFormat(e,t){let o=[],i=e.split(";"),r=[];for(let s of i){let a=s.split("=");a.length>=2&&r.push(a[0].trim())}return r.includes("NT")||o.push(Zt("INVALID_MODIFICATION_FORMAT",`Modification missing NT (Name of Term): '${e}'`,{column:t,value:e,suggestion:"Add NT=<modification name>"})),r.includes("TA")||o.push(Zt("INVALID_MODIFICATION_FORMAT",`Modification missing TA (Target Amino acid): '${e}'`,{column:t,value:e,suggestion:"Add TA=<amino acid>"})),o}validateCleavageFormat(e,t){let o=[],i=e.split(";"),r=[];for(let s of i){let a=s.split("=");a.length>=2&&r.push(a[0].trim())}return r.includes("NT")||o.push(Zt("INVALID_CLEAVAGE_FORMAT",`Cleavage agent missing NT (Name of Term): '${e}'`,{column:t,value:e,suggestion:"Add NT=<enzyme name>"})),o}validateOntologyTerms(e,t){return O(this,null,function*(){let o=[],i=new Set;for(let r of e.columns){let s=QC[r.name.toLowerCase()];if(!s)continue;let a=this.getUniqueValuesToValidate(r);for(let l of a){if(!l)continue;let d=l.toLowerCase();if(d==="not applicable"||d==="not available")continue;let f=`${r.name}:${l}`;if(!i.has(f)){i.add(f);try{(yield this.olsService.validateTerm(l,s))||o.push(Zt("ONTOLOGY_TERM_NOT_FOUND",`Term '${l}' not found in ${s.join("/")} ontologies`,{column:r.name,value:l}))}catch{}}}}return o})}validatePools(e){let t=[];for(let o of e.pools){let i=[...o.pooledOnlySamples,...o.pooledAndIndependentSamples];for(let r of i)(r<1||r>e.sampleCount)&&t.push(Cn("POOL_SAMPLE_NOT_FOUND",`Pool '${o.poolName}' references non-existent sample ${r}`,{value:o.poolName}));i.length===0&&t.push(Zt("INVALID_POOL_REFERENCE",`Pool '${o.poolName}' has no samples`,{value:o.poolName}))}return t}validateStructure(e){let t=[],o=new Map;for(let i of e.columns){let r=i.name.toLowerCase(),s=(o.get(r)||0)+1;o.set(r,s),s>1&&!r.includes("modification parameters")&&t.push(Zt("DUPLICATE_COLUMN_NAME",`Duplicate column name: '${i.name}' (occurrence ${s})`,{column:i.name}))}return e.columns.length===0&&t.push(Cn("UNKNOWN_ERROR","Table has no columns",{})),e.sampleCount===0&&t.push(Cn("UNKNOWN_ERROR","Table has no samples",{})),t}getUniqueValuesToValidate(e){let t=new Set;e.value&&t.add(e.value);for(let o of e.modifiers)o.value&&t.add(o.value);return Array.from(t)}validatePattern(e,t){return t.test(e)}getValidationPatterns(){return I({},xo)}getRequiredColumns(){return[..._m]}},QI=new Ci;var Cm={includePools:!0,lineEnding:"unix",includeBom:!1},bi=class{exportToTsv(e,t={}){let o=I(I({},Cm),t),i=[],r=o.lineEnding==="windows"?`\r
`:`
`,s=e.columns.map(d=>d.name);i.push(s.join("	"));let a=kc(e);for(let d of a)i.push(d.join("	"));if(o.includePools&&e.pools.length>0){for(let d of e.pools)if(d.sdrfValue){let f=this.createPoolRow(e,d);i.push(f.join("	"))}}let l=i.join(r);return o.includeBom&&(l="\uFEFF"+l),l}exportToTsvBlob(e,t={}){let o=this.exportToTsv(e,t);return new Blob([o],{type:"text/tab-separated-values;charset=utf-8"})}downloadTsv(e,t="sdrf.tsv",o={}){let i=this.exportToTsvBlob(e,o);this.downloadBlob(i,t)}exportToExcel(o){return O(this,arguments,function*(e,t={}){let i=yield this.loadXlsx(),r=I(I({},Cm),t),s=i.utils.book_new(),a=e.columns.map(w=>w.name),l=kc(e),d=[a,...l],f=i.utils.aoa_to_sheet(d);i.utils.book_append_sheet(s,f,"main");let h=[["id","column","name","type","hidden"],...e.columns.map((w,P)=>[P,P,w.name,w.type,w.hidden||!1])],C=i.utils.aoa_to_sheet(h);if(i.utils.book_append_sheet(s,C,"id_metadata_column_map"),r.includePools&&e.pools.length>0){let w=[["pool_name","pooled_only_samples","pooled_and_independent_samples","is_reference"],...e.pools.map(W=>[W.poolName,JSON.stringify(W.pooledOnlySamples),JSON.stringify(W.pooledAndIndependentSamples),W.isReference])],P=i.utils.aoa_to_sheet(w);i.utils.book_append_sheet(s,P,"pool_object_map")}let g=i.write(s,{bookType:"xlsx",type:"array"});return new Blob([g],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})})}downloadExcel(i){return O(this,arguments,function*(e,t="sdrf.xlsx",o={}){let r=yield this.exportToExcel(e,o);this.downloadBlob(r,t)})}createPoolRow(e,t){let o=[];for(let i of e.columns){let r=i.name.toLowerCase();if(r==="source name")o.push(t.poolName);else if(r.includes("pooled sample"))o.push(t.sdrfValue);else{let s=t.metadata?.find(a=>a.name.toLowerCase()===r);o.push(s?.value||"")}}return o}downloadBlob(e,t){let o=URL.createObjectURL(e),i=document.createElement("a");i.href=o,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)}loadXlsx(){return O(this,null,function*(){return yield import("./chunk-WHO7ZPX6.js")})}},nT=new bi;function bm(n,e,t){if(t===n.value){n.modifiers=n.modifiers.map(i=>{let s=fs(i.samples).filter(a=>a!==e);return s.length===0?null:H(I({},i),{samples:wo(s)})}).filter(i=>i!==null);return}let o=n.modifiers.find(i=>i.value===t);if(o){let i=fs(o.samples);i.includes(e)||(i.push(e),o.samples=wo(i))}else n.modifiers.push({samples:String(e),value:t});for(let i of n.modifiers)if(i.value!==t){let s=fs(i.samples).filter(a=>a!==e);if(s.length===0){let a=n.modifiers.indexOf(i);n.modifiers.splice(a,1)}else i.samples=wo(s)}}var JC={age:/^characteristics\[age\]$/i,modification:/^comment\[modification parameters\]$/i,cleavage:/^comment\[cleavage agent details\]$/i,spiked_compound:/^characteristics\[spiked compound\]$/i,pooled_sample:/^characteristics\[pooled sample\]$/i,synthetic_peptide:/^characteristics\[synthetic peptide\]$/i},wm=["NT","AC","CF","MT","PP","TA","MM","TS"],xm=["NT","AC","CS"],Dm=["SP","CT","QY","PS","AC","CN","CV","CS","CF"],XC=["not pooled","pooled"],Em=["synthetic","not synthetic"],kt=class{detectSpecialSyntax(e,t){let o=e.toLowerCase(),i=t?.toLowerCase()||"";for(let[r,s]of Object.entries(JC))if(s.test(o)||s.test(i))return r;return null}parseValue(e,t){if(!t||t.trim()==="")return null;try{switch(e){case"age":return this.parseAgeFormat(t);case"modification":return this.parseKeyValuePairs(t,wm);case"cleavage":return this.parseKeyValuePairs(t,xm);case"spiked_compound":return this.parseKeyValuePairs(t,Dm);case"pooled_sample":return this.parsePooledSample(t);case"synthetic_peptide":return{value:t.toLowerCase().trim()};default:throw new Error(`Unknown syntax type: ${e}`)}}catch(o){return console.error(`Error parsing ${e} value:`,o),null}}formatValue(e,t){if(!t)return"";try{switch(e){case"age":return this.formatAgeFormat(t);case"modification":case"cleavage":case"spiked_compound":return this.formatKeyValuePairs(t);case"pooled_sample":return this.formatPooledSample(t);case"synthetic_peptide":return t.value||"";default:throw new Error(`Unknown syntax type: ${e}`)}}catch(o){return console.error(`Error formatting ${e} value:`,o),""}}validateValue(e,t){let o={isValid:!0,errors:[],warnings:[]};if(!t)return o.isValid=!1,o.errors.push("Value is required"),o;try{switch(e){case"age":return this.validateAgeFormat(t);case"modification":return this.validateModificationParameters(t);case"cleavage":return this.validateCleavageAgentDetails(t);case"spiked_compound":return this.validateSpikedCompound(t);case"pooled_sample":return this.validatePooledSample(t);case"synthetic_peptide":return this.validateSyntheticPeptide(t);default:o.isValid=!1,o.errors.push(`Unknown syntax type: ${e}`)}}catch(i){o.isValid=!1,o.errors.push(`Validation error: ${i}`)}return o}parseAgeFormat(e){let t=e.trim();if(t.includes("-")&&!t.startsWith("-")){let o=t.split("-");if(o.length===2)return{isRange:!0,rangeStart:this.parseSingleAge(o[0].trim()),rangeEnd:this.parseSingleAge(o[1].trim())}}return this.parseSingleAge(t)}parseSingleAge(e){let t={},o=e.match(/(\d+)Y/i),i=e.match(/(\d+)M/i),r=e.match(/(\d+)D/i);return o&&(t.years=parseInt(o[1],10)),i&&(t.months=parseInt(i[1],10)),r&&(t.days=parseInt(r[1],10)),t}formatAgeFormat(e){return e.isRange&&e.rangeStart&&e.rangeEnd?`${this.formatSingleAge(e.rangeStart)}-${this.formatSingleAge(e.rangeEnd)}`:this.formatSingleAge(e)}formatSingleAge(e){let t="";return e.years!==void 0&&e.years>0&&(t+=`${e.years}Y`),e.months!==void 0&&e.months>0&&(t+=`${e.months}M`),e.days!==void 0&&e.days>0&&(t+=`${e.days}D`),t}validateAgeFormat(e){let t={isValid:!0,errors:[],warnings:[]};if(e.isRange){if(!e.rangeStart||!e.rangeEnd)return t.isValid=!1,t.errors.push("Range format requires both start and end values"),t;let o=this.validateSingleAge(e.rangeStart),i=this.validateSingleAge(e.rangeEnd);o.isValid||(t.isValid=!1,t.errors.push(...o.errors.map(r=>`Range start: ${r}`))),i.isValid||(t.isValid=!1,t.errors.push(...i.errors.map(r=>`Range end: ${r}`)))}else{let o=this.validateSingleAge(e);o.isValid||(t.isValid=!1,t.errors.push(...o.errors))}return t}validateSingleAge(e){let t={isValid:!0,errors:[]};return e.years===void 0&&e.months===void 0&&e.days===void 0&&(t.isValid=!1,t.errors.push("At least one age component (years, months, or days) is required")),e.years!==void 0&&(e.years<0||e.years>200)&&(t.isValid=!1,t.errors.push("Years must be between 0 and 200")),e.months!==void 0&&(e.months<0||e.months>11)&&(t.isValid=!1,t.errors.push("Months must be between 0 and 11")),e.days!==void 0&&(e.days<0||e.days>31)&&(t.isValid=!1,t.errors.push("Days must be between 0 and 31")),t}parseKeyValuePairs(e,t){let o={},i=e.split(";").map(r=>r.trim()).filter(r=>r);for(let r of i){let[s,...a]=r.split("="),l=s?.trim(),d=a.join("=").trim();l&&t.includes(l)&&(o[l]=d)}return o}formatKeyValuePairs(e){let t=[];for(let[o,i]of Object.entries(e))i!=null&&i!==""&&t.push(`${o}=${i}`);return t.join(";")}validateModificationParameters(e){let t={isValid:!0,errors:[],warnings:[]};return Object.values(e).some(i=>i!==void 0&&i!=="")||(t.isValid=!1,t.errors.push("At least one modification parameter is required")),e.NT||t.warnings?.push("NT (Name of Term) is recommended"),e.TA||t.warnings?.push("TA (Target Amino acid) is recommended"),e.PP&&!/^\d+$/.test(e.PP)&&(["Anywhere","Protein N-term","Protein C-term","Any N-term","Any C-term"].some(r=>r.toLowerCase()===e.PP?.toLowerCase())||t.warnings?.push("PP (position) should be a number or standard position term")),e.MM&&!/^-?\d+(\.\d+)?$/.test(e.MM)&&(t.errors.push("MM (monoisotopic mass) must be a valid number"),t.isValid=!1),t}validateCleavageAgentDetails(e){let t={isValid:!0,errors:[],warnings:[]};return Object.values(e).some(i=>i!==void 0&&i!=="")||(t.isValid=!1,t.errors.push("At least one cleavage agent detail is required")),e.NT||t.warnings?.push("NT (Name of Term) is recommended"),t}validateSpikedCompound(e){let t={isValid:!0,errors:[],warnings:[]};return Object.values(e).some(i=>i!==void 0&&i!=="")||(t.isValid=!1,t.errors.push("At least one spiked compound parameter is required")),e.QY&&!/^\d+(\.\d+)?\s*(mg|g|kg|g|ng|pg|M|mM|M|nM|pM|fmol|pmol|nmol)?$/i.test(e.QY)&&t.warnings?.push("QY (quantity) format may not be standard - consider using standard units"),t}parsePooledSample(e){let t=e.trim(),o=t.toLowerCase();if(o==="not pooled"||o==="pooled")return{value:o};if(t.startsWith("SN=")){let i=t.substring(3).split(",").map(r=>r.trim()).filter(r=>r);return{value:t,sourceNames:i}}return{value:t}}formatPooledSample(e){return e.sourceNames&&e.sourceNames.length>0?`SN=${e.sourceNames.join(",")}`:e.value}validatePooledSample(e){let t={isValid:!0,errors:[],warnings:[]},o=e.value.toLowerCase();return o!=="not pooled"&&o!=="pooled"&&!e.value.startsWith("SN=")&&t.warnings?.push('Pooled sample should be "not pooled", "pooled", or use SN= format'),e.value.startsWith("SN=")&&(!e.sourceNames||e.sourceNames.length===0)&&(t.isValid=!1,t.errors.push("SN= format requires at least one source name")),t}validateSyntheticPeptide(e){let t={isValid:!0,errors:[],warnings:[]};return Em.includes(e.value.toLowerCase())||t.warnings?.push('Synthetic peptide should be "synthetic" or "not synthetic"'),t}getPooledSampleValues(){return[...XC]}getSyntheticPeptideValues(){return[...Em]}getModificationKeys(){return[...wm]}getCleavageKeys(){return[...xm]}getSpikedCompoundKeys(){return[...Dm]}},fT=new kt;function eb(n,e){if(n&1){let t=R();u(0,"div",3)(1,"div",8)(2,"label"),p(3,"From:"),c(),u(4,"div",9)(5,"input",10),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateStartYears(i))}),c(),u(6,"span"),p(7,"Y"),c(),u(8,"input",11),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateStartMonths(i))}),c(),u(9,"span"),p(10,"M"),c(),u(11,"input",12),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateStartDays(i))}),c(),u(12,"span"),p(13,"D"),c()()(),u(14,"div",8)(15,"label"),p(16,"To:"),c(),u(17,"div",9)(18,"input",10),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateEndYears(i))}),c(),u(19,"span"),p(20,"Y"),c(),u(21,"input",11),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateEndMonths(i))}),c(),u(22,"span"),p(23,"M"),c(),u(24,"input",12),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateEndDays(i))}),c(),u(25,"span"),p(26,"D"),c()()()()}if(n&2){let t=y();m(5),T("ngModel",t.startYears()),m(3),T("ngModel",t.startMonths()),m(3),T("ngModel",t.startDays()),m(7),T("ngModel",t.endYears()),m(3),T("ngModel",t.endMonths()),m(3),T("ngModel",t.endDays())}}function tb(n,e){if(n&1){let t=R();u(0,"div",4)(1,"div",9)(2,"input",13),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateYears(i))}),c(),u(3,"span"),p(4,"Y"),c(),u(5,"input",14),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateMonths(i))}),c(),u(6,"span"),p(7,"M"),c(),u(8,"input",15),b("ngModelChange",function(i){x(t);let r=y();return D(r.updateDays(i))}),c(),u(9,"span"),p(10,"D"),c()()()}if(n&2){let t=y();m(2),T("ngModel",t.years()),m(3),T("ngModel",t.months()),m(3),T("ngModel",t.days())}}function nb(n,e){if(n&1&&(u(0,"span",16),p(1),c()),n&2){let t=e.$implicit;m(),V(t)}}function ob(n,e){if(n&1&&(u(0,"div",7),se(1,nb,2,1,"span",16,Pt),c()),n&2){let t=y();m(),ae(t.validationErrors())}}var ps=class n{value="";valueChange=new L;syntaxService=new kt;years=S(null);months=S(null);days=S(null);isRange=S(!1);startYears=S(null);startMonths=S(null);startDays=S(null);endYears=S(null);endMonths=S(null);endDays=S(null);validationErrors=S([]);formattedValue=le(()=>{if(this.isRange()){let e=this.formatSingleAge(this.startYears(),this.startMonths(),this.startDays()),t=this.formatSingleAge(this.endYears(),this.endMonths(),this.endDays());return e&&t?`${e}-${t}`:""}else return this.formatSingleAge(this.years(),this.months(),this.days())});ngOnInit(){this.parseValue()}ngOnChanges(e){e.value&&!e.value.firstChange&&this.parseValue()}parseValue(){if(!this.value){this.resetFields();return}let e=this.syntaxService.parseValue("age",this.value);if(!e){this.resetFields();return}e.isRange&&e.rangeStart&&e.rangeEnd?(this.isRange.set(!0),this.startYears.set(e.rangeStart.years??null),this.startMonths.set(e.rangeStart.months??null),this.startDays.set(e.rangeStart.days??null),this.endYears.set(e.rangeEnd.years??null),this.endMonths.set(e.rangeEnd.months??null),this.endDays.set(e.rangeEnd.days??null)):(this.isRange.set(!1),this.years.set(e.years??null),this.months.set(e.months??null),this.days.set(e.days??null))}resetFields(){this.years.set(null),this.months.set(null),this.days.set(null),this.startYears.set(null),this.startMonths.set(null),this.startDays.set(null),this.endYears.set(null),this.endMonths.set(null),this.endDays.set(null)}toggleRange(){this.isRange.set(!this.isRange()),this.emitValue()}updateYears(e){this.years.set(e),this.emitValue()}updateMonths(e){this.months.set(e),this.emitValue()}updateDays(e){this.days.set(e),this.emitValue()}updateStartYears(e){this.startYears.set(e),this.emitValue()}updateStartMonths(e){this.startMonths.set(e),this.emitValue()}updateStartDays(e){this.startDays.set(e),this.emitValue()}updateEndYears(e){this.endYears.set(e),this.emitValue()}updateEndMonths(e){this.endMonths.set(e),this.emitValue()}updateEndDays(e){this.endDays.set(e),this.emitValue()}formatSingleAge(e,t,o){let i="";return e!==null&&e>0&&(i+=`${e}Y`),t!==null&&t>0&&(i+=`${t}M`),o!==null&&o>0&&(i+=`${o}D`),i}emitValue(){let e=this.formattedValue();this.validate(e),this.valueChange.emit(e)}validate(e){if(!e){this.validationErrors.set([]);return}let t=this.syntaxService.parseValue("age",e);if(t){let o=this.syntaxService.validateValue("age",t);this.validationErrors.set(o.errors)}else this.validationErrors.set(["Invalid age format"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-age-input"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[$e],decls:13,vars:4,consts:[[1,"age-input-container"],[1,"age-mode-toggle"],["type","checkbox",3,"change","checked"],[1,"age-range"],[1,"age-single"],[1,"age-preview"],[1,"label"],[1,"validation-errors"],[1,"age-group"],[1,"age-fields"],["type","number","min","0","max","200","placeholder","Y",1,"age-field",3,"ngModelChange","ngModel"],["type","number","min","0","max","11","placeholder","M",1,"age-field",3,"ngModelChange","ngModel"],["type","number","min","0","max","31","placeholder","D",1,"age-field",3,"ngModelChange","ngModel"],["type","number","min","0","max","200","placeholder","Years",1,"age-field",3,"ngModelChange","ngModel"],["type","number","min","0","max","11","placeholder","Months",1,"age-field",3,"ngModelChange","ngModel"],["type","number","min","0","max","31","placeholder","Days",1,"age-field",3,"ngModelChange","ngModel"],[1,"error"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"label")(3,"input",2),b("change",function(){return o.toggleRange()}),c(),p(4," Age Range "),c()(),A(5,eb,27,6,"div",3)(6,tb,11,3,"div",4),u(7,"div",5)(8,"span",6),p(9,"Output:"),c(),u(10,"code"),p(11),c()(),A(12,ob,3,0,"div",7),c()),t&2&&(m(3),T("checked",o.isRange()),m(2),M(o.isRange()?5:6),m(6),V(o.formattedValue()||"(empty)"),m(),M(o.validationErrors().length>0?12:-1))},dependencies:[xe,De,Ie,gi,Ne,vi,yi,Te],styles:[".age-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px;border:1px solid #ddd;border-radius:4px;background:#fafafa}.age-mode-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:13px;cursor:pointer}.age-range[_ngcontent-%COMP%], .age-single[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.age-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.age-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-width:40px;font-size:13px;font-weight:500}.age-fields[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.age-field[_ngcontent-%COMP%]{width:60px;padding:6px 8px;border:1px solid #ccc;border-radius:4px;font-size:13px;text-align:center}.age-field[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.age-fields[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px;color:#666;min-width:12px}.age-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px;background:#fff;border:1px solid #e0e0e0;border-radius:4px}.age-preview[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}.age-preview[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:monospace;font-size:13px;color:#333}.validation-errors[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.validation-errors[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:12px;color:#d32f2f}"]})};var ib=[{accession:"UNIMOD:4",name:"Carbamidomethyl",deltaMonoMass:57.021464,deltaComposition:"H3C2NO",sites:["C"],positions:["Anywhere"],specifications:[{site:"C",position:"Anywhere",classification:"Chemical derivatization",hidden:!1}]},{accession:"UNIMOD:35",name:"Oxidation",deltaMonoMass:15.994915,deltaComposition:"O",sites:["M","W","H","C","P","F","Y"],positions:["Anywhere"],specifications:[{site:"M",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"W",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"H",position:"Anywhere",classification:"Post-translational",hidden:!0}]},{accession:"UNIMOD:1",name:"Acetyl",deltaMonoMass:42.010565,deltaComposition:"H2C2O",sites:["K","N-term"],positions:["Protein N-term","Any N-term","Anywhere"],specifications:[{site:"K",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"N-term",position:"Protein N-term",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:21",name:"Phospho",deltaMonoMass:79.966331,deltaComposition:"HO3P",sites:["S","T","Y","H","D"],positions:["Anywhere"],specifications:[{site:"S",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"T",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"Y",position:"Anywhere",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:7",name:"Deamidated",deltaMonoMass:.984016,deltaComposition:"H-1NO",sites:["N","Q"],positions:["Anywhere"],specifications:[{site:"N",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"Q",position:"Anywhere",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:121",name:"GlyGly",deltaMonoMass:114.042927,deltaComposition:"H6C4N2O2",sites:["K"],positions:["Anywhere"],specifications:[{site:"K",position:"Anywhere",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:36",name:"Dimethyl",deltaMonoMass:28.0313,deltaComposition:"H4C2",sites:["K","N-term","R"],positions:["Anywhere","Any N-term"],specifications:[{site:"K",position:"Anywhere",classification:"Chemical derivatization",hidden:!1},{site:"N-term",position:"Any N-term",classification:"Chemical derivatization",hidden:!1}]},{accession:"UNIMOD:34",name:"Methyl",deltaMonoMass:14.01565,deltaComposition:"H2C",sites:["K","R","E","D","C","H","S"],positions:["Anywhere"],specifications:[{site:"K",position:"Anywhere",classification:"Post-translational",hidden:!1},{site:"R",position:"Anywhere",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:5",name:"Carbamyl",deltaMonoMass:43.005814,deltaComposition:"HCNO",sites:["K","N-term","R","C","M"],positions:["Anywhere","Any N-term"],specifications:[{site:"K",position:"Anywhere",classification:"Artefact",hidden:!1},{site:"N-term",position:"Any N-term",classification:"Artefact",hidden:!1}]},{accession:"UNIMOD:737",name:"TMT6plex",deltaMonoMass:229.162932,deltaComposition:"H20C12N2O2",sites:["K","N-term"],positions:["Anywhere","Any N-term"],specifications:[{site:"K",position:"Anywhere",classification:"Chemical derivatization",hidden:!1},{site:"N-term",position:"Any N-term",classification:"Chemical derivatization",hidden:!1}]},{accession:"UNIMOD:2016",name:"TMTpro",deltaMonoMass:304.207146,deltaComposition:"H25C15N3O3",sites:["K","N-term"],positions:["Anywhere","Any N-term"],specifications:[{site:"K",position:"Anywhere",classification:"Chemical derivatization",hidden:!1},{site:"N-term",position:"Any N-term",classification:"Chemical derivatization",hidden:!1}]},{accession:"UNIMOD:214",name:"iTRAQ4plex",deltaMonoMass:144.102063,deltaComposition:"H12C4C*3N2O",sites:["K","N-term","Y"],positions:["Anywhere","Any N-term"],specifications:[{site:"K",position:"Anywhere",classification:"Chemical derivatization",hidden:!1},{site:"N-term",position:"Any N-term",classification:"Chemical derivatization",hidden:!1}]},{accession:"UNIMOD:730",name:"Label:13C(6)15N(2)",deltaMonoMass:8.014199,deltaComposition:"C*6N*2C-6N-2",sites:["K"],positions:["Anywhere"],specifications:[{site:"K",position:"Anywhere",classification:"Isotopic label",hidden:!1}]},{accession:"UNIMOD:259",name:"Label:13C(6)15N(4)",deltaMonoMass:10.008269,deltaComposition:"C*6N*4C-6N-4",sites:["R"],positions:["Anywhere"],specifications:[{site:"R",position:"Anywhere",classification:"Isotopic label",hidden:!1}]},{accession:"UNIMOD:188",name:"Label:13C(6)",deltaMonoMass:6.020129,deltaComposition:"C*6C-6",sites:["K","R","L","I"],positions:["Anywhere"],specifications:[{site:"K",position:"Anywhere",classification:"Isotopic label",hidden:!1},{site:"R",position:"Anywhere",classification:"Isotopic label",hidden:!1}]},{accession:"UNIMOD:267",name:"Pyro-carbamidomethyl",deltaMonoMass:39.994915,deltaComposition:"C2H2NO-H2O",sites:["C"],positions:["N-term"],specifications:[{site:"C",position:"Any N-term",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:27",name:"Gln->pyro-Glu",deltaMonoMass:-17.026549,deltaComposition:"H-3N-1",sites:["Q"],positions:["N-term"],specifications:[{site:"Q",position:"Any N-term",classification:"Post-translational",hidden:!1}]},{accession:"UNIMOD:28",name:"Glu->pyro-Glu",deltaMonoMass:-18.010565,deltaComposition:"H-2O-1",sites:["E"],positions:["N-term"],specifications:[{site:"E",position:"Any N-term",classification:"Post-translational",hidden:!1}]}],wi=class{modifications=new Map;modificationsByName=new Map;loaded=!1;loadPromise=null;loadDatabase(){return O(this,null,function*(){if(!this.loaded)return this.loadPromise?this.loadPromise:(this.loadPromise=this.doLoad(),this.loadPromise)})}doLoad(){return O(this,null,function*(){for(let e of ib)this.modifications.set(e.accession,e),this.modificationsByName.set(e.name.toLowerCase(),e);this.loaded=!0})}searchModifications(e,t=10){return O(this,null,function*(){if(yield this.loadDatabase(),!e||e.trim()==="")return[];let o=e.toLowerCase().trim(),i=[],r=new Set;for(let s of this.modifications.values())if(!r.has(s.accession)&&((s.name.toLowerCase()===o||s.accession.toLowerCase()===o)&&(i.push(s),r.add(s.accession)),i.length>=t))break;if(i.length<t){for(let s of this.modifications.values())if(!r.has(s.accession)&&((s.name.toLowerCase().startsWith(o)||s.accession.toLowerCase().startsWith(o))&&(i.push(s),r.add(s.accession)),i.length>=t))break}if(i.length<t){for(let s of this.modifications.values())if(!r.has(s.accession)&&((s.name.toLowerCase().includes(o)||s.accession.toLowerCase().includes(o))&&(i.push(s),r.add(s.accession)),i.length>=t))break}return i})}getByAccession(e){return O(this,null,function*(){yield this.loadDatabase();let t=e.toUpperCase();return t.startsWith("UNIMOD:")||(t=`UNIMOD:${t}`),this.modifications.get(t)})}getByName(e){return O(this,null,function*(){return yield this.loadDatabase(),this.modificationsByName.get(e.toLowerCase())})}getModificationsForSite(e,t=50){return O(this,null,function*(){yield this.loadDatabase();let o=e.toUpperCase(),i=[];for(let r of this.modifications.values())if(r.sites.includes(o)&&(i.push(r),i.length>=t))break;return i})}getAllModifications(){return O(this,null,function*(){return yield this.loadDatabase(),Array.from(this.modifications.values())})}getCount(){return O(this,null,function*(){return yield this.loadDatabase(),this.modifications.size})}formatForSdrf(e,t,o="Variable"){return[`NT=${e.name}`,`TA=${t}`,`MT=${o}`,`AC=${e.accession}`].join(";")}isValidAccession(e){return O(this,null,function*(){return(yield this.getByAccession(e))!==void 0})}},ST=new wi;var rb=(n,e)=>e.accession;function sb(n,e){if(n&1){let t=R();u(0,"div",24),b("click",function(){let i=x(t).$implicit,r=y(2);return D(r.selectSuggestion(i))}),u(1,"span",25),p(2),c(),u(3,"span",26),p(4),c(),u(5,"span",27),p(6),c()()}if(n&2){let t=e.$implicit;m(2),V(t.name),m(2),V(t.accession),m(2),ne("\u0394",t.deltaMonoMass.toFixed(4),"")}}function ab(n,e){if(n&1&&(u(0,"div",4),se(1,sb,7,3,"div",23,rb),c()),n&2){let t=y();m(),ae(t.suggestions())}}function lb(n,e){if(n&1&&(u(0,"div",6),p(1),c()),n&2){let t=y();m(),ne(" Valid sites: ",t.selectedMod().sites.join(", ")," ")}}function cb(n,e){if(n&1&&(u(0,"span",28),p(1),c()),n&2){let t=e.$implicit;m(),V(t)}}function ub(n,e){if(n&1&&(u(0,"div",22),se(1,cb,2,1,"span",28,Pt),c()),n&2){let t=y();m(),ae(t.validationErrors())}}var ms=class n{value="";valueChange=new L;syntaxService=new kt;unimodService=new wi;nt=S("");ta=S("");mt=S("");ac=S("");pp=S("");cf=S("");mm=S("");suggestions=S([]);selectedMod=S(null);validationErrors=S([]);formattedValue=le(()=>{let e={};return this.nt()&&(e.NT=this.nt()),this.ta()&&(e.TA=this.ta()),this.mt()&&(e.MT=this.mt()),this.ac()&&(e.AC=this.ac()),this.pp()&&(e.PP=this.pp()),this.cf()&&(e.CF=this.cf()),this.mm()&&(e.MM=this.mm()),this.syntaxService.formatValue("modification",e)});ngOnInit(){this.parseValue()}ngOnChanges(e){e.value&&!e.value.firstChange&&this.parseValue()}parseValue(){if(!this.value){this.resetFields();return}let e=this.syntaxService.parseValue("modification",this.value);e?(this.nt.set(e.NT||""),this.ta.set(e.TA||""),this.mt.set(e.MT||""),this.ac.set(e.AC||""),this.pp.set(e.PP||""),this.cf.set(e.CF||""),this.mm.set(e.MM||""),e.AC&&this.unimodService.getByAccession(e.AC).then(t=>{this.selectedMod.set(t||null)})):this.resetFields()}resetFields(){this.nt.set(""),this.ta.set(""),this.mt.set(""),this.ac.set(""),this.pp.set(""),this.cf.set(""),this.mm.set(""),this.selectedMod.set(null)}updateNt(e){this.nt.set(e),this.emitValue()}updateTa(e){this.ta.set(e.toUpperCase()),this.emitValue()}updateMt(e){this.mt.set(e),this.emitValue()}updateAc(e){this.ac.set(e),this.emitValue()}updatePp(e){this.pp.set(e),this.emitValue()}updateCf(e){this.cf.set(e),this.emitValue()}updateMm(e){this.mm.set(e),this.emitValue()}onNtInput(e){return O(this,null,function*(){let o=e.target.value.trim();if(o.length<2){this.suggestions.set([]);return}let i=yield this.unimodService.searchModifications(o,8);this.suggestions.set(i)})}selectSuggestion(e){this.nt.set(e.name),this.ac.set(e.accession),this.cf.set(e.deltaComposition),this.mm.set(e.deltaMonoMass.toString()),this.selectedMod.set(e),this.suggestions.set([]),e.sites.length===1&&this.ta.set(e.sites[0]),e.positions.length===1&&this.pp.set(e.positions[0]),this.emitValue()}emitValue(){let e=this.formattedValue();this.validate(e),this.valueChange.emit(e)}validate(e){if(!e){this.validationErrors.set([]);return}let t=this.syntaxService.parseValue("modification",e);if(t){let o=this.syntaxService.validateValue("modification",t);this.validationErrors.set([...o.errors,...o.warnings||[]])}else this.validationErrors.set(["Invalid modification format"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-modification-input"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[$e],decls:58,vars:11,consts:[[1,"modification-input-container"],[1,"field-group"],[1,"autocomplete-wrapper"],["type","text","placeholder","e.g., Oxidation, Carbamidomethyl",1,"field-input",3,"ngModelChange","input","ngModel"],[1,"suggestions-dropdown"],["type","text","placeholder","e.g., M, K, C","maxlength","10",1,"field-input",3,"ngModelChange","ngModel"],[1,"hint"],[1,"field-input",3,"ngModelChange","ngModel"],["value",""],["value","Fixed"],["value","Variable"],["value","Annotated"],["type","text","placeholder","e.g., UNIMOD:35",1,"field-input",3,"ngModelChange","ngModel"],["value","Anywhere"],["value","Protein N-term"],["value","Protein C-term"],["value","Any N-term"],["value","Any C-term"],["type","text","placeholder","e.g., O, H3C2NO",1,"field-input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., 15.994915",1,"field-input",3,"ngModelChange","ngModel"],[1,"output-preview"],[1,"label"],[1,"validation-errors"],[1,"suggestion-item"],[1,"suggestion-item",3,"click"],[1,"suggestion-name"],[1,"suggestion-accession"],[1,"suggestion-mass"],[1,"error"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"label"),p(3,"Name of Term (NT)*"),c(),u(4,"div",2)(5,"input",3),b("ngModelChange",function(r){return o.updateNt(r)})("input",function(r){return o.onNtInput(r)}),c(),A(6,ab,3,0,"div",4),c()(),u(7,"div",1)(8,"label"),p(9,"Target Amino Acid (TA)*"),c(),u(10,"input",5),b("ngModelChange",function(r){return o.updateTa(r)}),c(),A(11,lb,2,1,"div",6),c(),u(12,"div",1)(13,"label"),p(14,"Modification Type (MT)"),c(),u(15,"select",7),b("ngModelChange",function(r){return o.updateMt(r)}),u(16,"option",8),p(17,"-- Select --"),c(),u(18,"option",9),p(19,"Fixed"),c(),u(20,"option",10),p(21,"Variable"),c(),u(22,"option",11),p(23,"Annotated"),c()()(),u(24,"div",1)(25,"label"),p(26,"Accession (AC)"),c(),u(27,"input",12),b("ngModelChange",function(r){return o.updateAc(r)}),c()(),u(28,"div",1)(29,"label"),p(30,"Position (PP)"),c(),u(31,"select",7),b("ngModelChange",function(r){return o.updatePp(r)}),u(32,"option",8),p(33,"-- Select --"),c(),u(34,"option",13),p(35,"Anywhere"),c(),u(36,"option",14),p(37,"Protein N-term"),c(),u(38,"option",15),p(39,"Protein C-term"),c(),u(40,"option",16),p(41,"Any N-term"),c(),u(42,"option",17),p(43,"Any C-term"),c()()(),u(44,"div",1)(45,"label"),p(46,"Chemical Formula (CF)"),c(),u(47,"input",18),b("ngModelChange",function(r){return o.updateCf(r)}),c()(),u(48,"div",1)(49,"label"),p(50,"Monoisotopic Mass (MM)"),c(),u(51,"input",19),b("ngModelChange",function(r){return o.updateMm(r)}),c()(),u(52,"div",20)(53,"span",21),p(54,"Output:"),c(),u(55,"code"),p(56),c()(),A(57,ub,3,0,"div",22),c()),t&2&&(m(5),T("ngModel",o.nt()),m(),M(o.suggestions().length>0?6:-1),m(4),T("ngModel",o.ta()),m(),M(o.selectedMod()&&o.selectedMod().sites.length>0?11:-1),m(4),T("ngModel",o.mt()),m(12),T("ngModel",o.ac()),m(4),T("ngModel",o.pp()),m(16),T("ngModel",o.cf()),m(4),T("ngModel",o.mm()),m(5),V(o.formattedValue()||"(empty)"),m(),M(o.validationErrors().length>0?57:-1))},dependencies:[xe,De,Xe,et,Ie,wt,Ne,Ac,Te],styles:[".modification-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px;border:1px solid #ddd;border-radius:4px;background:#fafafa}.field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#333}.field-input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;font-size:13px}.field-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}select.field-input[_ngcontent-%COMP%]{background:#fff}.autocomplete-wrapper[_ngcontent-%COMP%]{position:relative}.suggestions-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;max-height:200px;overflow-y:auto;background:#fff;border:1px solid #ddd;border-top:none;border-radius:0 0 4px 4px;box-shadow:0 4px 6px #0000001a;z-index:100}.suggestion-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;cursor:pointer;border-bottom:1px solid #eee}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-name[_ngcontent-%COMP%]{font-weight:500;flex:1}.suggestion-accession[_ngcontent-%COMP%]{font-size:11px;color:#666;font-family:monospace}.suggestion-mass[_ngcontent-%COMP%]{font-size:11px;color:#999}.hint[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-top:2px}.output-preview[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;padding:8px;background:#fff;border:1px solid #e0e0e0;border-radius:4px;margin-top:8px}.output-preview[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;flex-shrink:0}.output-preview[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#333;word-break:break-all}.validation-errors[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.validation-errors[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:12px;color:#d32f2f}"]})};var db=(n,e)=>e.accession;function fb(n,e){if(n&1&&(u(0,"option",4),p(1),c()),n&2){let t=e.$implicit;T("value",t.accession),m(),V(t.name)}}function pb(n,e){if(n&1&&(u(0,"span",12),p(1),c()),n&2){let t=e.$implicit;m(),V(t)}}function mb(n,e){if(n&1&&(u(0,"div",11),se(1,pb,2,1,"span",12,Pt),c()),n&2){let t=y();m(),ae(t.validationErrors())}}var hb=[{name:"Trypsin",accession:"MS:1001251",site:"[KR]|{P}"},{name:"Trypsin/P",accession:"MS:1001313",site:"[KR]"},{name:"Lys-C",accession:"MS:1001309",site:"K|"},{name:"Lys-N",accession:"MS:1001310",site:"|K"},{name:"Arg-C",accession:"MS:1001303",site:"R|{P}"},{name:"Asp-N",accession:"MS:1001304",site:"|D"},{name:"Chymotrypsin",accession:"MS:1001306",site:"[FYWL]|{P}"},{name:"Glu-C",accession:"MS:1001917",site:"[DE]|{P}"},{name:"PepsinA",accession:"MS:1001311",site:"[FL]|"},{name:"CNBr",accession:"MS:1001307",site:"M|"},{name:"no cleavage",accession:"MS:1001955",site:""},{name:"unspecific cleavage",accession:"MS:1001956",site:""}],hs=class n{value="";valueChange=new L;syntaxService=new kt;commonAgents=hb;nt=S("");ac=S("");cs=S("");validationErrors=S([]);formattedValue=le(()=>{let e={};return this.nt()&&(e.NT=this.nt()),this.ac()&&(e.AC=this.ac()),this.cs()&&(e.CS=this.cs()),this.syntaxService.formatValue("cleavage",e)});ngOnInit(){this.parseValue()}ngOnChanges(e){e.value&&!e.value.firstChange&&this.parseValue()}parseValue(){if(!this.value){this.resetFields();return}let e=this.syntaxService.parseValue("cleavage",this.value);e?(this.nt.set(e.NT||""),this.ac.set(e.AC||""),this.cs.set(e.CS||"")):this.resetFields()}resetFields(){this.nt.set(""),this.ac.set(""),this.cs.set("")}selectPreset(e){let t=e.target,o=t.value;if(!o)return;let i=this.commonAgents.find(r=>r.accession===o);i&&(this.nt.set(i.name),this.ac.set(i.accession),this.cs.set(i.site),this.emitValue()),t.value=""}updateNt(e){this.nt.set(e),this.emitValue()}updateAc(e){this.ac.set(e),this.emitValue()}updateCs(e){this.cs.set(e),this.emitValue()}emitValue(){let e=this.formattedValue();this.validate(e),this.valueChange.emit(e)}validate(e){if(!e){this.validationErrors.set([]);return}let t=this.syntaxService.parseValue("cleavage",e);if(t){let o=this.syntaxService.validateValue("cleavage",t);this.validationErrors.set([...o.errors,...o.warnings||[]])}else this.validationErrors.set(["Invalid cleavage agent format"])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-cleavage-input"]],inputs:{value:"value"},outputs:{valueChange:"valueChange"},features:[$e],decls:29,vars:5,consts:[[1,"cleavage-input-container"],[1,"field-group"],[1,"field-input",3,"change"],["value",""],[3,"value"],["type","text","placeholder","e.g., Trypsin",1,"field-input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., MS:1001251",1,"field-input",3,"ngModelChange","ngModel"],["type","text","placeholder","e.g., [KR]|{P}",1,"field-input",3,"ngModelChange","ngModel"],[1,"hint"],[1,"output-preview"],[1,"label"],[1,"validation-errors"],[1,"error"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"label"),p(3,"Quick Select"),c(),u(4,"select",2),b("change",function(r){return o.selectPreset(r)}),u(5,"option",3),p(6,"-- Select common enzyme --"),c(),se(7,fb,2,2,"option",4,db),c()(),u(9,"div",1)(10,"label"),p(11,"Name of Term (NT)*"),c(),u(12,"input",5),b("ngModelChange",function(r){return o.updateNt(r)}),c()(),u(13,"div",1)(14,"label"),p(15,"Accession (AC)"),c(),u(16,"input",6),b("ngModelChange",function(r){return o.updateAc(r)}),c()(),u(17,"div",1)(18,"label"),p(19,"Cleavage Site Regex (CS)"),c(),u(20,"input",7),b("ngModelChange",function(r){return o.updateCs(r)}),c(),u(21,"div",8),p(22," Format: [allowed]|{not allowed} \u2014 e.g., [KR]|{P} means cleave after K or R, not followed by P "),c()(),u(23,"div",9)(24,"span",10),p(25,"Output:"),c(),u(26,"code"),p(27),c()(),A(28,mb,3,0,"div",11),c()),t&2&&(m(7),ae(o.commonAgents),m(5),T("ngModel",o.nt()),m(4),T("ngModel",o.ac()),m(4),T("ngModel",o.cs()),m(7),V(o.formattedValue()||"(empty)"),m(),M(o.validationErrors().length>0?28:-1))},dependencies:[xe,De,Xe,et,Ie,Ne,Te],styles:[".cleavage-input-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:12px;border:1px solid #ddd;border-radius:4px;background:#fafafa}.field-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.field-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#333}.field-input[_ngcontent-%COMP%]{padding:8px;border:1px solid #ccc;border-radius:4px;font-size:13px}.field-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}select.field-input[_ngcontent-%COMP%]{background:#fff}.hint[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-top:2px}.output-preview[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;padding:8px;background:#fff;border:1px solid #e0e0e0;border-radius:4px;margin-top:8px}.output-preview[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666;flex-shrink:0}.output-preview[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;color:#333;word-break:break-all}.validation-errors[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.validation-errors[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{font-size:12px;color:#d32f2f}"]})};var gb=(n,e)=>e.iri;function yb(n,e){n&1&&it(0,"span",3)}function vb(n,e){if(n&1&&(u(0,"div",11),p(1),Zr(2,"slice"),c()),n&2){let t=y().$implicit;m(),yn(" ",Ep(2,2,t.description,0,100),"",t.description.length>100?"...":""," ")}}function _b(n,e){if(n&1){let t=R();u(0,"div",7),b("mousedown",function(){let i=x(t).$implicit,r=y(2);return D(r.selectSuggestion(i))}),u(1,"div",8)(2,"span",9),p(3),c(),u(4,"span",10),p(5),c()(),A(6,vb,3,6,"div",11),c()}if(n&2){let t=e.$implicit,o=e.$index,i=y(2);re("selected",i.selectedIndex()===o),m(3),V(t.label),m(2),V(t.id),m(),M(t.description?6:-1)}}function Cb(n,e){if(n&1&&(u(0,"div",4),se(1,_b,7,5,"div",6,gb),c()),n&2){let t=y();m(),ae(t.suggestions())}}function bb(n,e){n&1&&(u(0,"div",4)(1,"div",12),p(2,"No results found"),c()())}function wb(n,e){if(n&1){let t=R();u(0,"div",5)(1,"span",13),p(2),c(),u(3,"span",14),p(4),c(),u(5,"button",15),b("click",function(){x(t);let i=y();return D(i.clearSelection())}),p(6,"\xD7"),c()()}if(n&2){let t=y();m(2),V(t.selectedTerm().label),m(2),ne("(",t.selectedTerm().id,")")}}var xb={organism:{ontologies:["ncbitaxon"],searchMethod:"searchOrganism"},disease:{ontologies:["efo","mondo","doid"],searchMethod:"searchDisease"},"cell type":{ontologies:["cl","bto"],searchMethod:"searchCellType"},"cell line":{ontologies:["clo","efo","bto"]},tissue:{ontologies:["uberon","bto"],searchMethod:"searchTissue"},organ:{ontologies:["uberon"]},"developmental stage":{ontologies:["uberon","efo"]},sex:{ontologies:["pato"]},"ancestry category":{ontologies:["hancestro"]},instrument:{ontologies:["ms"],searchMethod:"searchInstrument"},"enrichment process":{ontologies:["sep","obi"]},label:{ontologies:["ms","pride"]},"fraction identifier":{ontologies:["ms"]},"technical replicate":{ontologies:[]},"data file":{ontologies:[]}},gs=class n{constructor(e){this.elementRef=e}value="";columnName="";ontologies=[];placeholder="Type to search...";allowFreeText=!0;valueChange=new L;termSelected=new L;olsService=new Vn;searchTimeout;inputValue=S("");suggestions=S([]);selectedTerm=S(null);showDropdown=S(!1);loading=S(!1);selectedIndex=S(-1);ngOnInit(){this.inputValue.set(this.value)}ngOnChanges(e){e.value&&!e.value.firstChange&&this.inputValue.set(this.value)}onDocumentClick(e){this.elementRef.nativeElement.contains(e.target)||this.showDropdown.set(!1)}onKeyDown(e){if(!this.showDropdown())return;let t=this.suggestions();switch(e.key){case"ArrowDown":e.preventDefault(),this.selectedIndex.set(Math.min(this.selectedIndex()+1,t.length-1));break;case"ArrowUp":e.preventDefault(),this.selectedIndex.set(Math.max(this.selectedIndex()-1,-1));break;case"Enter":e.preventDefault(),this.selectedIndex()>=0&&t[this.selectedIndex()]?this.selectSuggestion(t[this.selectedIndex()]):this.allowFreeText&&this.emitValue();break;case"Escape":this.showDropdown.set(!1);break}}onInputChange(e){this.inputValue.set(e),this.selectedTerm.set(null),this.selectedIndex.set(-1),clearTimeout(this.searchTimeout),e.length>=2?(this.loading.set(!0),this.searchTimeout=setTimeout(()=>{this.search(e)},300)):(this.suggestions.set([]),this.loading.set(!1)),this.allowFreeText&&this.valueChange.emit(e)}onFocus(){(this.suggestions().length>0||this.inputValue().length>=2)&&this.showDropdown.set(!0)}onBlur(){setTimeout(()=>{this.allowFreeText&&this.emitValue()},200)}selectSuggestion(e){this.inputValue.set(e.label),this.selectedTerm.set(e),this.showDropdown.set(!1),this.suggestions.set([]),this.valueChange.emit(e.label),this.termSelected.emit(e)}clearSelection(){this.inputValue.set(""),this.selectedTerm.set(null),this.valueChange.emit(""),this.termSelected.emit(null)}search(e){return O(this,null,function*(){let t=this.getOntologyConfig();try{let o;if(t.searchMethod){let i=t.searchMethod;o=yield this.olsService[i](e,10)}else t.ontologies.length>0?o=(yield this.olsService.search({query:e,ontology:t.ontologies,rows:10})).suggestions:o=(yield this.olsService.search({query:e,rows:10})).suggestions;this.suggestions.set(o),this.showDropdown.set(!0)}catch(o){console.error("Ontology search error:",o),this.suggestions.set([])}finally{this.loading.set(!1)}})}getOntologyConfig(){if(this.ontologies.length>0)return{ontologies:this.ontologies};let e=this.columnName.toLowerCase().match(/\[(.*?)\]/),t=e?e[1]:this.columnName.toLowerCase();return xb[t]||{ontologies:[]}}emitValue(){this.valueChange.emit(this.inputValue())}static \u0275fac=function(t){return new(t||n)(me(Ct))};static \u0275cmp=we({type:n,selectors:[["sdrf-ontology-input"]],hostBindings:function(t,o){t&1&&b("click",function(r){return o.onDocumentClick(r)},!1,If)("keydown",function(r){return o.onKeyDown(r)})},inputs:{value:"value",columnName:"columnName",ontologies:"ontologies",placeholder:"placeholder",allowFreeText:"allowFreeText"},outputs:{valueChange:"valueChange",termSelected:"termSelected"},features:[$e],decls:7,vars:6,consts:[[1,"ontology-input-container"],[1,"input-wrapper"],["type","text",1,"field-input",3,"ngModelChange","focus","blur","ngModel","placeholder"],[1,"loading-indicator"],[1,"suggestions-dropdown"],[1,"selected-term"],[1,"suggestion-item",3,"selected"],[1,"suggestion-item",3,"mousedown"],[1,"suggestion-main"],[1,"suggestion-label"],[1,"suggestion-id"],[1,"suggestion-description"],[1,"no-results"],[1,"term-label"],[1,"term-id"],[1,"clear-btn",3,"click"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"input",2),b("ngModelChange",function(r){return o.onInputChange(r)})("focus",function(){return o.onFocus()})("blur",function(){return o.onBlur()}),c(),A(3,yb,1,0,"span",3),c(),A(4,Cb,3,0,"div",4)(5,bb,3,0,"div",4)(6,wb,7,2,"div",5),c()),t&2&&(m(2),T("ngModel",o.inputValue())("placeholder",o.placeholder),m(),M(o.loading()?3:-1),m(),M(o.showDropdown()&&o.suggestions().length>0?4:-1),m(),M(o.showDropdown()&&!o.loading()&&o.suggestions().length===0&&o.inputValue().length>=2?5:-1),m(),M(o.selectedTerm()?6:-1))},dependencies:[xe,mc,De,Ie,Ne,Te],styles:[".ontology-input-container[_ngcontent-%COMP%]{position:relative;width:100%}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.field-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;font-size:13px}.field-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.loading-indicator[_ngcontent-%COMP%]{position:absolute;right:8px;width:16px;height:16px;border:2px solid #ddd;border-top-color:#2196f3;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.suggestions-dropdown[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;max-height:250px;overflow-y:auto;background:#fff;border:1px solid #ddd;border-top:none;border-radius:0 0 4px 4px;box-shadow:0 4px 8px #00000026;z-index:100}.suggestion-item[_ngcontent-%COMP%]{padding:8px 12px;cursor:pointer;border-bottom:1px solid #eee}.suggestion-item[_ngcontent-%COMP%]:hover, .suggestion-item.selected[_ngcontent-%COMP%]{background:#f0f7ff}.suggestion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.suggestion-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.suggestion-label[_ngcontent-%COMP%]{font-weight:500;flex:1}.suggestion-id[_ngcontent-%COMP%]{font-size:11px;color:#666;font-family:monospace;background:#f0f0f0;padding:2px 4px;border-radius:2px}.suggestion-description[_ngcontent-%COMP%]{font-size:11px;color:#666;margin-top:4px;line-height:1.3}.no-results[_ngcontent-%COMP%]{padding:12px;text-align:center;color:#666;font-size:13px}.selected-term[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-top:6px;padding:6px 8px;background:#e3f2fd;border-radius:4px;font-size:12px}.term-label[_ngcontent-%COMP%]{font-weight:500}.term-id[_ngcontent-%COMP%]{color:#666;font-family:monospace}.clear-btn[_ngcontent-%COMP%]{margin-left:auto;background:none;border:none;font-size:16px;cursor:pointer;color:#666;padding:0 4px}.clear-btn[_ngcontent-%COMP%]:hover{color:#d32f2f}"]})};var Db=["textInput"];function Eb(n,e){if(n&1){let t=R();u(0,"button",20),b("click",function(){x(t);let i=y();return D(i.toggleExpand())}),p(1),c()}if(n&2){let t=y();m(),ne(" ",t.isExpanded()?"Collapse":"Expand"," ")}}function Sb(n,e){if(n&1){let t=R();u(0,"sdrf-age-input",21),b("valueChange",function(i){x(t);let r=y();return D(r.onValueChange(i))}),c()}if(n&2){let t=y();T("value",t.value)}}function Mb(n,e){if(n&1){let t=R();u(0,"sdrf-modification-input",21),b("valueChange",function(i){x(t);let r=y();return D(r.onValueChange(i))}),c()}if(n&2){let t=y();T("value",t.value)}}function Ib(n,e){if(n&1){let t=R();u(0,"sdrf-cleavage-input",21),b("valueChange",function(i){x(t);let r=y();return D(r.onValueChange(i))}),c()}if(n&2){let t=y();T("value",t.value)}}function Tb(n,e){if(n&1){let t=R();u(0,"sdrf-ontology-input",22),b("valueChange",function(i){x(t);let r=y();return D(r.onValueChange(i))}),c()}if(n&2){let t=y();T("value",t.value)("columnName",(t.column==null?null:t.column.name)||"")("placeholder","Search "+t.getColumnTypeLabel()+"...")}}function Ob(n,e){if(n&1&&(u(0,"option",6),p(1),c()),n&2){let t=e.$implicit;T("value",t),m(),V(t)}}function Ab(n,e){if(n&1){let t=R();u(0,"select",23),b("ngModelChange",function(i){x(t);let r=y();return D(r.onValueChange(i))}),u(1,"option",24),p(2,"-- Select --"),c(),se(3,Ob,2,2,"option",6,gn),c()}if(n&2){let t=y();T("ngModel",t.value),m(3),ae(t.selectOptions())}}function Nb(n,e){if(n&1){let t=R();u(0,"textarea",27,0),b("ngModelChange",function(i){x(t);let r=y(2);return D(r.onValueChange(i))})("keydown.escape",function(){x(t);let i=y(2);return D(i.onCancel())}),c()}if(n&2){let t=y(2);T("ngModel",t.value)}}function Pb(n,e){if(n&1){let t=R();u(0,"input",28,0),b("ngModelChange",function(i){x(t);let r=y(2);return D(r.onValueChange(i))})("keydown.enter",function(){x(t);let i=y(2);return D(i.onSave())})("keydown.escape",function(){x(t);let i=y(2);return D(i.onCancel())}),c()}if(n&2){let t=y(2);T("ngModel",t.value)}}function kb(n,e){if(n&1&&A(0,Nb,2,1,"textarea",25)(1,Pb,2,1,"input",26),n&2){let t=y();M(t.isExpanded()?0:1)}}function Rb(n,e){if(n&1){let t=R();u(0,"button",29),b("click",function(){x(t);let i=y();return D(i.onClear())}),p(1,"Clear"),c()}}var Sm={"pooled sample":["not pooled","pooled"],"synthetic peptide":["synthetic","not synthetic"],labeling:["label free sample","SILAC","TMT","iTRAQ"]},Fb=["organism","disease","cell type","cell line","tissue","organ","developmental stage","sex","ancestry category","instrument","enrichment process","label"],ys=class n{value="";column;rowIndex=1;save=new L;cancel=new L;textInput;syntaxService=new kt;isExpanded=S(!1);currentValue=S("");editorMode=le(()=>{if(!this.column)return"text";let e=this.syntaxService.detectSpecialSyntax(this.column.name,this.column.type);if(e)return this.syntaxTypeToEditorMode(e);let t=this.getColumnTypeFromName(this.column.name);return Sm[t]?"select":Fb.includes(t)||this.column.ontologyType?"ontology":"text"});selectOptions=le(()=>{if(!this.column)return[];let e=this.getColumnTypeFromName(this.column.name);return Sm[e]||[]});ngOnInit(){this.currentValue.set(this.value)}ngOnChanges(e){e.value&&!e.value.firstChange&&this.currentValue.set(this.value)}ngAfterViewInit(){setTimeout(()=>{this.textInput?.nativeElement?.focus(),this.textInput?.nativeElement instanceof HTMLInputElement&&this.textInput.nativeElement.select()},50)}getModeLabel(){switch(this.editorMode()){case"age":return"Age";case"modification":return"Modification";case"cleavage":return"Cleavage";case"ontology":return"Ontology";case"select":return"Select";default:return"Text"}}getColumnTypeLabel(){return this.column?this.getColumnTypeFromName(this.column.name):"term"}canExpand(){return this.editorMode()==="text"}canClear(){return this.value!==""}toggleExpand(){this.isExpanded.set(!this.isExpanded())}onValueChange(e){this.currentValue.set(e),this.value=e}onSave(){this.save.emit(this.currentValue())}onCancel(){this.cancel.emit()}onClear(){this.currentValue.set(""),this.value=""}setSpecialValue(e){this.currentValue.set(e),this.value=e}syntaxTypeToEditorMode(e){switch(e){case"age":return"age";case"modification":return"modification";case"cleavage":return"cleavage";case"pooled_sample":case"synthetic_peptide":return"select";default:return"text"}}getColumnTypeFromName(e){let t=e.toLowerCase().match(/\[(.*?)\]/);return t?t[1]:e.toLowerCase()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-cell-editor"]],viewQuery:function(t,o){if(t&1&&Wr(Db,5),t&2){let i;Kr(i=Yr())&&(o.textInput=i.first)}},inputs:{value:"value",column:"column",rowIndex:"rowIndex"},outputs:{save:"save",cancel:"cancel"},features:[$e],decls:30,vars:16,consts:[["textInput",""],[1,"cell-editor-container"],[1,"editor-header"],[1,"mode-badge"],[1,"expand-btn"],[1,"editor-content"],[3,"value"],[3,"value","columnName","placeholder"],[1,"select-input",3,"ngModel"],[1,"editor-actions"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-link"],[1,"reserved-options"],[1,"reserved-label"],[1,"reserved-btns"],["title","Value is not available - data was not collected or cannot be determined",1,"reserved-btn","not-available",3,"click"],["title","Value is not applicable - does not apply to this sample type",1,"reserved-btn","not-applicable",3,"click"],["title","Value is anonymized - hidden for privacy/ethical reasons",1,"reserved-btn","anonymized",3,"click"],["title","Value is pooled - sample is a pool of multiple sources",1,"reserved-btn","pooled",3,"click"],[1,"expand-btn",3,"click"],[3,"valueChange","value"],[3,"valueChange","value","columnName","placeholder"],[1,"select-input",3,"ngModelChange","ngModel"],["value",""],["rows","4",1,"text-input","textarea",3,"ngModel"],["type","text",1,"text-input",3,"ngModel"],["rows","4",1,"text-input","textarea",3,"ngModelChange","keydown.escape","ngModel"],["type","text",1,"text-input",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"btn","btn-link",3,"click"]],template:function(t,o){if(t&1&&(u(0,"div",1)(1,"div",2)(2,"span",3),p(3),c(),A(4,Eb,2,1,"button",4),c(),u(5,"div",5),A(6,Sb,1,1,"sdrf-age-input",6)(7,Mb,1,1,"sdrf-modification-input",6)(8,Ib,1,1,"sdrf-cleavage-input",6)(9,Tb,1,3,"sdrf-ontology-input",7)(10,Ab,5,1,"select",8)(11,kb,2,1),c(),u(12,"div",9)(13,"button",10),b("click",function(){return o.onSave()}),p(14,"Save"),c(),u(15,"button",11),b("click",function(){return o.onCancel()}),p(16,"Cancel"),c(),A(17,Rb,2,0,"button",12),c(),u(18,"div",13)(19,"span",14),p(20,"Reserved values:"),c(),u(21,"div",15)(22,"button",16),b("click",function(){return o.setSpecialValue("not available")}),p(23," not available "),c(),u(24,"button",17),b("click",function(){return o.setSpecialValue("not applicable")}),p(25," not applicable "),c(),u(26,"button",18),b("click",function(){return o.setSpecialValue("anonymized")}),p(27," anonymized "),c(),u(28,"button",19),b("click",function(){return o.setSpecialValue("pooled")}),p(29," pooled "),c()()()()),t&2){let i;re("expanded",o.isExpanded()),m(2),Fn(o.editorMode()),m(),ne(" ",o.getModeLabel()," "),m(),M(o.canExpand()?4:-1),m(2),M((i=o.editorMode())==="age"?6:i==="modification"?7:i==="cleavage"?8:i==="ontology"?9:i==="select"?10:11),m(11),M(o.canClear()?17:-1),m(5),re("active",o.value.toLowerCase()==="not available"),m(2),re("active",o.value.toLowerCase()==="not applicable"),m(2),re("active",o.value.toLowerCase()==="anonymized"),m(2),re("active",o.value.toLowerCase()==="pooled")}},dependencies:[xe,De,Xe,et,Ie,wt,Ne,Te,ps,ms,hs,gs],styles:[".cell-editor-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding:12px;background:#fff;border:1px solid #ddd;border-radius:6px;box-shadow:0 4px 12px #00000026;min-width:280px;max-width:400px}.cell-editor-container.expanded[_ngcontent-%COMP%]{min-width:350px;max-width:500px}.editor-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding-bottom:8px;border-bottom:1px solid #eee}.mode-badge[_ngcontent-%COMP%]{font-size:11px;font-weight:500;padding:2px 8px;border-radius:12px;background:#e0e0e0;color:#333}.mode-badge.age[_ngcontent-%COMP%]{background:#e3f2fd;color:#1565c0}.mode-badge.modification[_ngcontent-%COMP%]{background:#f3e5f5;color:#7b1fa2}.mode-badge.cleavage[_ngcontent-%COMP%]{background:#fff3e0;color:#ef6c00}.mode-badge.ontology[_ngcontent-%COMP%]{background:#e8f5e9;color:#2e7d32}.mode-badge.select[_ngcontent-%COMP%]{background:#fce4ec;color:#c2185b}.expand-btn[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;background:none;border:1px solid #ccc;border-radius:4px;cursor:pointer;color:#666}.expand-btn[_ngcontent-%COMP%]:hover{background:#f5f5f5}.editor-content[_ngcontent-%COMP%]{min-height:40px}.text-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;font-size:13px;font-family:inherit}.text-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.text-input.textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.select-input[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;font-size:13px;background:#fff}.select-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3;box-shadow:0 0 0 2px #2196f333}.editor-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding-top:8px;border-top:1px solid #eee}.btn[_ngcontent-%COMP%]{padding:6px 12px;border-radius:4px;font-size:12px;cursor:pointer;border:none}.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#1976d2}.btn-secondary[_ngcontent-%COMP%]{background:#e0e0e0;color:#333}.btn-secondary[_ngcontent-%COMP%]:hover{background:#d0d0d0}.btn-link[_ngcontent-%COMP%]{background:none;color:#666;padding:6px 8px}.btn-link[_ngcontent-%COMP%]:hover{color:#d32f2f;text-decoration:underline}.reserved-options[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px;padding-top:10px;border-top:1px dashed #ddd;margin-top:4px}.reserved-label[_ngcontent-%COMP%]{font-size:10px;text-transform:uppercase;letter-spacing:.5px;color:#888}.reserved-btns[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.reserved-btn[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px;font-style:italic;background:#f8f8f8;border:1px solid #e0e0e0;border-radius:4px;cursor:pointer;color:#888;transition:all .15s ease}.reserved-btn[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-color:#ccc}.reserved-btn.not-available[_ngcontent-%COMP%], .reserved-btn.not-applicable[_ngcontent-%COMP%]{color:#888}.reserved-btn.not-available[_ngcontent-%COMP%]:hover, .reserved-btn.not-applicable[_ngcontent-%COMP%]:hover{background:#9e9e9e26}.reserved-btn.not-available.active[_ngcontent-%COMP%], .reserved-btn.not-applicable.active[_ngcontent-%COMP%]{background:#9e9e9e33;border-color:#9e9e9e;color:#666}.reserved-btn.anonymized[_ngcontent-%COMP%]{color:#9c27b0}.reserved-btn.anonymized[_ngcontent-%COMP%]:hover{background:#9c27b01a}.reserved-btn.anonymized.active[_ngcontent-%COMP%]{background:#9c27b026;border-color:#9c27b0;color:#7b1fa2}.reserved-btn.pooled[_ngcontent-%COMP%]{color:#1976d2}.reserved-btn.pooled[_ngcontent-%COMP%]:hover{background:#2196f31a}.reserved-btn.pooled.active[_ngcontent-%COMP%]{background:#2196f326;border-color:#2196f3;color:#1565c0}"]})};var Vb=(n,e)=>e.columnPosition,Lb=(n,e)=>e.value;function jb(n,e){if(n&1&&(u(0,"option",5),p(1),c()),n&2){let t=e.$implicit,o=e.$index;T("value",o),m(),V(t.name)}}function Bb(n,e){if(n&1){let t=R();u(0,"div",21)(1,"input",22),ut("ngModelChange",function(i){x(t);let r=y(3);return ft(r.editNewValue,i)||(r.editNewValue=i),D(i)}),b("keydown.enter",function(){x(t);let i=y().$implicit,r=y(2);return D(r.applyEdit(i))})("keydown.escape",function(){x(t);let i=y(3);return D(i.cancelEdit())}),c(),u(2,"button",23),b("click",function(){x(t);let i=y().$implicit,r=y(2);return D(r.applyEdit(i))}),p(3," Apply "),c(),u(4,"button",24),b("click",function(){x(t);let i=y(3);return D(i.cancelEdit())}),p(5," Cancel "),c()()}if(n&2){let t=y(3);m(),ct("ngModel",t.editNewValue)}}function $b(n,e){if(n&1){let t=R();u(0,"button",25),b("click",function(i){x(t);let r=y().$implicit;return y(2).selectValue(r),D(i.stopPropagation())}),p(1," \u2611 "),c(),u(2,"button",26),b("click",function(i){x(t);let r=y().$implicit;return y(2).startEdit(r),D(i.stopPropagation())}),p(3," \u270E "),c()}}function Hb(n,e){if(n&1){let t=R();u(0,"div",13)(1,"div",14),b("click",function(){let i=x(t).$implicit,r=y(2);return D(r.onValueClick(i))}),u(2,"div",15),it(3,"div",16),c(),u(4,"span",17),p(5),c(),u(6,"span",18),p(7),u(8,"span",19),p(9),Zr(10,"number"),c()()(),u(11,"div",20),A(12,Bb,6,1,"div",21)(13,$b,4,0),c()()}if(n&2){let t=e.$implicit,o=y(2);re("selected",o.isValueSelected(t.value))("editing",o.editingValue()===t.value),m(3),sn("width",t.percentage,"%"),m(),T("title",t.value||"(empty)"),m(),ne(" ",t.value||"(empty)"," "),m(2),ne(" ",t.count," "),m(2),ne("(",Dp(10,11,t.percentage,"1.1-1"),"%)"),m(3),M(o.editingValue()===t.value?12:13)}}function Ub(n,e){if(n&1){let t=R();u(0,"div",6)(1,"div",7)(2,"span",8)(3,"strong"),p(4),c(),p(5," unique values "),c(),u(6,"span",8)(7,"strong"),p(8),c(),p(9," total samples "),c()(),u(10,"div",9),se(11,Hb,14,14,"div",10,Lb),c(),u(13,"div",11)(14,"button",12),b("click",function(){x(t);let i=y();return D(i.selectEmpty())}),p(15," Select Empty "),c(),u(16,"button",12),b("click",function(){x(t);let i=y();return D(i.selectAll())}),p(17," Select All "),c()()()}if(n&2){let t=y();m(4),V(t.uniqueValues().length),m(4),V((t.table==null?null:t.table.sampleCount)||0),m(3),ae(t.uniqueValues())}}var vs=class n{table=null;selectedSamples=new Set;close=new L;selectByValue=new L;bulkEdit=new L;selectSamples=new L;selectedColumnIndex=S(0);editingValue=S(null);editNewValue="";selectedColumn=le(()=>this.table&&this.table.columns[this.selectedColumnIndex()]||null);uniqueValues=le(()=>{let e=this.selectedColumn();if(!e||!this.table)return[];let t=new Map;for(let i=1;i<=this.table.sampleCount;i++){let r=dt(e,i);t.has(r)||t.set(r,[]),t.get(r).push(i)}let o=[];for(let[i,r]of t)o.push({value:i,count:r.length,percentage:r.length/this.table.sampleCount*100,sampleIndices:r});return o.sort((i,r)=>r.count-i.count),o});onColumnChange(e){this.selectedColumnIndex.set(Number(e)),this.cancelEdit()}isValueSelected(e){let t=this.uniqueValues().find(o=>o.value===e);return t?t.sampleIndices.every(o=>this.selectedSamples.has(o)):!1}onValueClick(e){this.selectValue(e)}selectValue(e){this.selectByValue.emit({columnIndex:this.selectedColumnIndex(),value:e.value,sampleIndices:e.sampleIndices})}startEdit(e){this.editingValue.set(e.value),this.editNewValue=e.value}cancelEdit(){this.editingValue.set(null),this.editNewValue=""}applyEdit(e){this.editNewValue!==e.value&&this.bulkEdit.emit({columnIndex:this.selectedColumnIndex(),oldValue:e.value,newValue:this.editNewValue,sampleIndices:e.sampleIndices}),this.cancelEdit()}selectEmpty(){let e=this.uniqueValues().find(t=>t.value==="");e&&this.selectSamples.emit(e.sampleIndices)}selectAll(){if(!this.table)return;let e=Array.from({length:this.table.sampleCount},(t,o)=>o+1);this.selectSamples.emit(e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-column-stats"]],inputs:{table:"table",selectedSamples:"selectedSamples"},outputs:{close:"close",selectByValue:"selectByValue",bulkEdit:"bulkEdit",selectSamples:"selectSamples"},decls:13,vars:2,consts:[[1,"column-stats-panel"],[1,"panel-header"],[1,"close-btn",3,"click"],[1,"column-selector"],[3,"ngModelChange","ngModel"],[3,"value"],[1,"stats-content"],[1,"stats-summary"],[1,"summary-item"],[1,"value-list"],[1,"value-item",3,"selected","editing"],[1,"quick-actions"],[1,"btn","btn-sm",3,"click"],[1,"value-item"],[1,"value-main",3,"click"],[1,"value-bar"],[1,"value-bar-fill"],[1,"value-text",3,"title"],[1,"value-count"],[1,"value-percentage"],[1,"value-actions"],[1,"edit-inline"],["type","text","placeholder","New value...",1,"edit-input",3,"ngModelChange","keydown.enter","keydown.escape","ngModel"],[1,"btn-sm","btn-primary",3,"click"],[1,"btn-sm",3,"click"],["title","Select all samples with this value",1,"btn-icon",3,"click"],["title","Edit all samples with this value",1,"btn-icon",3,"click"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"h3"),p(3,"Column Statistics"),c(),u(4,"button",2),b("click",function(){return o.close.emit()}),p(5,"\xD7"),c()(),u(6,"div",3)(7,"label"),p(8,"Select Column:"),c(),u(9,"select",4),b("ngModelChange",function(r){return o.onColumnChange(r)}),se(10,jb,2,2,"option",5,Vb),c()(),A(12,Ub,18,2,"div",6),c()),t&2&&(m(9),T("ngModel",o.selectedColumnIndex()),m(),ae(o.table==null?null:o.table.columns),m(2),M(o.selectedColumn()?12:-1))},dependencies:[xe,pc,De,Xe,et,Ie,wt,Ne,Te],styles:[".column-stats-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#f8f9fa;border-left:1px solid #ddd;width:320px;font-size:13px}.panel-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#fff;border-bottom:1px solid #ddd}.panel-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:600}.close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;color:#666;padding:0 4px}.close-btn[_ngcontent-%COMP%]:hover{color:#333}.column-selector[_ngcontent-%COMP%]{padding:12px 16px;background:#fff;border-bottom:1px solid #eee}.column-selector[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:6px;font-weight:500;color:#555}.column-selector[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px;border:1px solid #ccc;border-radius:4px;font-size:13px;background:#fff}.stats-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.stats-summary[_ngcontent-%COMP%]{display:flex;gap:16px;padding:12px 16px;background:#fff;border-bottom:1px solid #eee}.summary-item[_ngcontent-%COMP%]{font-size:12px;color:#666}.summary-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.value-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px 0}.value-item[_ngcontent-%COMP%]{padding:8px 16px;border-bottom:1px solid #eee;transition:background .15s}.value-item[_ngcontent-%COMP%]:hover{background:#fff}.value-item.selected[_ngcontent-%COMP%]{background:#e3f2fd}.value-item.editing[_ngcontent-%COMP%]{background:#fff3e0}.value-main[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer}.value-bar[_ngcontent-%COMP%]{width:40px;height:6px;background:#e0e0e0;border-radius:3px;overflow:hidden;flex-shrink:0}.value-bar-fill[_ngcontent-%COMP%]{height:100%;background:#2196f3;border-radius:3px;transition:width .3s}.value-text[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;min-width:0}.value-count[_ngcontent-%COMP%]{font-weight:500;color:#333;flex-shrink:0}.value-percentage[_ngcontent-%COMP%]{font-weight:400;color:#999;font-size:11px}.value-actions[_ngcontent-%COMP%]{display:flex;gap:4px;margin-top:6px}.btn-icon[_ngcontent-%COMP%]{background:none;border:1px solid #ddd;border-radius:4px;padding:4px 8px;cursor:pointer;font-size:12px}.btn-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0;border-color:#ccc}.edit-inline[_ngcontent-%COMP%]{display:flex;gap:4px;flex:1}.edit-input[_ngcontent-%COMP%]{flex:1;padding:4px 8px;border:1px solid #2196f3;border-radius:4px;font-size:12px}.btn-sm[_ngcontent-%COMP%]{padding:4px 8px;font-size:11px;border:1px solid #ccc;border-radius:4px;background:#fff;cursor:pointer}.btn-sm[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn-sm.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff;border-color:#2196f3}.btn-sm.btn-primary[_ngcontent-%COMP%]:hover{background:#1976d2}.quick-actions[_ngcontent-%COMP%]{display:flex;gap:8px;padding:12px 16px;background:#fff;border-top:1px solid #ddd}.quick-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1}"]})};var zb=(n,e)=>e.columnPosition;function Gb(n,e){if(n&1&&(u(0,"option",8),p(1),c()),n&2){let t=e.$implicit,o=e.$index;T("value",o),m(),V(t.name)}}function qb(n,e){if(n&1){let t=R();u(0,"input",12),ut("ngModelChange",function(i){x(t);let r=y();return ft(r.newValue,i)||(r.newValue=i),D(i)}),b("keydown.enter",function(){x(t);let i=y();return D(i.applyBulkEdit())}),c(),u(1,"button",13),b("click",function(){x(t);let i=y();return D(i.applyBulkEdit())}),p(2," Apply to Selected "),c()}if(n&2){let t=y();ct("ngModel",t.newValue),m(),T("disabled",!t.newValue)}}function Wb(n,e){if(n&1){let t=R();u(0,"div",11)(1,"div",14)(2,"p"),p(3),c(),u(4,"div",15)(5,"button",16),b("click",function(){x(t);let i=y();return D(i.confirmAction())}),p(6," Confirm "),c(),u(7,"button",17),b("click",function(){x(t);let i=y();return D(i.cancelConfirm())}),p(8," Cancel "),c()()()()}if(n&2){let t=y();m(3),V(t.confirmMessage())}}var _s=class n{table=null;selectedCount=0;selectedSamples=new Set;clearSelection=new L;bulkEdit=new L;copyFromFirst=new L;selectedColumnIndex=-1;newValue="";showConfirm=S(!1);confirmMessage=S("");pendingAction=null;applyBulkEdit(){if(this.selectedColumnIndex<0||!this.newValue)return;let e=Array.from(this.selectedSamples);this.confirmMessage.set(`Apply "${this.newValue}" to ${e.length} samples in column "${this.table?.columns[this.selectedColumnIndex]?.name}"?`),this.pendingAction=()=>{this.bulkEdit.emit({columnIndex:this.selectedColumnIndex,newValue:this.newValue,sampleIndices:e}),this.newValue=""},this.showConfirm.set(!0)}copyFirstValue(){this.selectedColumnIndex<0||(this.confirmMessage.set(`Copy value from first selected sample to all ${this.selectedSamples.size} selected samples?`),this.pendingAction=()=>{this.copyFromFirst.emit(this.selectedColumnIndex)},this.showConfirm.set(!0))}clearValues(){if(this.selectedColumnIndex<0)return;let e=Array.from(this.selectedSamples);this.confirmMessage.set(`Clear values for ${e.length} samples in column "${this.table?.columns[this.selectedColumnIndex]?.name}"?`),this.pendingAction=()=>{this.bulkEdit.emit({columnIndex:this.selectedColumnIndex,newValue:"",sampleIndices:e})},this.showConfirm.set(!0)}confirmAction(){this.pendingAction&&this.pendingAction(),this.cancelConfirm()}cancelConfirm(){this.showConfirm.set(!1),this.pendingAction=null}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-bulk-toolbar"]],inputs:{table:"table",selectedCount:"selectedCount",selectedSamples:"selectedSamples"},outputs:{clearSelection:"clearSelection",bulkEdit:"bulkEdit",copyFromFirst:"copyFromFirst"},decls:22,vars:6,consts:[[1,"bulk-toolbar"],[1,"toolbar-info"],[1,"selection-count"],[1,"btn-link",3,"click"],[1,"toolbar-actions"],[1,"action-group"],[1,"column-select",3,"ngModelChange","ngModel"],["value","-1"],[3,"value"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-danger",3,"click"],[1,"confirm-overlay"],["type","text","placeholder","Enter new value...",1,"value-input",3,"ngModelChange","keydown.enter","ngModel"],[1,"btn","btn-primary",3,"click","disabled"],[1,"confirm-dialog"],[1,"confirm-actions"],[1,"btn","btn-primary",3,"click"],[1,"btn",3,"click"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"span",2)(3,"strong"),p(4),c(),p(5," samples selected "),c(),u(6,"button",3),b("click",function(){return o.clearSelection.emit()}),p(7," Clear selection "),c()(),u(8,"div",4)(9,"div",5)(10,"select",6),ut("ngModelChange",function(r){return ft(o.selectedColumnIndex,r)||(o.selectedColumnIndex=r),r}),u(11,"option",7),p(12,"Select column..."),c(),se(13,Gb,2,2,"option",8,zb),c(),A(15,qb,3,2),c(),u(16,"div",5)(17,"button",9),b("click",function(){return o.copyFirstValue()}),p(18," Copy from First "),c(),u(19,"button",10),b("click",function(){return o.clearValues()}),p(20," Clear Values "),c()()(),A(21,Wb,9,1,"div",11),c()),t&2&&(re("visible",o.selectedCount>0),m(4),V(o.selectedCount),m(6),ct("ngModel",o.selectedColumnIndex),m(3),ae(o.table==null?null:o.table.columns),m(2),M(o.selectedColumnIndex>=0?15:-1),m(6),M(o.showConfirm()?21:-1))},dependencies:[xe,De,Xe,et,Ie,wt,Ne,Te],styles:[".bulk-toolbar[_ngcontent-%COMP%]{display:none;background:linear-gradient(135deg,#1a237e,#283593);color:#fff;padding:12px 16px;gap:16px;align-items:center;flex-wrap:wrap;position:relative}.bulk-toolbar.visible[_ngcontent-%COMP%]{display:flex}.toolbar-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.selection-count[_ngcontent-%COMP%]{font-size:14px}.selection-count[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:18px}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#fffc;cursor:pointer;font-size:12px;text-decoration:underline}.btn-link[_ngcontent-%COMP%]:hover{color:#fff}.toolbar-actions[_ngcontent-%COMP%]{display:flex;gap:16px;flex:1;flex-wrap:wrap}.action-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.column-select[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background:#ffffff1a;color:#fff;font-size:13px;min-width:180px}.column-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background:#1a237e;color:#fff}.value-input[_ngcontent-%COMP%]{padding:8px 12px;border:1px solid rgba(255,255,255,.3);border-radius:4px;background:#fffffff2;font-size:13px;min-width:200px}.value-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#fff}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:13px;cursor:pointer;transition:all .2s}.btn-primary[_ngcontent-%COMP%]{background:#4caf50;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#43a047}.btn-primary[_ngcontent-%COMP%]:disabled{background:#fff3;cursor:not-allowed}.btn-secondary[_ngcontent-%COMP%]{background:#fff3;color:#fff;border:1px solid rgba(255,255,255,.3)}.btn-secondary[_ngcontent-%COMP%]:hover{background:#ffffff4d}.btn-danger[_ngcontent-%COMP%]{background:#f44336;color:#fff}.btn-danger[_ngcontent-%COMP%]:hover{background:#e53935}.confirm-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:10}.confirm-dialog[_ngcontent-%COMP%]{background:#fff;color:#333;padding:20px;border-radius:8px;box-shadow:0 4px 20px #0000004d;max-width:400px}.confirm-dialog[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 16px}.confirm-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.confirm-actions[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{color:#333;background:#e0e0e0}.confirm-actions[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}"]})};var Kb=(n,e)=>e.columnPosition;function Yb(n,e){if(n&1&&(u(0,"option",4),p(1),c()),n&2){let t=e.$implicit,o=e.$index;T("value",o),m(),V(t.name)}}function Zb(n,e){if(n&1){let t=R();u(0,"div",18),b("mousedown",function(){let i=x(t).$implicit,r=y(3);return D(r.selectSuggestion(i))}),p(1),c()}if(n&2){let t=e.$implicit;m(),ne(" ",t," ")}}function Qb(n,e){if(n&1&&(u(0,"div",16),se(1,Zb,2,1,"div",17,gn),c()),n&2){let t=y(2);m(),ae(t.valueSuggestions().slice(0,10))}}function Jb(n,e){if(n&1){let t=R();u(0,"div",12)(1,"input",15),ut("ngModelChange",function(i){x(t);let r=y();return ft(r.newFilterValue,i)||(r.newFilterValue=i),D(i)}),b("focus",function(){x(t);let i=y();return D(i.showSuggestions=!0)})("blur",function(){x(t);let i=y();return D(i.onInputBlur())})("keydown.enter",function(){x(t);let i=y();return D(i.addFilter())}),c(),A(2,Qb,3,0,"div",16),c()}if(n&2){let t=y();m(),ct("ngModel",t.newFilterValue),m(),M(t.showSuggestions&&t.valueSuggestions().length>0?2:-1)}}function Xb(n,e){if(n&1&&(u(0,"span",24),p(1),c()),n&2){let t=y().$implicit;m(),ne('"',t.value,'"')}}function ew(n,e){if(n&1){let t=R();u(0,"span",19)(1,"span",22),p(2),c(),u(3,"span",23),p(4),c(),A(5,Xb,2,1,"span",24),u(6,"button",25),b("click",function(){let i=x(t).$index,r=y(2);return D(r.removeFilter(i))}),p(7,"\xD7"),c()()}if(n&2){let t=e.$implicit,o=y(2);m(2),V(t.columnName),m(2),V(o.getOperatorLabel(t.operator)),m(),M(t.value?5:-1)}}function tw(n,e){if(n&1){let t=R();u(0,"div",14),se(1,ew,8,3,"span",19,Pt),u(3,"button",20),b("click",function(){x(t);let i=y();return D(i.clearFilters())}),p(4,"Clear all"),c(),u(5,"span",21),p(6),c()()}if(n&2){let t=y();m(),ae(t.filters()),m(5),yn(" ",t.filterResult().matchingIndices.length," of ",t.filterResult().totalCount," samples ")}}var Cs=class n{table=null;filterChange=new L;newFilterColumn=-1;newFilterOperator="equals";newFilterValue="";showSuggestions=!1;filters=S([]);filterResult=le(()=>{if(!this.table)return{matchingIndices:[],totalCount:0};let e=this.filters();if(e.length===0)return{matchingIndices:Array.from({length:this.table.sampleCount},(i,r)=>r+1),totalCount:this.table.sampleCount};let t=[];for(let o=1;o<=this.table.sampleCount;o++)this.rowMatchesAllFilters(o,e)&&t.push(o);return{matchingIndices:t,totalCount:this.table.sampleCount}});valueSuggestions=le(()=>{if(!this.table||this.newFilterColumn<0)return[];let e=this.table.columns[this.newFilterColumn];if(!e)return[];let t=new Set;for(let o=1;o<=this.table.sampleCount;o++){let i=dt(e,o);i&&i.toLowerCase().includes(this.newFilterValue.toLowerCase())&&t.add(i)}return Array.from(t).sort()});canAddFilter(){return this.newFilterColumn<0?!1:this.newFilterOperator==="is_empty"||this.newFilterOperator==="is_not_empty"?!0:this.newFilterValue.trim().length>0}addFilter(){if(!this.canAddFilter()||!this.table)return;let e=this.table.columns[this.newFilterColumn],t={columnIndex:this.newFilterColumn,columnName:e.name,operator:this.newFilterOperator,value:this.newFilterValue.trim()};this.filters.set([...this.filters(),t]),this.emitFilterChange(),this.newFilterValue=""}removeFilter(e){let t=this.filters();this.filters.set([...t.slice(0,e),...t.slice(e+1)]),this.emitFilterChange()}clearFilters(){this.filters.set([]),this.emitFilterChange()}selectSuggestion(e){this.newFilterValue=e,this.showSuggestions=!1}onInputBlur(){setTimeout(()=>{this.showSuggestions=!1},200)}getOperatorLabel(e){switch(e){case"equals":return"=";case"contains":return"contains";case"starts_with":return"starts with";case"ends_with":return"ends with";case"is_empty":return"is empty";case"is_not_empty":return"is not empty"}}rowMatchesAllFilters(e,t){if(!this.table)return!1;for(let o of t){let i=this.table.columns[o.columnIndex];if(!i)continue;let r=dt(i,e);if(!this.matchesFilter(r,o))return!1}return!0}matchesFilter(e,t){let o=e.toLowerCase(),i=t.value.toLowerCase();switch(t.operator){case"equals":return o===i;case"contains":return o.includes(i);case"starts_with":return o.startsWith(i);case"ends_with":return o.endsWith(i);case"is_empty":return e.trim()==="";case"is_not_empty":return e.trim()!==""}}emitFilterChange(){this.filterChange.emit(this.filterResult())}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-filter-bar"]],inputs:{table:"table"},outputs:{filterChange:"filterChange"},decls:24,vars:7,consts:[[1,"filter-bar"],[1,"filter-controls"],[1,"filter-select",3,"ngModelChange","ngModel"],["value","-1"],[3,"value"],[1,"filter-select","operator",3,"ngModelChange","ngModel"],["value","equals"],["value","contains"],["value","starts_with"],["value","ends_with"],["value","is_empty"],["value","is_not_empty"],[1,"value-input-wrapper"],[1,"btn","btn-primary",3,"click","disabled"],[1,"active-filters"],["type","text","placeholder","Value...",1,"filter-input",3,"ngModelChange","focus","blur","keydown.enter","ngModel"],[1,"suggestions"],[1,"suggestion-item"],[1,"suggestion-item",3,"mousedown"],[1,"filter-chip"],[1,"btn-link",3,"click"],[1,"filter-result"],[1,"filter-column"],[1,"filter-operator"],[1,"filter-value"],[1,"remove-btn",3,"click"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"div",1)(2,"select",2),ut("ngModelChange",function(r){return ft(o.newFilterColumn,r)||(o.newFilterColumn=r),r}),u(3,"option",3),p(4,"Select column..."),c(),se(5,Yb,2,2,"option",4,Kb),c(),u(7,"select",5),ut("ngModelChange",function(r){return ft(o.newFilterOperator,r)||(o.newFilterOperator=r),r}),u(8,"option",6),p(9,"equals"),c(),u(10,"option",7),p(11,"contains"),c(),u(12,"option",8),p(13,"starts with"),c(),u(14,"option",9),p(15,"ends with"),c(),u(16,"option",10),p(17,"is empty"),c(),u(18,"option",11),p(19,"is not empty"),c()(),A(20,Jb,3,2,"div",12),u(21,"button",13),b("click",function(){return o.addFilter()}),p(22," Add Filter "),c()(),A(23,tw,7,2,"div",14),c()),t&2&&(re("has-filters",o.filters().length>0),m(2),ct("ngModel",o.newFilterColumn),m(3),ae(o.table==null?null:o.table.columns),m(2),ct("ngModel",o.newFilterOperator),m(13),M(o.newFilterOperator!=="is_empty"&&o.newFilterOperator!=="is_not_empty"?20:-1),m(),T("disabled",!o.canAddFilter()),m(2),M(o.filters().length>0?23:-1))},dependencies:[xe,De,Xe,et,Ie,wt,Ne,Te],styles:[".filter-bar[_ngcontent-%COMP%]{padding:8px 16px;background:#f8f9fa;border-bottom:1px solid #ddd}.filter-bar.has-filters[_ngcontent-%COMP%]{background:#e3f2fd}.filter-controls[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;flex-wrap:wrap}.filter-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #ccc;border-radius:4px;font-size:13px;background:#fff}.filter-select.operator[_ngcontent-%COMP%]{min-width:120px}.value-input-wrapper[_ngcontent-%COMP%]{position:relative;flex:1;min-width:150px;max-width:250px}.filter-input[_ngcontent-%COMP%]{width:100%;padding:6px 10px;border:1px solid #ccc;border-radius:4px;font-size:13px}.filter-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#2196f3}.suggestions[_ngcontent-%COMP%]{position:absolute;top:100%;left:0;right:0;background:#fff;border:1px solid #ddd;border-top:none;border-radius:0 0 4px 4px;max-height:200px;overflow-y:auto;z-index:100;box-shadow:0 4px 6px #0000001a}.suggestion-item[_ngcontent-%COMP%]{padding:8px 10px;cursor:pointer;font-size:13px}.suggestion-item[_ngcontent-%COMP%]:hover{background:#f5f5f5}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:none;border-radius:4px;font-size:13px;cursor:pointer}.btn-primary[_ngcontent-%COMP%]{background:#2196f3;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#1976d2}.btn-primary[_ngcontent-%COMP%]:disabled{background:#ccc;cursor:not-allowed}.btn-link[_ngcontent-%COMP%]{background:none;border:none;color:#1976d2;cursor:pointer;font-size:12px;text-decoration:underline}.active-filters[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center;margin-top:8px;flex-wrap:wrap}.filter-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:4px 8px;background:#fff;border:1px solid #2196f3;border-radius:16px;font-size:12px}.filter-column[_ngcontent-%COMP%]{font-weight:500;color:#1976d2}.filter-operator[_ngcontent-%COMP%]{color:#666}.filter-value[_ngcontent-%COMP%]{color:#333}.remove-btn[_ngcontent-%COMP%]{background:none;border:none;color:#999;cursor:pointer;padding:0 2px;font-size:14px;line-height:1}.remove-btn[_ngcontent-%COMP%]:hover{color:#d32f2f}.filter-result[_ngcontent-%COMP%]{margin-left:auto;font-size:12px;color:#666;font-weight:500}"]})};var bs=class extends qc{name="openai";supportsStreaming=!0;constructor(e={}){super(e)}getProviderType(){return"openai"}complete(e){return O(this,null,function*(){this.validateConfiguration();let t=`${this.config.baseUrl}/chat/completions`,o={model:this.config.model,messages:this.convertMessages(e),max_tokens:this.config.maxTokens,temperature:this.config.temperature,stream:!1},i=yield this.fetchWithTimeout(t,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(o)});if(!i.ok){let s=yield i.text();throw this.createErrorFromResponse(i.status,s)}let r=yield i.json();return this.convertResponse(r)})}stream(e){return Di(this,null,function*(){this.validateConfiguration();let t=`${this.config.baseUrl}/chat/completions`,o={model:this.config.model,messages:this.convertMessages(e),max_tokens:this.config.maxTokens,temperature:this.config.temperature,stream:!0},i=yield new Jt(this.fetchStream(t,{method:"POST",headers:this.getHeaders(),body:JSON.stringify(o)}));try{for(var r=Un(this.parseSSEStream(i)),s,a,l;s=!(a=yield new Jt(r.next())).done;s=!1){let d=a.value;try{let h=JSON.parse(d).choices[0];h&&(yield{content:h.delta.content||"",done:h.finish_reason!==null,finishReason:h.finish_reason||void 0})}catch(f){console.warn("Failed to parse OpenAI stream chunk:",d,f)}}}catch{l=[a]}finally{try{s&&(a=r.return)&&(yield new Jt(a.call(r)))}finally{if(l)throw l[0]}}})}getHeaders(){return H(I({},this.getCommonHeaders()),{Authorization:`Bearer ${this.config.apiKey}`})}convertMessages(e){return e.map(t=>({role:t.role,content:t.content}))}convertResponse(e){let t=e.choices[0],o=e.usage?{promptTokens:e.usage.prompt_tokens,completionTokens:e.usage.completion_tokens,totalTokens:e.usage.total_tokens}:void 0;return{content:t?.message?.content||"",finishReason:this.mapFinishReason(t?.finish_reason),usage:o,raw:e}}mapFinishReason(e){switch(e){case"stop":return"stop";case"length":return"length";case"content_filter":return"content_filter";default:return}}};var nw=["not available","not applicable","anonymized","pooled"],ow={maxSampleRows:10,maxUniqueValues:20,includeSampleData:!0,maxContextLength:8e3},Ln=class{config;constructor(e={}){this.config=I(I({},ow),e)}buildContext(e,t=["all"],o){let i=this.buildColumnContexts(e,o),r=this.identifyIssues(e,i,t),s=this.config.includeSampleData?this.buildSampleData(e,r):void 0,a=t.includes("all")?["fill_missing","validate_ontology","check_consistency"]:t;return{metadata:{sampleCount:e.sampleCount,columnCount:e.columns.length,columnNames:e.columns.map(l=>l.name)},columns:i,issues:r,sampleData:s,focusAreas:a}}contextToString(e){let t=[];t.push("## Table Overview"),t.push(`- Samples: ${e.metadata.sampleCount}`),t.push(`- Columns: ${e.metadata.columnCount}`),t.push(""),t.push("## Analysis Focus"),t.push(e.focusAreas.map(r=>`- ${this.formatFocusArea(r)}`).join(`
`)),t.push(""),t.push("## Columns with Issues");let o=e.columns.filter(r=>r.notAvailableCount>0||r.emptyCount>0||e.issues.some(s=>s.columnIndex===r.index));for(let r of o){if(t.push(`### ${r.name}`),t.push(`- Type: ${r.type}`),t.push(`- Required: ${r.isRequired?"Yes":"No"}`),r.ontologies&&r.ontologies.length>0&&t.push(`- Ontologies: ${r.ontologies.join(", ")}`),r.examples&&r.examples.length>0&&t.push(`- Examples: ${r.examples.slice(0,5).join(", ")}`),r.notAvailableCount>0&&t.push(`- "not available" values: ${r.notAvailableCount}`),r.emptyCount>0&&t.push(`- Empty values: ${r.emptyCount}`),r.uniqueValues.length>0){let s=r.uniqueValues.slice(0,10);t.push(`- Current values: ${s.join(", ")}${r.uniqueValues.length>10?"...":""}`)}t.push("")}if(e.issues.length>0){t.push("## Identified Issues");for(let r of e.issues.slice(0,20))t.push(`- [${r.type}] ${r.column}: ${r.details||""} (${r.sampleIndices.length} samples)`);e.issues.length>20&&t.push(`... and ${e.issues.length-20} more issues`),t.push("")}if(e.sampleData&&e.sampleData.length>0){t.push("## Sample Data (affected rows)"),t.push("```"),t.push(e.metadata.columnNames.join("	"));for(let r of e.sampleData)t.push(r.join("	"));t.push("```")}let i=t.join(`
`);return this.config.maxContextLength&&i.length>this.config.maxContextLength&&(i=i.substring(0,this.config.maxContextLength)+`
... (truncated)`),i}buildColumnContexts(e,t){return e.columns.map((o,i)=>{let r=t?.columns.find(h=>h.name.toLowerCase()===o.name.toLowerCase()),{uniqueValues:s,notAvailableCount:a,emptyCount:l}=this.analyzeColumnValues(o,e.sampleCount),d=r?.validators?.find(h=>h.validator_name==="ontology"),f=r?.validators?.find(h=>h.validator_name==="pattern");return{name:o.name,index:i,type:this.detectColumnType(o.name),isRequired:r?.requirement==="required"||o.isRequired||!1,ontologies:d?.params?.ontologies,pattern:f?.params?.pattern,examples:d?.params?.examples||f?.params?.examples,allowNotAvailable:r?.allow_not_available??!0,allowNotApplicable:r?.allow_not_applicable??!0,uniqueValues:s.slice(0,this.config.maxUniqueValues),notAvailableCount:a,emptyCount:l}})}analyzeColumnValues(e,t){let o=new Set,i=0,r=0;for(let s=1;s<=t;s++){let a=dt(e,s),l=a.toLowerCase().trim();!a||a.trim()===""?r++:l==="not available"?i++:nw.includes(l)||o.add(a)}return{uniqueValues:Array.from(o).sort(),notAvailableCount:i,emptyCount:r}}identifyIssues(e,t,o){let i=[],r=o.includes("all")||o.includes("fill_missing"),s=o.includes("all")||o.includes("validate_ontology"),a=o.includes("all")||o.includes("check_consistency");for(let l of t){let d=e.columns[l.index];if(r){let f=[];for(let h=1;h<=e.sampleCount;h++){let C=dt(d,h),g=C.toLowerCase().trim();(!C||C.trim()===""||g==="not available")&&f.push(h)}f.length>0&&f.length<e.sampleCount&&i.push({type:"missing_value",column:l.name,columnIndex:l.index,sampleIndices:f,currentValue:"not available",details:`${f.length} samples have missing or "not available" values`})}if(s&&l.ontologies&&l.ontologies.length>0){let f=l.uniqueValues.filter(h=>!h.includes(":")&&!h.match(/\[\w+:\d+\]/));if(f.length>0){let h=[];for(let C=1;C<=e.sampleCount;C++){let g=dt(d,C);f.includes(g)&&h.push(C)}h.length>0&&i.push({type:"invalid_ontology",column:l.name,columnIndex:l.index,sampleIndices:h.slice(0,100),details:`Values may need ontology validation: ${f.slice(0,5).join(", ")}`})}}if(a&&l.uniqueValues.length>1){let f=this.findSimilarValues(l.uniqueValues);for(let h of f)if(h.length>1){let C=[];for(let g=1;g<=e.sampleCount;g++){let w=dt(d,g);h.includes(w)&&C.push(g)}i.push({type:"inconsistency",column:l.name,columnIndex:l.index,sampleIndices:C,details:`Similar values found: ${h.join(", ")}`})}}}return i}findSimilarValues(e){let t=[],o=new Set;for(let i of e){if(o.has(i))continue;let r=e.filter(s=>s===i||o.has(s)?!1:this.areSimilar(i,s));if(r.length>0){t.push([i,...r]),o.add(i);for(let s of r)o.add(s)}}return t}areSimilar(e,t){let o=e.toLowerCase().trim(),i=t.toLowerCase().trim();if(o===i||o.includes(i)||i.includes(o))return!0;if(o.length<20&&i.length<20){let r=this.levenshteinDistance(o,i),s=Math.max(o.length,i.length);return r/s<.3}return!1}levenshteinDistance(e,t){let o=[];for(let i=0;i<=t.length;i++)o[i]=[i];for(let i=0;i<=e.length;i++)o[0][i]=i;for(let i=1;i<=t.length;i++)for(let r=1;r<=e.length;r++)t.charAt(i-1)===e.charAt(r-1)?o[i][r]=o[i-1][r-1]:o[i][r]=Math.min(o[i-1][r-1]+1,o[i][r-1]+1,o[i-1][r]+1);return o[t.length][e.length]}buildSampleData(e,t){let o=new Set;for(let s of t)for(let a of s.sampleIndices.slice(0,5))o.add(a);let i=Array.from(o).slice(0,this.config.maxSampleRows),r=[];for(let s of i){let a=[];for(let l of e.columns)a.push(dt(l,s));r.push(a)}return r}detectColumnType(e){let t=e.toLowerCase();return t==="source name"||t==="assay name"?"identifier":t.startsWith("characteristics[")?"characteristic":t.startsWith("factor value[")?"factor":t.startsWith("comment[")?"comment":t==="technology type"?"controlled_vocabulary":"general"}formatFocusArea(e){return{fill_missing:'Fill missing and "not available" values',validate_ontology:"Validate and suggest ontology terms",check_consistency:"Check data consistency",all:"Comprehensive analysis"}[e]}},uA=new Ln;var Rc=`You are an expert in proteomics data annotation, specifically the SDRF (Sample and Data Relationship Format) specification used in the PRIDE database and proteomics community.

## SDRF Format Overview

SDRF files are tab-separated tables describing experimental samples and their relationship to data files. Key concepts:

1. **Reserved Values**: The following special values are allowed in SDRF:
   - "not available" - Information exists but is not known/provided
   - "not applicable" - The field does not apply to this sample
   - "anonymized" - Information hidden for privacy
   - "pooled" - Sample is a pool of multiple sources

2. **Column Types**:
   - \`source name\`: Unique identifier for biological samples
   - \`characteristics[...]\`: Sample properties (organism, tissue, etc.)
   - \`factor value[...]\`: Experimental variables being studied
   - \`comment[...]\`: Additional metadata
   - \`assay name\`: Unique identifier for data acquisition runs

3. **Ontology Requirements**: Many columns require ontology-controlled terms:
   - \`characteristics[organism]\`: NCBI Taxonomy (e.g., "homo sapiens", "mus musculus")
   - \`characteristics[organism part]\`: UBERON or BTO (e.g., "liver", "brain")
   - \`characteristics[cell type]\`: CL or BTO (e.g., "hepatocyte", "T cell")
   - \`characteristics[disease]\`: EFO, MONDO, or DOID
   - \`comment[instrument]\`: MS ontology (e.g., "Q Exactive HF", "Orbitrap Exploris")

4. **Consistency**: Values should be consistent across samples (e.g., same spelling, capitalization).

## Your Task

Analyze the SDRF data provided and suggest improvements. Focus on:
1. Filling "not available" or empty values when the information can be inferred
2. Suggesting proper ontology terms for columns that require them
3. Identifying and fixing inconsistencies (similar values with different spellings)
4. Ensuring data quality and completeness

## Output Format

You MUST respond with a valid JSON object containing recommendations. The format is:

\`\`\`json
{
  "recommendations": [
    {
      "type": "fill_value" | "correct_value" | "ontology_suggestion" | "consistency_fix",
      "column": "column name",
      "columnIndex": 0,
      "sampleIndices": [1, 2, 3],
      "currentValue": "current value or empty",
      "suggestedValue": "suggested value",
      "confidence": "high" | "medium" | "low",
      "reasoning": "Brief explanation of why this change is recommended"
    }
  ],
  "summary": "Brief overall summary of the analysis"
}
\`\`\`

## Important Guidelines

1. Only suggest changes you are confident about
2. For ontology terms, use the common label (e.g., "homo sapiens" not "NCBITaxon:9606")
3. Be conservative - don't guess at values you can't reasonably infer
4. Consider the context of other values in the column when making suggestions
5. If a column already has mostly valid values, use those as a guide for filling missing ones
6. For consistency fixes, prefer the most common or most standard form`,xi=class{contextBuilder;constructor(e){this.contextBuilder=e||new Ln}buildAnalysisMessages(e,t){let o=[];o.push({role:"system",content:Rc});let i=this.buildUserPrompt(e,t);return o.push({role:"user",content:i}),o}buildUserPrompt(e,t){let o=[];o.push("Please analyze the following SDRF data and provide recommendations for improvement."),o.push(""),o.push("**Analysis Focus:**");for(let i of e.focusAreas)o.push(`- ${this.formatFocusArea(i)}`);return o.push(""),o.push("**SDRF Data:**"),o.push(""),o.push(this.contextBuilder.contextToString(e)),t&&(o.push(""),o.push("**Additional Instructions:**"),o.push(t)),o.push(""),o.push("Remember to respond with a valid JSON object containing your recommendations."),o.join(`
`)}buildColumnFocusedPrompt(e,t){let o=e.columns.find(a=>a.name.toLowerCase()===t.toLowerCase());if(!o)throw new Error(`Column "${t}" not found in context`);let i=[];i.push({role:"system",content:Rc});let r=[];r.push(`Please analyze the "${t}" column and provide recommendations.`),r.push(""),r.push("**Column Details:**"),r.push(`- Name: ${o.name}`),r.push(`- Type: ${o.type}`),r.push(`- Required: ${o.isRequired?"Yes":"No"}`),o.ontologies&&o.ontologies.length>0&&r.push(`- Expected Ontologies: ${o.ontologies.join(", ")}`),o.examples&&o.examples.length>0&&r.push(`- Valid Examples: ${o.examples.join(", ")}`),r.push(""),r.push("**Current Values:**"),r.push(`- Unique values: ${o.uniqueValues.join(", ")||"None"}`),r.push(`- "not available" count: ${o.notAvailableCount}`),r.push(`- Empty count: ${o.emptyCount}`);let s=e.issues.filter(a=>a.column.toLowerCase()===t.toLowerCase());if(s.length>0){r.push(""),r.push("**Identified Issues:**");for(let a of s)r.push(`- ${a.type}: ${a.details} (${a.sampleIndices.length} samples)`)}return r.push(""),r.push("Respond with JSON recommendations for this column only."),i.push({role:"user",content:r.join(`
`)}),i}buildOntologyValidationPrompt(e,t,o){let i=[];i.push({role:"system",content:`You are an expert in biomedical ontologies. Your task is to validate and suggest correct ontology terms.

For each value provided, determine:
1. If it's a valid term from the specified ontologies
2. If not, suggest the correct term

Respond with JSON:
\`\`\`json
{
  "validations": [
    {
      "originalValue": "input value",
      "isValid": true/false,
      "suggestedValue": "correct term if invalid",
      "confidence": "high" | "medium" | "low",
      "reasoning": "brief explanation"
    }
  ]
}
\`\`\``});let r=`Validate these values for the "${e}" column.

Expected ontologies: ${o.join(", ")}

Values to validate:
${t.map((s,a)=>`${a+1}. "${s}"`).join(`
`)}`;return i.push({role:"user",content:r}),i}buildValueInferencePrompt(e,t,o,i){let r=[];r.push({role:"system",content:`You are an expert in proteomics data annotation. Your task is to infer missing values based on:
1. Other values in the same column
2. Values in related columns for the same samples
3. Common patterns in proteomics experiments

Be conservative - only suggest values you are reasonably confident about.

Respond with JSON:
\`\`\`json
{
  "inferences": [
    {
      "sampleIndex": 1,
      "suggestedValue": "inferred value",
      "confidence": "high" | "medium" | "low",
      "reasoning": "why this value was inferred"
    }
  ],
  "cannotInfer": [2, 3]  // sample indices where inference is not possible
}
\`\`\``});let s=[];s.push(`Infer missing values for the "${e}" column.`),s.push(""),s.push("**Known values in this column:**");for(let a of t.slice(0,20))s.push(`- Sample ${a.sampleIndex}: "${a.value}"`);if(t.length>20&&s.push(`... and ${t.length-20} more`),s.push(""),s.push(`**Samples missing values:** ${o.slice(0,50).join(", ")}`),o.length>50&&s.push(`... and ${o.length-50} more`),i&&i.length>0){s.push(""),s.push("**Related column values for missing samples:**");for(let a of i){s.push(`
${a.name}:`);for(let l of o.slice(0,10)){let d=a.values.get(l);d&&s.push(`- Sample ${l}: "${d}"`)}}}return r.push({role:"user",content:s.join(`
`)}),r}getSystemPrompt(){return Rc}formatFocusArea(e){return{fill_missing:'Fill missing and "not available" values',validate_ontology:"Validate and suggest ontology terms",check_consistency:"Check data consistency",all:"Comprehensive analysis"}[e]}},mA=new xi;var Fc="sdrf_llm_settings",Mm="sdrf_llm_key",Vc=class{settings;cryptoKey=null;useSessionStorage;constructor(e={}){this.useSessionStorage=e.useSessionStorage||!1,this.settings=this.loadSettings()}getSettings(){return I({},this.settings)}getActiveProvider(){return this.settings.activeProvider}setActiveProvider(e){this.settings.activeProvider=e,this.saveSettings()}getProviderConfig(e){let t=this.settings.providers[e];if(t)return H(I(I({},zn[e]),t),{provider:e})}getActiveProviderConfig(){return this.getProviderConfig(this.settings.activeProvider)}setProviderConfig(e,t){return O(this,null,function*(){let o=this.settings.providers[e]||I({provider:e},zn[e]);this.settings.providers[e]=H(I(I({},o),t),{provider:e}),yield this.saveSettings()})}setApiKey(e,t){return O(this,null,function*(){let o=this.settings.providers[e]||I({provider:e},zn[e]);if(this.settings.storageConsent&&this.settings.storageMode==="persistent"){let i=yield this.encryptApiKey(t);o._encryptedKey=i,o.apiKey=t}else o.apiKey=t;this.settings.providers[e]=o,yield this.saveSettings()})}getApiKey(e){return O(this,null,function*(){let t=this.settings.providers[e];if(!t)return;if(t.apiKey)return t.apiKey;let o=t._encryptedKey;if(o)try{return yield this.decryptApiKey(o)}catch(i){console.warn("Failed to decrypt API key:",i);return}})}clearApiKey(e){return O(this,null,function*(){let t=this.settings.providers[e];t&&(delete t.apiKey,delete t._encryptedKey,yield this.saveSettings())})}isProviderConfigured(e){return Gc(this.getProviderConfig(e))}isActiveProviderConfigured(){return this.isProviderConfigured(this.settings.activeProvider)}hasStorageConsent(){return this.settings.storageConsent}setStorageConsent(e,t="session"){return O(this,null,function*(){if(this.settings.storageConsent=e,this.settings.storageMode=t,!e)for(let o of Object.keys(this.settings.providers))delete this.settings.providers[o]?._encryptedKey;yield this.saveSettings()})}clearAll(){this.settings=I({},Ei),this.getStorage().removeItem(Fc)}exportSettings(){let e={activeProvider:this.settings.activeProvider,providers:{}};for(let[o,i]of Object.entries(this.settings.providers))if(i){let t=i,{apiKey:r}=t,s=$c(t,["apiKey"]);delete s._encryptedKey,e.providers[o]=s}return e}importSettings(e){return O(this,null,function*(){if(e.activeProvider&&(this.settings.activeProvider=e.activeProvider),e.providers){for(let[t,o]of Object.entries(e.providers))if(o){let i=yield this.getApiKey(t);this.settings.providers[t]=H(I({},o),{apiKey:i})}}yield this.saveSettings()})}getStorage(){return this.useSessionStorage?sessionStorage:localStorage}loadSettings(){try{let e=this.getStorage().getItem(Fc);if(e){let t=JSON.parse(e);return I(I({},Ei),t)}}catch(e){console.warn("Failed to load LLM settings:",e)}return I({},Ei)}saveSettings(){return O(this,null,function*(){try{let e=H(I({},this.settings),{lastUsed:Date.now()});if(e.providers){e.providers=I({},e.providers);for(let t of Object.keys(e.providers))if(e.providers[t]){let o=I({},e.providers[t]);!this.settings.storageConsent||this.settings.storageMode==="session"?(delete o.apiKey,delete o._encryptedKey):delete o.apiKey,e.providers[t]=o}}this.getStorage().setItem(Fc,JSON.stringify(e))}catch(e){console.error("Failed to save LLM settings:",e)}})}getEncryptionKey(){return O(this,null,function*(){if(this.cryptoKey)return this.cryptoKey;try{let e=yield this.loadKeyFromIndexedDB();if(e)return this.cryptoKey=e,e}catch(e){console.warn("Failed to load encryption key:",e)}return this.cryptoKey=yield crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),yield this.saveKeyToIndexedDB(this.cryptoKey),this.cryptoKey})}encryptApiKey(e){return O(this,null,function*(){let t=yield this.getEncryptionKey(),o=crypto.getRandomValues(new Uint8Array(12)),i=new TextEncoder,r=yield crypto.subtle.encrypt({name:"AES-GCM",iv:o},t,i.encode(e)),s=new Uint8Array(o.length+r.byteLength);return s.set(o),s.set(new Uint8Array(r),o.length),btoa(String.fromCharCode(...s))})}decryptApiKey(e){return O(this,null,function*(){let t=yield this.getEncryptionKey(),o=new Uint8Array(atob(e).split("").map(a=>a.charCodeAt(0))),i=o.slice(0,12),r=o.slice(12),s=yield crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,r);return new TextDecoder().decode(s)})}loadKeyFromIndexedDB(){return new Promise(e=>{try{let t=indexedDB.open("sdrf_llm_keys",1);t.onerror=()=>e(null),t.onupgradeneeded=o=>{let i=o.target.result;i.objectStoreNames.contains("keys")||i.createObjectStore("keys")},t.onsuccess=o=>{let i=o.target.result,a=i.transaction("keys","readonly").objectStore("keys").get(Mm);a.onerror=()=>{i.close(),e(null)},a.onsuccess=()=>{i.close(),e(a.result||null)}}}catch{e(null)}})}saveKeyToIndexedDB(e){return new Promise((t,o)=>{try{let i=indexedDB.open("sdrf_llm_keys",1);i.onerror=()=>o(new Error("Failed to open IndexedDB")),i.onupgradeneeded=r=>{let s=r.target.result;s.objectStoreNames.contains("keys")||s.createObjectStore("keys")},i.onsuccess=r=>{let s=r.target.result,a=s.transaction("keys","readwrite");a.objectStore("keys").put(e,Mm),a.oncomplete=()=>{s.close(),t()},a.onerror=()=>{s.close(),o(new Error("Failed to save key"))}}}catch(i){o(i)}})}},Do=new Vc;var iw={cacheTtlMs:5*60*1e3,enableCache:!0,maxRecommendations:50},Lc=class{config;providers=new Map;cache=new Map;contextBuilder;promptService;settingsService;constructor(e={},t){this.config=I(I({},iw),e),this.contextBuilder=new Ln,this.promptService=new xi(this.contextBuilder),this.settingsService=t||Do}analyze(i){return O(this,arguments,function*(e,t=["all"],o){let r=yield this.getActiveProvider(),s=this.settingsService.getActiveProviderConfig();if(!s)throw new ln("No LLM provider configured","NOT_CONFIGURED");let a=this.getCacheKey(e,t);if(this.config.enableCache){let g=this.getFromCache(a,e);if(g)return g}let l=this.contextBuilder.buildContext(e,t,o);if(l.issues.length===0)return Hc(s.provider,s.model);let d=this.promptService.buildAnalysisMessages(l),f=yield r.complete(d),h=this.parseRecommendations(f.content,e),C={recommendations:h.slice(0,this.config.maxRecommendations),summary:Mi(h),rawResponse:f.content,timestamp:new Date,provider:s.provider,model:s.model};return this.config.enableCache&&this.addToCache(a,C,e),C})}analyzeStreaming(i){return Di(this,arguments,function*(e,t=["all"],o){let r=yield new Jt(this.getActiveProvider()),s=this.settingsService.getActiveProviderConfig();if(!s)throw new ln("No LLM provider configured","NOT_CONFIGURED");if(!r.supportsStreaming){let z=yield new Jt(this.analyze(e,t,o));return yield z.rawResponse||"",z}let a=this.contextBuilder.buildContext(e,t,o),l=this.promptService.buildAnalysisMessages(a),d="";try{for(var g=Un(r.stream(l)),w,P,W;w=!(P=yield new Jt(g.next())).done;w=!1){let z=P.value;d+=z.content,yield z.content}}catch{W=[P]}finally{try{w&&(P=g.return)&&(yield new Jt(P.call(g)))}finally{if(W)throw W[0]}}let f=this.parseRecommendations(d,e),h={recommendations:f.slice(0,this.config.maxRecommendations),summary:Mi(f),rawResponse:d,timestamp:new Date,provider:s.provider,model:s.model},C=this.getCacheKey(e,t);return this.config.enableCache&&this.addToCache(C,h,e),h})}analyzeColumn(e,t,o){return O(this,null,function*(){let i=yield this.getActiveProvider(),r=this.settingsService.getActiveProviderConfig();if(!r)throw new ln("No LLM provider configured","NOT_CONFIGURED");let s=this.contextBuilder.buildContext(e,["all"],o),a=this.promptService.buildColumnFocusedPrompt(s,t),l=yield i.complete(a),d=this.parseRecommendations(l.content,e);return{recommendations:d,summary:Mi(d),rawResponse:l.content,timestamp:new Date,provider:r.provider,model:r.model}})}abort(){for(let e of this.providers.values())e.abort()}clearCache(){this.cache.clear()}getActiveProvider(){return O(this,null,function*(){let e=this.settingsService.getActiveProvider(),t=this.settingsService.getActiveProviderConfig();if(!t)throw new ln(`Provider ${e} is not configured`,"NOT_CONFIGURED",e);let o=this.providers.get(e);return o?o.setConfig(t):(o=yield this.createProvider(e,t),this.providers.set(e,o)),o})}testConnection(){return O(this,null,function*(){try{let e=yield this.getActiveProvider(),t=[{role:"user",content:'Say "OK" if you can read this.'}],o=yield e.complete(t);return o.content&&o.content.length>0?{success:!0}:{success:!1,error:"Empty response from provider"}}catch(e){return{success:!1,error:e instanceof Error?e.message:String(e)}}})}createProvider(e,t){return O(this,null,function*(){let o=yield this.settingsService.getApiKey(e),i=H(I({},t),{apiKey:o});switch(e){case"openai":return new bs(i);case"anthropic":let{AnthropicProvider:r}=yield import("./chunk-XLYL2M5C.js");return new r(i);case"gemini":let{GeminiProvider:s}=yield import("./chunk-3FRUPCLO.js");return new s(i);case"ollama":let{OllamaProvider:a}=yield import("./chunk-36WAJONJ.js");return new a(i);default:throw new ln(`Unknown provider type: ${e}`,"PROVIDER_ERROR",e)}})}parseRecommendations(e,t){try{let o=e.match(/```json\s*([\s\S]*?)\s*```/),i=o?o[1]:e,r;try{r=JSON.parse(i)}catch{let l=e.match(/\{[\s\S]*"recommendations"[\s\S]*\}/);if(l)r=JSON.parse(l[0]);else return console.warn("Failed to parse recommendations JSON"),[]}let s=r.recommendations||r;if(!Array.isArray(s))return console.warn("Recommendations is not an array"),[];let a=[];for(let l of s){let d=this.validateAndConvertRecommendation(l,t);d&&a.push(d)}return a}catch(o){return console.error("Failed to parse recommendations:",o),[]}}validateAndConvertRecommendation(e,t){if(!e.column||!e.suggestedValue)return null;let o=e.columnIndex;if(typeof o!="number"&&(o=t.columns.findIndex(d=>d.name.toLowerCase()===e.column.toLowerCase())),o<0||o>=t.columns.length)return null;let i=e.sampleIndices||[];if(Array.isArray(i)||(i=[i]),i=i.filter(d=>typeof d=="number"&&d>=1&&d<=t.sampleCount),i.length===0)return null;let s=["fill_value","correct_value","ontology_suggestion","consistency_fix"].includes(e.type)?e.type:"fill_value",l=["high","medium","low"].includes(e.confidence)?e.confidence:"medium";return{id:Uc(),type:s,column:e.column,columnIndex:o,sampleIndices:i,currentValue:e.currentValue||void 0,suggestedValue:String(e.suggestedValue),confidence:l,reasoning:e.reasoning||"No explanation provided",applied:!1,ontologyId:e.ontologyId,ontologyLabel:e.ontologyLabel}}getCacheKey(e,t){return JSON.stringify({sampleCount:e.sampleCount,columnCount:e.columns.length,focusAreas:t.sort()})}getTableHash(e){let t=[];for(let o=0;o<Math.min(5,e.columns.length);o++){let i=e.columns[o];t.push(`${i.name}:${i.value}`)}return t.join("|")}getFromCache(e,t){let o=this.cache.get(e);return o?Date.now()-o.timestamp>this.config.cacheTtlMs?(this.cache.delete(e),null):o.tableHash!==this.getTableHash(t)?(this.cache.delete(e),null):o.result:null}addToCache(e,t,o){if(this.cache.set(e,{result:t,timestamp:Date.now(),tableHash:this.getTableHash(o)}),this.cache.size>20){let i=this.cache.keys().next().value;i&&this.cache.delete(i)}}},ws=new Lc;var rw=(n,e)=>e.id;function sw(n,e){if(n&1&&(u(0,"span",4),p(1),c()),n&2){let t=y();m(),V(t.getActiveProviderName())}}function aw(n,e){if(n&1){let t=R();u(0,"div",15)(1,"div",17),p(2,"\u{1F916}"),c(),u(3,"h3"),p(4,"Configure AI Provider"),c(),u(5,"p"),p(6,"Set up an AI provider to get intelligent recommendations for your SDRF file."),c(),u(7,"button",18),b("click",function(){x(t);let i=y();return D(i.openSettings.emit())}),p(8," Configure Provider "),c()()}}function lw(n,e){n&1&&(u(0,"div",15)(1,"div",17),p(2,"\u{1F4C4}"),c(),u(3,"h3"),p(4,"No SDRF Loaded"),c(),u(5,"p"),p(6,"Load an SDRF file to analyze it with AI."),c()())}function cw(n,e){n&1&&(it(0,"span",30),p(1," Analyzing... "))}function uw(n,e){n&1&&(u(0,"span",31),p(1,"\u2728"),c(),p(2," Analyze SDRF "))}function dw(n,e){if(n&1){let t=R();u(0,"div",26)(1,"strong"),p(2,"Error:"),c(),p(3),u(4,"button",32),b("click",function(){x(t);let i=y(2);return D(i.clearError())}),p(5,"\xD7"),c()()}if(n&2){let t=y(2);m(3),ne(" ",t.error()," ")}}function fw(n,e){n&1&&(it(0,"span",34),p(1," AI is analyzing... "))}function pw(n,e){n&1&&p(0," Analysis Output ")}function mw(n,e){if(n&1&&(u(0,"div",27)(1,"h3"),A(2,fw,2,0)(3,pw,1,0),c(),u(4,"div",33)(5,"pre"),p(6),c()()()),n&2){let t=y(2);m(2),M(t.analyzing()?2:3),m(4),V(t.streamContent()||"Waiting for response...")}}function hw(n,e){if(n&1){let t=R();u(0,"button",49),b("click",function(){x(t);let i=y(4);return D(i.applyAll())}),p(1),c()}if(n&2){let t=y(4);m(),ne(" Apply All (",t.unappliedCount(),") ")}}function gw(n,e){if(n&1){let t=R();u(0,"div",38)(1,"select",40),b("change",function(i){x(t);let r=y(3);return D(r.onFilterTypeChange(i))}),u(2,"option",41),p(3,"All types"),c(),u(4,"option",42),p(5,"Fill values"),c(),u(6,"option",43),p(7,"Corrections"),c(),u(8,"option",44),p(9,"Ontology"),c(),u(10,"option",45),p(11,"Consistency"),c()(),u(12,"select",40),b("change",function(i){x(t);let r=y(3);return D(r.onFilterConfidenceChange(i))}),u(13,"option",41),p(14,"All confidence"),c(),u(15,"option",46),p(16,"High only"),c(),u(17,"option",47),p(18,"Medium+"),c()(),A(19,hw,2,1,"button",48),c()}if(n&2){let t=y(3);m(),T("value",t.filterType()),m(11),T("value",t.filterConfidence()),m(7),M(t.unappliedCount()>0?19:-1)}}function yw(n,e){n&1&&(u(0,"div",17),p(1,"\u2705"),c(),u(2,"p"),p(3,"No recommendations needed. Your SDRF looks good!"),c())}function vw(n,e){n&1&&(u(0,"p"),p(1,"No recommendations match the current filters."),c())}function _w(n,e){if(n&1&&(u(0,"div",29),A(1,yw,4,0)(2,vw,2,0,"p"),c()),n&2){let t=y(3);m(),M(t.result().recommendations.length===0?1:2)}}function Cw(n,e){if(n&1&&(u(0,"span",62),p(1),c(),u(2,"span",63),p(3,"\u2192"),c()),n&2){let t=y().$implicit;m(),V(t.currentValue)}}function bw(n,e){n&1&&(u(0,"span",61),p(1,"\u2713 Applied"),c())}function ww(n,e){if(n&1){let t=R();u(0,"button",64),b("click",function(){x(t);let i=y().$implicit,r=y(4);return D(r.onApplyClick(i))}),p(1," Apply "),c(),u(2,"button",65),b("click",function(){x(t);let i=y().$implicit,r=y(4);return D(r.onPreviewClick(i))}),p(3," Preview "),c()}}function xw(n,e){if(n&1&&(u(0,"div",51)(1,"div",52)(2,"span",53),p(3),c(),u(4,"span",54),p(5),c(),u(6,"span",55),p(7),c()(),u(8,"div",56),A(9,Cw,4,1),u(10,"span",57),p(11),c()(),u(12,"div",58),p(13),c(),u(14,"div",59),p(15),c(),u(16,"div",60),A(17,bw,2,0,"span",61)(18,ww,4,0),c()()),n&2){let t=e.$implicit,o=y(4);re("applied",t.applied),m(2),Fn("type-"+t.type),m(),ne(" ",o.formatType(t.type)," "),m(),Fn("conf-"+t.confidence),m(),ne(" ",t.confidence," "),m(2),V(t.column),m(2),M(t.currentValue?9:-1),m(2),V(t.suggestedValue),m(2),sc(" ",t.sampleIndices.length," sample",t.sampleIndices.length>1?"s":"",": ",o.formatSampleIndices(t.sampleIndices)," "),m(2),V(t.reasoning),m(2),M(t.applied?17:18)}}function Dw(n,e){if(n&1&&se(0,xw,19,16,"div",50,rw),n&2){let t=y(3);ae(t.filteredRecommendations())}}function Ew(n,e){if(n&1&&(u(0,"div",35)(1,"h3"),p(2,"Recommendations"),c(),u(3,"div",36)(4,"span",37)(5,"strong"),p(6),c(),p(7," suggestions "),c(),u(8,"span",37)(9,"strong"),p(10),c(),p(11," samples "),c()()(),A(12,gw,20,3,"div",38),u(13,"div",39),A(14,_w,3,1,"div",29)(15,Dw,2,0),c()),n&2){let t=y(2);m(6),V(t.result().summary.total),m(4),V(t.result().summary.affectedSamples),m(2),M(t.result().recommendations.length>0?12:-1),m(2),M(t.filteredRecommendations().length===0?14:15)}}function Sw(n,e){n&1&&(u(0,"div",29)(1,"div",17),p(2,"\u{1F50D}"),c(),u(3,"p"),p(4,'Click "Analyze SDRF" to get AI-powered recommendations.'),c()())}function Mw(n,e){if(n&1){let t=R();u(0,"div",16)(1,"div",19)(2,"div",20)(3,"h3"),p(4,"Analysis Options"),c(),u(5,"div",21)(6,"label",22)(7,"input",23),b("change",function(){x(t);let i=y();return D(i.toggleFocus("fill_missing"))}),c(),u(8,"span",24)(9,"strong"),p(10,"Fill missing values"),c(),u(11,"small"),p(12,'Suggest values for "not available" fields'),c()()(),u(13,"label",22)(14,"input",23),b("change",function(){x(t);let i=y();return D(i.toggleFocus("validate_ontology"))}),c(),u(15,"span",24)(16,"strong"),p(17,"Validate ontologies"),c(),u(18,"small"),p(19,"Check ontology terms are correct"),c()()(),u(20,"label",22)(21,"input",23),b("change",function(){x(t);let i=y();return D(i.toggleFocus("check_consistency"))}),c(),u(22,"span",24)(23,"strong"),p(24,"Check consistency"),c(),u(25,"small"),p(26,"Find inconsistent values across samples"),c()()()(),u(27,"button",25),b("click",function(){x(t);let i=y();return D(i.analyze())}),A(28,cw,2,0)(29,uw,3,0),c()(),A(30,dw,6,1,"div",26)(31,mw,7,2,"div",27),c(),u(32,"div",28),A(33,Ew,16,4)(34,Sw,5,0,"div",29),c()()}if(n&2){let t=y();m(7),T("checked",t.focusFillMissing()),m(7),T("checked",t.focusValidateOntology()),m(7),T("checked",t.focusCheckConsistency()),m(6),T("disabled",t.analyzing()||!t.canAnalyze()),m(),M(t.analyzing()?28:29),m(2),M(t.error()?30:-1),m(),M(t.analyzing()||t.streamContent()?31:-1),m(2),M(t.result()&&!t.analyzing()?33:t.analyzing()?-1:34)}}var xs=class n{table=null;close=new L;openSettings=new L;applyRecommendation=new L;batchApply=new L;previewRecommendation=new L;analyzing=S(!1);error=S(null);result=S(null);streamContent=S("");focusFillMissing=S(!0);focusValidateOntology=S(!0);focusCheckConsistency=S(!0);filterType=S("all");filterConfidence=S("all");recommendationService;settingsService;constructor(){this.recommendationService=ws,this.settingsService=Do}filteredRecommendations=le(()=>{let e=this.result();if(!e)return[];let t=e.recommendations,o=this.filterType();o!=="all"&&(t=t.filter(r=>r.type===o));let i=this.filterConfidence();return i==="high"?t=t.filter(r=>r.confidence==="high"):i==="medium"&&(t=t.filter(r=>r.confidence==="high"||r.confidence==="medium")),t});unappliedCount=le(()=>this.filteredRecommendations().filter(e=>!e.applied).length);ngOnChanges(e){e.table&&(this.result.set(null),this.error.set(null))}isConfigured(){return this.settingsService.isActiveProviderConfigured()}getActiveProviderName(){let e=this.settingsService.getActiveProvider();return Si(e)}canAnalyze(){return this.table!==null&&(this.focusFillMissing()||this.focusValidateOntology()||this.focusCheckConsistency())}toggleFocus(e){switch(e){case"fill_missing":this.focusFillMissing.set(!this.focusFillMissing());break;case"validate_ontology":this.focusValidateOntology.set(!this.focusValidateOntology());break;case"check_consistency":this.focusCheckConsistency.set(!this.focusCheckConsistency());break}}analyze(){return O(this,null,function*(){if(!this.table||this.analyzing())return;this.analyzing.set(!0),this.error.set(null),this.streamContent.set(""),this.result.set(null);let e=[];this.focusFillMissing()&&e.push("fill_missing"),this.focusValidateOntology()&&e.push("validate_ontology"),this.focusCheckConsistency()&&e.push("check_consistency");try{let s=null;try{for(var t=Un(this.recommendationService.analyzeStreaming(this.table,e)),o,i,r;o=!(i=yield t.next()).done;o=!1){let a=i.value;typeof a=="string"?this.streamContent.update(l=>l+a):s=a}}catch{r=[i]}finally{try{o&&(i=t.return)&&(yield i.call(t))}finally{if(r)throw r[0]}}s&&this.result.set(s)}catch(s){let a=s instanceof ln||s instanceof Error?s.message:"Analysis failed";this.error.set(a)}finally{this.analyzing.set(!1)}})}clearError(){this.error.set(null)}formatType(e){return{fill_value:"Fill",correct_value:"Correct",ontology_suggestion:"Ontology",consistency_fix:"Consistency"}[e]}formatSampleIndices(e){return e.length<=5?e.join(", "):`${e.slice(0,5).join(", ")}... (+${e.length-5} more)`}onFilterTypeChange(e){let t=e.target;this.filterType.set(t.value)}onFilterConfidenceChange(e){let t=e.target;this.filterConfidence.set(t.value)}onApplyClick(e){e.applied=!0,this.applyRecommendation.emit({recommendation:e})}applyAll(){let e=this.filteredRecommendations().filter(t=>!t.applied);for(let t of e)t.applied=!0;this.batchApply.emit({recommendations:e})}onPreviewClick(e){this.previewRecommendation.emit(e)}onOverlayClick(e){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["sdrf-recommend-panel"]],inputs:{table:"table"},outputs:{close:"close",openSettings:"openSettings",applyRecommendation:"applyRecommendation",batchApply:"batchApply",previewRecommendation:"previewRecommendation"},features:[$e],decls:20,vars:2,consts:[[1,"recommend-overlay",3,"click"],[1,"recommend-modal",3,"click"],[1,"modal-header"],[1,"header-left"],[1,"provider-badge"],[1,"header-actions"],["title","Settings",1,"btn-icon",3,"click"],["width","18","height","18","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["cx","12","cy","12","r","3"],["d","M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"],["title","Close",1,"btn-icon","btn-close",3,"click"],["width","20","height","20","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"modal-body"],[1,"empty-state"],[1,"analysis-layout"],[1,"empty-icon"],[1,"btn","btn-primary",3,"click"],[1,"analysis-left"],[1,"control-section"],[1,"focus-checkboxes"],[1,"checkbox-label"],["type","checkbox",3,"change","checked"],[1,"checkbox-text"],[1,"btn","btn-primary","btn-analyze",3,"click","disabled"],[1,"error-box"],[1,"stream-section"],[1,"analysis-right"],[1,"empty-results"],[1,"spinner"],[1,"btn-icon-left"],[1,"btn-dismiss",3,"click"],[1,"stream-content"],[1,"spinner-small"],[1,"results-header"],[1,"results-summary"],[1,"summary-item"],[1,"results-toolbar"],[1,"recommendations-list"],[1,"filter-select",3,"change","value"],["value","all"],["value","fill_value"],["value","correct_value"],["value","ontology_suggestion"],["value","consistency_fix"],["value","high"],["value","medium"],[1,"btn","btn-secondary"],[1,"btn","btn-secondary",3,"click"],[1,"recommendation-card",3,"applied"],[1,"recommendation-card"],[1,"rec-header"],[1,"rec-type"],[1,"rec-confidence"],[1,"rec-column"],[1,"rec-change"],[1,"new-value"],[1,"rec-meta"],[1,"rec-reasoning"],[1,"rec-actions"],[1,"applied-badge"],[1,"old-value"],[1,"arrow"],[1,"btn","btn-primary","btn-sm",3,"click"],[1,"btn","btn-secondary","btn-sm",3,"click"]],template:function(t,o){t&1&&(u(0,"div",0),b("click",function(r){return o.onOverlayClick(r)}),u(1,"div",1),b("click",function(r){return r.stopPropagation()}),u(2,"div",2)(3,"div",3)(4,"h2"),p(5,"AI Assistant"),c(),A(6,sw,2,1,"span",4),c(),u(7,"div",5)(8,"button",6),b("click",function(){return o.openSettings.emit()}),Ol(),u(9,"svg",7),it(10,"circle",8)(11,"path",9),c()(),Al(),u(12,"button",10),b("click",function(){return o.close.emit()}),Ol(),u(13,"svg",11),it(14,"line",12)(15,"line",13),c()()()(),Al(),u(16,"div",14),A(17,aw,9,0,"div",15)(18,lw,7,0,"div",15)(19,Mw,35,8,"div",16),c()()()),t&2&&(m(6),M(o.isConfigured()?6:-1),m(11),M(o.isConfigured()?o.table?19:18:17))},dependencies:[xe,De,Xe,et],styles:[".recommend-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#0009;display:flex;align-items:center;justify-content:center;z-index:1000;padding:20px;animation:_ngcontent-%COMP%_fadeIn .15s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.recommend-modal[_ngcontent-%COMP%]{background:#fff;border-radius:16px;box-shadow:0 25px 80px #0006;width:100%;max-width:1100px;max-height:85vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .2s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:16px 16px 0 0;color:#fff}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.modal-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:600}.provider-badge[_ngcontent-%COMP%]{background:#fff3;padding:4px 10px;border-radius:12px;font-size:12px;font-weight:500}.header-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.btn-icon[_ngcontent-%COMP%]{background:#ffffff26;border:none;padding:8px;cursor:pointer;color:#fff;border-radius:8px;display:flex;align-items:center;justify-content:center;transition:background .15s}.btn-icon[_ngcontent-%COMP%]:hover{background:#ffffff40}.modal-body[_ngcontent-%COMP%]{flex:1;overflow:hidden;display:flex;flex-direction:column}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 40px;text-align:center;color:#6b7280}.empty-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;color:#374151;font-size:18px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 20px;max-width:300px}.analysis-layout[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.analysis-left[_ngcontent-%COMP%]{width:380px;flex-shrink:0;border-right:1px solid #e5e7eb;display:flex;flex-direction:column;overflow:hidden}.analysis-right[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;background:#f9fafb}.control-section[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb}.control-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:14px;font-weight:600;color:#374151}.focus-checkboxes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;margin-bottom:20px}.checkbox-label[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;cursor:pointer}.checkbox-label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-top:3px}.checkbox-text[_ngcontent-%COMP%]{display:flex;flex-direction:column}.checkbox-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:13px;color:#374151}.checkbox-text[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af}.btn-analyze[_ngcontent-%COMP%]{width:100%;padding:12px 20px;font-size:15px;display:flex;align-items:center;justify-content:center;gap:8px}.btn-icon-left[_ngcontent-%COMP%]{font-size:16px}.spinner[_ngcontent-%COMP%]{width:16px;height:16px;border:2px solid rgba(255,255,255,.3);border-top-color:#fff;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}.spinner-small[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border:2px solid #d1d5db;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:8px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}.error-box[_ngcontent-%COMP%]{margin:16px 20px;padding:12px 16px;background:#fee2e2;color:#b91c1c;border-radius:8px;font-size:13px;display:flex;align-items:center;justify-content:space-between}.btn-dismiss[_ngcontent-%COMP%]{background:none;border:none;font-size:18px;cursor:pointer;color:inherit;padding:0 4px}.stream-section[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;padding:16px 20px;overflow:hidden}.stream-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;font-size:13px;font-weight:600;color:#6b7280;display:flex;align-items:center}.stream-content[_ngcontent-%COMP%]{flex:1;background:#1e1e1e;border-radius:8px;padding:16px;overflow:auto;font-family:Monaco,Menlo,monospace}.stream-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin:0;font-size:12px;line-height:1.5;color:#d4d4d4;white-space:pre-wrap;word-break:break-word}.results-header[_ngcontent-%COMP%]{padding:16px 20px;border-bottom:1px solid #e5e7eb;background:#fff;display:flex;justify-content:space-between;align-items:center}.results-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:600;color:#374151}.results-summary[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:13px;color:#6b7280}.results-toolbar[_ngcontent-%COMP%]{display:flex;gap:10px;padding:12px 20px;border-bottom:1px solid #e5e7eb;background:#fff}.filter-select[_ngcontent-%COMP%]{padding:6px 10px;border:1px solid #d1d5db;border-radius:6px;font-size:12px;background:#fff}.recommendations-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px 20px}.empty-results[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;text-align:center;color:#9ca3af}.empty-results[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:36px;margin-bottom:12px}.recommendation-card[_ngcontent-%COMP%]{background:#fff;border:1px solid #e5e7eb;border-radius:10px;padding:16px;margin-bottom:12px;box-shadow:0 1px 3px #0000000d}.recommendation-card.applied[_ngcontent-%COMP%]{opacity:.6;background:#f9fafb}.rec-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:10px}.rec-type[_ngcontent-%COMP%]{font-size:10px;font-weight:600;text-transform:uppercase;padding:3px 8px;border-radius:4px}.type-fill_value[_ngcontent-%COMP%]{background:#dbeafe;color:#1d4ed8}.type-correct_value[_ngcontent-%COMP%]{background:#fef3c7;color:#b45309}.type-ontology_suggestion[_ngcontent-%COMP%]{background:#f3e8ff;color:#7c3aed}.type-consistency_fix[_ngcontent-%COMP%]{background:#e0e7ff;color:#4338ca}.rec-confidence[_ngcontent-%COMP%]{font-size:10px;font-weight:500;padding:3px 8px;border-radius:4px}.conf-high[_ngcontent-%COMP%]{background:#d1fae5;color:#059669}.conf-medium[_ngcontent-%COMP%]{background:#fef3c7;color:#d97706}.conf-low[_ngcontent-%COMP%]{background:#f3f4f6;color:#6b7280}.rec-column[_ngcontent-%COMP%]{font-weight:600;color:#374151;font-size:13px;margin-left:auto}.rec-change[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;flex-wrap:wrap}.old-value[_ngcontent-%COMP%]{color:#9ca3af;text-decoration:line-through;font-size:13px}.arrow[_ngcontent-%COMP%]{color:#6b7280}.new-value[_ngcontent-%COMP%]{color:#059669;font-weight:500;background:#d1fae5;padding:3px 8px;border-radius:4px;font-size:13px}.rec-meta[_ngcontent-%COMP%]{font-size:11px;color:#9ca3af;margin-bottom:8px}.rec-reasoning[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;font-style:italic;padding:10px 12px;background:#f9fafb;border-radius:6px;margin-bottom:12px;line-height:1.4}.rec-actions[_ngcontent-%COMP%]{display:flex;gap:8px}.applied-badge[_ngcontent-%COMP%]{color:#059669;font-weight:500;font-size:13px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #d1d5db;border-radius:6px;font-size:13px;cursor:pointer;transition:all .15s;font-weight:500}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-sm[_ngcontent-%COMP%]{padding:6px 12px;font-size:12px}.btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){opacity:.9}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6}"],changeDetection:0})};var Iw=(n,e)=>e.value;function Tw(n,e){n&1&&(u(0,"span",22),p(1,"Local"),c())}function Ow(n,e){if(n&1){let t=R();u(0,"button",20),b("click",function(){let i=x(t).$implicit,r=y();return D(r.selectProvider(i.value))}),u(1,"span",21),p(2),c(),A(3,Tw,2,0,"span",22),c()}if(n&2){let t=e.$implicit,o=y();re("selected",o.selectedProvider()===t.value),m(2),V(t.label),m(),M(t.requiresKey?-1:3)}}function Aw(n,e){n&1&&(u(0,"span",23),p(1,"*"),c())}function Nw(n,e){if(n&1){let t=R();u(0,"div",24)(1,"p"),p(2),c(),u(3,"p")(4,"strong"),p(5,"Storage options:"),c()(),u(6,"div",25)(7,"button",18),b("click",function(){x(t);let i=y(2);return D(i.setStorageConsent("session"))}),p(8," Session Only "),u(9,"span",26),p(10,"Cleared when you close the browser"),c()(),u(11,"button",27),b("click",function(){x(t);let i=y(2);return D(i.setStorageConsent("persistent"))}),p(12," Remember (Encrypted) "),u(13,"span",26),p(14,"Stored securely in your browser"),c()()()()}if(n&2){let t=y(2);m(2),ne(" Your API key will be used to make direct requests from your browser to ",t.getProviderDisplayName(t.selectedProvider()),". ")}}function Pw(n,e){if(n&1){let t=R();u(0,"button",32),b("click",function(){x(t);let i=y(3);return D(i.clearApiKey())}),p(1," \xD7 "),c()}}function kw(n,e){n&1&&p(0," Your key is encrypted and stored in your browser. ")}function Rw(n,e){n&1&&p(0," Your key will be cleared when you close this tab. ")}function Fw(n,e){if(n&1){let t=R();u(0,"div",28)(1,"input",29),b("input",function(i){x(t);let r=y(2);return D(r.onApiKeyInput(i))}),c(),A(2,Pw,2,0,"button",30),c(),u(3,"p",11),A(4,kw,1,0)(5,Rw,1,0),u(6,"button",31),b("click",function(){x(t);let i=y(2);return D(i.resetConsent())}),p(7,"Change storage"),c()()}if(n&2){let t=y(2);m(),re("has-value",t.hasApiKey()),T("value",t.apiKeyDisplay()),m(),M(t.hasApiKey()?2:-1),m(2),M(t.hasStorageConsent()&&t.storageMode()==="persistent"?4:5)}}function Vw(n,e){if(n&1&&(u(0,"div",5)(1,"label",6),p(2," API Key "),A(3,Aw,2,0,"span",23),c(),A(4,Nw,15,1,"div",24)(5,Fw,8,5),c()),n&2){let t=y();m(3),M(t.hasApiKey()?-1:3),m(),M(!t.hasStorageConsent()&&!t.consentShown()?4:5)}}function Lw(n,e){n&1&&(u(0,"span",34),p(1,"Checking connection..."),c())}function jw(n,e){n&1&&(u(0,"span",35),p(1,"Connected to Ollama"),c())}function Bw(n,e){n&1&&(u(0,"span",36),p(1," Cannot connect to Ollama. "),u(2,"a",37),p(3,"Install Ollama"),c(),p(4," and make sure it's running. "),c())}function $w(n,e){if(n&1&&(u(0,"div",5)(1,"label",6),p(2,"Ollama Status"),c(),u(3,"div",33),A(4,Lw,2,0,"span",34)(5,jw,2,0,"span",35)(6,Bw,5,0,"span",36),c()()),n&2){let t=y();m(4),M(t.ollamaChecking()?4:t.ollamaRunning()?5:6)}}function Hw(n,e){if(n&1&&(u(0,"option",10),p(1),c()),n&2){let t=e.$implicit;T("value",t),m(),V(t)}}function Uw(n,e){n&1&&p(0," GPT-4o is recommended for best results. ")}function zw(n,e){n&1&&p(0," Claude Sonnet is recommended for balanced speed and quality. ")}function Gw(n,e){n&1&&p(0," Gemini Flash offers fast responses. ")}function qw(n,e){n&1&&p(0," Llama 3 models work well for this task. ")}function Ww(n,e){if(n&1){let t=R();u(0,"div",5)(1,"label",6),p(2,"Ollama URL"),c(),u(3,"input",38),b("input",function(i){x(t);let r=y();return D(r.onOllamaUrlChange(i))}),c()()}if(n&2){let t=y();m(3),T("value",t.ollamaUrl())}}function Kw(n,e){n&1&&p(0," Testing... ")}function Yw(n,e){n&1&&p(0," Test Connection ")}function Zw(n,e){n&1&&p(0," Connection successful ")}function Qw(n,e){if(n&1&&p(0),n&2){let t=y(2);ne(" ",t.testResult().error," ")}}function Jw(n,e){if(n&1&&(u(0,"span",39),A(1,Zw,1,0)(2,Qw,1,1),c()),n&2){let t=y();re("success",t.testResult().success)("error",!t.testResult().success),m(),M(t.testResult().success?1:2)}}var Ds=class n{isOpen=!0;close=new L;settingsSaved=new L;providerOptions=[{value:"openai",label:"OpenAI",requiresKey:!0},{value:"anthropic",label:"Anthropic",requiresKey:!0},{value:"gemini",label:"Google Gemini",requiresKey:!0},{value:"ollama",label:"Ollama",requiresKey:!1}];selectedProvider=S("openai");selectedModel=S("gpt-4o-mini");temperature=S(.3);ollamaUrl=S("http://localhost:11434");apiKey=S("");hasApiKey=S(!1);consentShown=S(!1);testing=S(!1);testResult=S(null);ollamaChecking=S(!1);ollamaRunning=S(!1);settingsService;recommendationService;constructor(){this.settingsService=Do,this.recommendationService=ws}availableModels=le(()=>Is[this.selectedProvider()]||[]);requiresApiKey=le(()=>zc(this.selectedProvider()));apiKeyDisplay=le(()=>this.hasApiKey()&&!this.apiKey()?"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022":this.apiKey());ngOnInit(){this.loadSettings()}hasStorageConsent(){return this.settingsService.hasStorageConsent()}storageMode(){return this.settingsService.getSettings().storageMode}getProviderDisplayName(e){return Si(e)}selectProvider(e){this.selectedProvider.set(e),this.testResult.set(null);let t=Is[e];this.selectedModel.set(t[0]);let o=this.settingsService.getProviderConfig(e);if(o)this.selectedModel.set(o.model),this.temperature.set(o.temperature||.3),e==="ollama"&&o.baseUrl&&this.ollamaUrl.set(o.baseUrl);else{let i=zn[e];this.temperature.set(i.temperature||.3),e==="ollama"&&this.ollamaUrl.set(i.baseUrl||"http://localhost:11434")}this.loadApiKeyStatus(),e==="ollama"&&this.checkOllamaStatus()}setStorageConsent(e){return O(this,null,function*(){yield this.settingsService.setStorageConsent(!0,e),this.consentShown.set(!0)})}resetConsent(){this.consentShown.set(!1)}onApiKeyInput(e){let t=e.target;this.apiKey.set(t.value),this.testResult.set(null)}clearApiKey(){return O(this,null,function*(){yield this.settingsService.clearApiKey(this.selectedProvider()),this.apiKey.set(""),this.hasApiKey.set(!1),this.testResult.set(null)})}onModelChange(e){let t=e.target;this.selectedModel.set(t.value)}onTemperatureChange(e){let t=e.target;this.temperature.set(parseFloat(t.value))}onOllamaUrlChange(e){let t=e.target;this.ollamaUrl.set(t.value)}canTest(){return this.selectedProvider()==="ollama"?!0:this.hasApiKey()||this.apiKey().length>0}isConfigValid(){return this.selectedProvider()==="ollama"?!0:this.hasApiKey()||this.apiKey().length>0}testConnection(){return O(this,null,function*(){this.testing.set(!0),this.testResult.set(null);try{yield this.saveSettings();let e=yield this.recommendationService.testConnection();this.testResult.set(e)}catch(e){this.testResult.set({success:!1,error:e instanceof Error?e.message:"Unknown error"})}finally{this.testing.set(!1)}})}saveAndClose(){return O(this,null,function*(){yield this.saveSettings(),this.settingsSaved.emit(),this.close.emit()})}onOverlayClick(e){e.target===e.currentTarget&&this.close.emit()}loadSettings(){let e=this.settingsService.getSettings();this.selectedProvider.set(e.activeProvider),this.consentShown.set(e.storageConsent);let t=this.settingsService.getProviderConfig(e.activeProvider);t&&(this.selectedModel.set(t.model),this.temperature.set(t.temperature||.3),e.activeProvider==="ollama"&&t.baseUrl&&this.ollamaUrl.set(t.baseUrl)),this.loadApiKeyStatus(),e.activeProvider==="ollama"&&this.checkOllamaStatus()}loadApiKeyStatus(){return O(this,null,function*(){let e=yield this.settingsService.getApiKey(this.selectedProvider());this.hasApiKey.set(!!e),this.apiKey.set("")})}saveSettings(){return O(this,null,function*(){let e=this.selectedProvider();this.settingsService.setActiveProvider(e);let t={model:this.selectedModel(),temperature:this.temperature()};e==="ollama"&&(t.baseUrl=this.ollamaUrl()),yield this.settingsService.setProviderConfig(e,t),this.apiKey()&&(yield this.settingsService.setApiKey(e,this.apiKey()),this.hasApiKey.set(!0))})}checkOllamaStatus(){return O(this,null,function*(){this.ollamaChecking.set(!0);try{let e=yield fetch(`${this.ollamaUrl()}/api/tags`,{signal:AbortSignal.timeout(5e3)});this.ollamaRunning.set(e.ok)}catch{this.ollamaRunning.set(!1)}finally{this.ollamaChecking.set(!1)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["llm-settings-dialog"]],inputs:{isOpen:"isOpen"},outputs:{close:"close",settingsSaved:"settingsSaved"},decls:49,vars:11,consts:[[1,"settings-dialog-overlay",3,"click"],[1,"settings-dialog",3,"click"],[1,"dialog-header"],["title","Close",1,"btn-close",3,"click"],[1,"dialog-body"],[1,"form-section"],[1,"form-label"],[1,"provider-cards"],[1,"provider-card",3,"selected"],[1,"form-select",3,"change","value"],[3,"value"],[1,"form-hint"],[1,"advanced-settings"],["type","range","min","0","max","1","step","0.1",1,"form-range",3,"input","value"],[1,"range-value"],[1,"btn","btn-secondary","btn-test",3,"click","disabled"],[1,"test-result",3,"success","error"],[1,"dialog-footer"],[1,"btn","btn-secondary",3,"click"],[1,"btn","btn-primary",3,"click","disabled"],[1,"provider-card",3,"click"],[1,"provider-name"],[1,"provider-badge"],[1,"required"],[1,"consent-notice"],[1,"consent-options"],[1,"btn-hint"],[1,"btn","btn-primary",3,"click"],[1,"api-key-input"],["type","password","placeholder","Enter your API key",1,"form-input",3,"input","value"],["title","Clear API key",1,"btn-icon"],[1,"link-btn",3,"click"],["title","Clear API key",1,"btn-icon",3,"click"],[1,"ollama-status"],[1,"status-checking"],[1,"status-ok"],[1,"status-error"],["href","https://ollama.ai","target","_blank"],["type","text","placeholder","http://localhost:11434",1,"form-input",3,"input","value"],[1,"test-result"]],template:function(t,o){if(t&1&&(u(0,"div",0),b("click",function(r){return o.onOverlayClick(r)}),u(1,"div",1),b("click",function(r){return r.stopPropagation()}),u(2,"div",2)(3,"h2"),p(4,"AI Assistant Settings"),c(),u(5,"button",3),b("click",function(){return o.close.emit()}),p(6,"\xD7"),c()(),u(7,"div",4)(8,"div",5)(9,"label",6),p(10,"AI Provider"),c(),u(11,"div",7),se(12,Ow,4,4,"button",8,Iw),c()(),A(14,Vw,6,2,"div",5)(15,$w,7,1,"div",5),u(16,"div",5)(17,"label",6),p(18,"Model"),c(),u(19,"select",9),b("change",function(r){return o.onModelChange(r)}),se(20,Hw,2,2,"option",10,gn),c(),u(22,"p",11),A(23,Uw,1,0)(24,zw,1,0)(25,Gw,1,0)(26,qw,1,0),c()(),u(27,"details",12)(28,"summary"),p(29,"Advanced Settings"),c(),u(30,"div",5)(31,"label",6),p(32,"Temperature"),c(),u(33,"input",13),b("input",function(r){return o.onTemperatureChange(r)}),c(),u(34,"span",14),p(35),c(),u(36,"p",11),p(37," Lower values produce more focused responses. Higher values increase creativity. "),c()(),A(38,Ww,4,1,"div",5),c(),u(39,"div",5)(40,"button",15),b("click",function(){return o.testConnection()}),A(41,Kw,1,0)(42,Yw,1,0),c(),A(43,Jw,3,5,"span",16),c()(),u(44,"div",17)(45,"button",18),b("click",function(){return o.close.emit()}),p(46,"Cancel"),c(),u(47,"button",19),b("click",function(){return o.saveAndClose()}),p(48," Save Settings "),c()()()()),t&2){let i;m(12),ae(o.providerOptions),m(2),M(o.requiresApiKey()?14:-1),m(),M(o.selectedProvider()==="ollama"?15:-1),m(4),T("value",o.selectedModel()),m(),ae(o.availableModels()),m(3),M((i=o.selectedProvider())==="openai"?23:i==="anthropic"?24:i==="gemini"?25:i==="ollama"?26:-1),m(10),T("value",o.temperature()),m(2),V(o.temperature()),m(3),M(o.selectedProvider()==="ollama"?38:-1),m(2),T("disabled",!o.canTest()||o.testing()),m(),M(o.testing()?41:42),m(2),M(o.testResult()?43:-1),m(4),T("disabled",!o.isConfigValid())}},dependencies:[xe,De,Xe,et],styles:[".settings-dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000;animation:_ngcontent-%COMP%_fadeIn .15s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}.settings-dialog[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 20px 60px #0000004d;width:100%;max-width:520px;max-height:90vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .2s ease-out}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 24px;border-bottom:1px solid #e5e7eb}.dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6b7280;padding:0;line-height:1}.btn-close[_ngcontent-%COMP%]:hover{color:#374151}.dialog-body[_ngcontent-%COMP%]{padding:24px;overflow-y:auto;flex:1}.dialog-footer[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb;background:#f9fafb;border-radius:0 0 12px 12px}.form-section[_ngcontent-%COMP%]{margin-bottom:20px}.form-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#374151;margin-bottom:8px}.form-label[_ngcontent-%COMP%]   .required[_ngcontent-%COMP%]{color:#ef4444}.form-input[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:border-color .15s,box-shadow .15s}.form-input[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#3b82f6;box-shadow:0 0 0 3px #3b82f61a}.form-input.has-value[_ngcontent-%COMP%]{background:#f0fdf4;border-color:#22c55e}.form-hint[_ngcontent-%COMP%]{font-size:12px;color:#6b7280;margin-top:6px}.provider-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}.provider-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px 12px;border:2px solid #e5e7eb;border-radius:8px;background:#fff;cursor:pointer;transition:all .15s}.provider-card[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background:#f9fafb}.provider-card.selected[_ngcontent-%COMP%]{border-color:#3b82f6;background:#eff6ff}.provider-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500}.provider-badge[_ngcontent-%COMP%]{font-size:10px;color:#059669;background:#d1fae5;padding:2px 6px;border-radius:4px;margin-top:4px}.consent-notice[_ngcontent-%COMP%]{background:#fef3c7;border:1px solid #fcd34d;border-radius:8px;padding:16px}.consent-notice[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;font-size:13px;color:#92400e}.consent-options[_ngcontent-%COMP%]{display:flex;gap:10px}.consent-options[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex:1;flex-direction:column;padding:12px}.btn-hint[_ngcontent-%COMP%]{display:block;font-size:11px;font-weight:400;opacity:.8;margin-top:4px}.api-key-input[_ngcontent-%COMP%]{display:flex;gap:8px}.api-key-input[_ngcontent-%COMP%]   .form-input[_ngcontent-%COMP%]{flex:1}.btn-icon[_ngcontent-%COMP%]{padding:10px 14px;border:1px solid #d1d5db;border-radius:6px;background:#fff;cursor:pointer;font-size:16px;color:#6b7280}.btn-icon[_ngcontent-%COMP%]:hover{background:#f3f4f6;color:#374151}.link-btn[_ngcontent-%COMP%]{background:none;border:none;color:#3b82f6;cursor:pointer;font-size:12px;padding:0;text-decoration:underline}.link-btn[_ngcontent-%COMP%]:hover{color:#2563eb}.ollama-status[_ngcontent-%COMP%]{padding:12px;border-radius:6px;font-size:13px}.status-checking[_ngcontent-%COMP%]{color:#6b7280}.status-ok[_ngcontent-%COMP%]{color:#059669;background:#d1fae5;padding:12px;border-radius:6px}.status-error[_ngcontent-%COMP%]{color:#dc2626;background:#fee2e2;padding:12px;border-radius:6px}.status-error[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#dc2626}.form-range[_ngcontent-%COMP%]{width:calc(100% - 50px);vertical-align:middle}.range-value[_ngcontent-%COMP%]{display:inline-block;width:40px;text-align:right;font-size:13px;color:#6b7280}.advanced-settings[_ngcontent-%COMP%]{margin-top:20px;border:1px solid #e5e7eb;border-radius:8px}.advanced-settings[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;font-size:14px;font-weight:500;color:#6b7280}.advanced-settings[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{border-bottom:1px solid #e5e7eb}.advanced-settings[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{padding:16px;margin-bottom:0}.btn-test[_ngcontent-%COMP%]{margin-right:12px}.test-result[_ngcontent-%COMP%]{font-size:13px}.test-result.success[_ngcontent-%COMP%]{color:#059669}.test-result.error[_ngcontent-%COMP%]{color:#dc2626}.btn[_ngcontent-%COMP%]{padding:10px 20px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .15s}.btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.btn-primary[_ngcontent-%COMP%]{background:#3b82f6;color:#fff;border-color:#3b82f6}.btn-primary[_ngcontent-%COMP%]:hover:not(:disabled){background:#2563eb}.btn-secondary[_ngcontent-%COMP%]{background:#fff;color:#374151}.btn-secondary[_ngcontent-%COMP%]:hover:not(:disabled){background:#f3f4f6}"],changeDetection:0})};var Xw=["scrollContainer"],Tm=(n,e)=>e.columnPosition;function ex(n,e){if(n&1){let t=R();u(0,"button",14),b("click",function(){x(t);let i=y();return D(i.exportTsv())}),p(1," Export TSV "),c(),u(2,"button",14),b("click",function(){x(t);let i=y();return D(i.validate())}),p(3," Validate "),c(),it(4,"span",15),u(5,"button",16),b("click",function(){x(t);let i=y();return D(i.toggleFilterBar())}),p(6," Filter "),c(),u(7,"button",17),b("click",function(){x(t);let i=y();return D(i.toggleStatsPanel())}),p(8," Stats "),c(),u(9,"button",18),b("click",function(){x(t);let i=y();return D(i.toggleRecommendPanel())}),p(10," AI Assistant "),c()}if(n&2){let t=y();m(5),re("btn-active",t.showFilterBar()),m(2),re("btn-active",t.showStatsPanel()),m(2),re("btn-active",t.showRecommendPanel())}}function tx(n,e){if(n&1&&p(0),n&2){let t=y(2);yn(" (showing ",t.visibleRange().start,"-",t.visibleRange().end,") ")}}function nx(n,e){if(n&1&&(u(0,"div",19)(1,"span",20),p(2,"Source"),c(),u(3,"span",21),p(4,"Assay"),c(),u(5,"span",22),p(6,"Characteristics"),c(),u(7,"span",23),p(8,"Factor Values"),c(),u(9,"span",24),p(10,"Comments"),c()(),u(11,"span",25),p(12),A(13,tx,1,2),c()),n&2){let t=y();m(12),yn(" ",t.table().columns.length," columns, ",t.table().sampleCount," samples "),m(),M(t.visibleRange()?13:-1)}}function ox(n,e){if(n&1&&(u(0,"div",8),it(1,"div",26),u(2,"span"),p(3),c()()),n&2){let t=y();m(3),V(t.loadingMessage())}}function ix(n,e){if(n&1){let t=R();u(0,"div",9)(1,"span"),p(2),c(),u(3,"button",27),b("click",function(){x(t);let i=y();return D(i.clearError())}),p(4,"\xD7"),c()()}if(n&2){let t=y();m(2),V(t.error())}}function rx(n,e){if(n&1){let t=R();u(0,"sdrf-filter-bar",28),b("filterChange",function(i){x(t);let r=y();return D(r.onFilterChange(i))}),c()}if(n&2){let t=y();T("table",t.table())}}function sx(n,e){n&1&&(u(0,"span",48),p(1,"*"),c())}function ax(n,e){if(n&1&&(u(0,"span",49),p(1),c()),n&2){let t=y(3);m(),V(t.sortDirection()==="asc"?"\u25B2":"\u25BC")}}function lx(n,e){if(n&1){let t=R();u(0,"th",45),b("click",function(i){let r=x(t).$implicit,s=y(2);return D(s.onHeaderClick(r.columnPosition,i))}),it(1,"span",46),u(2,"span",47),p(3),c(),A(4,sx,2,0,"span",48)(5,ax,2,1,"span",49),c()}if(n&2){let t,o=e.$implicit,i=y(2);Fn("col-type-"+i.getColumnTypeClass(o.name)),re("required",o.isRequired)("selected",((t=i.selectedCell())==null?null:t.col)===o.columnPosition)("sorted",i.sortColumn()===o.columnPosition),m(3),V(o.name),m(),M(o.isRequired?4:-1),m(),M(i.sortColumn()===o.columnPosition?5:-1)}}function cx(n,e){if(n&1){let t=R();u(0,"td",53),b("click",function(){let i=x(t).$implicit,r=y().$implicit,s=y(2);return D(s.selectCell(r,i.columnPosition))})("dblclick",function(){let i=x(t).$implicit,r=y().$implicit,s=y(2);return D(s.startEditing(r,i.columnPosition))})("contextmenu",function(i){let r=x(t).$implicit,s=y().$implicit,a=y(2);return D(a.onCellContextMenu(i,s,r.columnPosition))}),u(1,"span",54),p(2),c()()}if(n&2){let t=e.$implicit,o=y().$implicit,i=y(2);re("selected",i.isSelected(o,t.columnPosition))("has-error",i.hasCellError(o,t.columnPosition)),m(),re("reserved-value",i.isReservedValue(i.getCellValue(o,t.columnPosition)))("reserved-not-available",i.isReservedValueType(i.getCellValue(o,t.columnPosition),"not available"))("reserved-not-applicable",i.isReservedValueType(i.getCellValue(o,t.columnPosition),"not applicable"))("reserved-anonymized",i.isReservedValueType(i.getCellValue(o,t.columnPosition),"anonymized"))("reserved-pooled",i.isReservedValueType(i.getCellValue(o,t.columnPosition),"pooled")),m(),ne(" ",i.getCellValue(o,t.columnPosition)," ")}}function ux(n,e){if(n&1){let t=R();u(0,"tr")(1,"td",33)(2,"input",50),b("change",function(i){let r=x(t).$implicit,s=y(2);return D(s.toggleRowSelection(r,i))})("click",function(i){return x(t),D(i.stopPropagation())}),c()(),u(3,"td",51),b("click",function(i){let r=x(t).$implicit,s=y(2);return D(s.onRowHeaderClick(r,i))}),p(4),c(),se(5,cx,3,15,"td",52,Tm),c()}if(n&2){let t,o=e.$implicit,i=y(2);sn("height",i.ROW_HEIGHT,"px"),re("selected",((t=i.selectedCell())==null?null:t.row)===o)("row-selected",i.isRowSelected(o)),m(2),T("checked",i.isRowSelected(o)),m(2),ne(" ",o," "),m(),ae(i.table().columns)}}function dx(n,e){if(n&1){let t=R();u(0,"div",55)(1,"sdrf-cell-editor",56),b("save",function(i){x(t);let r=y(2);return D(r.onCellEditorSave(i))})("cancel",function(){x(t);let i=y(2);return D(i.cancelEditing())}),c()()}if(n&2){let t=y(2);sn("top",t.editorPosition().top,"px")("left",t.editorPosition().left,"px"),m(),T("value",t.getCellValue(t.editingCell().row,t.editingCell().col))("column",t.editingColumn())("rowIndex",t.editingCell().row)}}function fx(n,e){n&1&&p(0," \u2713 Validation Passed ")}function px(n,e){n&1&&p(0," \u2717 Validation Failed ")}function mx(n,e){if(n&1&&(u(0,"strong"),p(1),c()),n&2){let t=y().$implicit;m(),ne("",t.column,":")}}function hx(n,e){if(n&1&&(u(0,"li",61),A(1,mx,2,1,"strong"),p(2),c()),n&2){let t=e.$implicit;m(),M(t.column?1:-1),m(),ne(" ",t.message," ")}}function gx(n,e){if(n&1&&(u(0,"li",62),p(1),c()),n&2){let t=y(4);m(),ne("... and ",t.validationResult().errors.length-20," more errors")}}function yx(n,e){if(n&1&&(u(0,"div",59)(1,"h4"),p(2),c(),u(3,"ul"),se(4,hx,3,2,"li",61,Pt),A(6,gx,2,1,"li",62),c()()),n&2){let t=y(3);m(2),ne("Errors (",t.validationResult().errors.length,")"),m(2),ae(t.validationResult().errors.slice(0,20)),m(2),M(t.validationResult().errors.length>20?6:-1)}}function vx(n,e){if(n&1&&(u(0,"strong"),p(1),c()),n&2){let t=y().$implicit;m(),ne("",t.column,":")}}function _x(n,e){if(n&1&&(u(0,"li",63),A(1,vx,2,1,"strong"),p(2),c()),n&2){let t=e.$implicit;m(),M(t.column?1:-1),m(),ne(" ",t.message," ")}}function Cx(n,e){if(n&1&&(u(0,"li",62),p(1),c()),n&2){let t=y(4);m(),ne("... and ",t.validationResult().warnings.length-10," more warnings")}}function bx(n,e){if(n&1&&(u(0,"div",60)(1,"h4"),p(2),c(),u(3,"ul"),se(4,_x,3,2,"li",63,Pt),A(6,Cx,2,1,"li",62),c()()),n&2){let t=y(3);m(2),ne("Warnings (",t.validationResult().warnings.length,")"),m(2),ae(t.validationResult().warnings.slice(0,10)),m(2),M(t.validationResult().warnings.length>10?6:-1)}}function wx(n,e){if(n&1){let t=R();u(0,"div",57)(1,"div",58)(2,"h3"),A(3,fx,1,0)(4,px,1,0),c(),u(5,"button",27),b("click",function(){x(t);let i=y(2);return D(i.clearValidation())}),p(6,"\xD7"),c()(),A(7,yx,7,2,"div",59)(8,bx,7,2,"div",60),c()}if(n&2){let t=y(2);re("has-errors",!t.validationResult().isValid),m(3),M(t.validationResult().isValid?3:4),m(4),M(t.validationResult().errors.length>0?7:-1),m(),M(t.validationResult().warnings.length>0?8:-1)}}function xx(n,e){if(n&1){let t=R();u(0,"div",64)(1,"button",45),b("click",function(){x(t);let i=y(2);return D(i.selectAllWithSameValue())}),p(2," Select all with same value "),c(),u(3,"button",45),b("click",function(){x(t);let i=y(2);return D(i.selectAllInColumn())}),p(4," Select all in this column "),c(),it(5,"hr"),u(6,"button",45),b("click",function(){x(t);let i=y(2);return D(i.editSelectedCells())}),p(7," Edit selected cells "),c(),u(8,"button",45),b("click",function(){x(t);let i=y(2);return D(i.clearSelectedCells())}),p(9," Clear selected cells "),c(),u(10,"button",45),b("click",function(){x(t);let i=y(2);return D(i.closeContextMenu())}),p(11," Cancel "),c()()}if(n&2){let t=y(2);sn("top",t.contextMenu().y,"px")("left",t.contextMenu().x,"px")}}function Dx(n,e){if(n&1){let t=R();u(0,"sdrf-column-stats",65),b("close",function(){x(t);let i=y(2);return D(i.toggleStatsPanel())})("selectByValue",function(i){x(t);let r=y(2);return D(r.onSelectByValue(i))})("bulkEdit",function(i){x(t);let r=y(2);return D(r.onStatsPanelBulkEdit(i))})("selectSamples",function(i){x(t);let r=y(2);return D(r.onSelectSamples(i))}),c()}if(n&2){let t=y(2);T("table",t.table())("selectedSamples",t.selectedSamples())}}function Ex(n,e){if(n&1){let t=R();u(0,"div",29)(1,"div",30,1),b("scroll",function(i){x(t);let r=y();return D(r.onScroll(i))}),u(3,"div",31)(4,"table",32)(5,"thead")(6,"tr")(7,"th",33)(8,"input",34),b("change",function(){x(t);let i=y();return D(i.toggleSelectAllVisible())}),c()(),u(9,"th",35),p(10,"#"),c(),se(11,lx,6,11,"th",36,Tm),c()(),u(13,"tbody"),se(14,ux,7,8,"tr",37,gn),c()()(),A(16,dx,2,7,"div",38),c(),u(17,"div",39)(18,"label"),p(19," Go to row: "),u(20,"input",40),ut("ngModelChange",function(i){x(t);let r=y();return ft(r.jumpToRowInput,i)||(r.jumpToRowInput=i),D(i)}),b("keydown.enter",function(){x(t);let i=y();return D(i.jumpToRow())}),c()(),u(21,"button",41),b("click",function(){x(t);let i=y();return D(i.jumpToRow())}),p(22,"Go"),c()(),A(23,wx,9,5,"div",42)(24,xx,12,4,"div",43)(25,Dx,1,2,"sdrf-column-stats",44),c()}if(n&2){let t=y();re("with-sidebar",t.showStatsPanel()),m(3),sn("height",t.totalHeight(),"px"),m(),sn("transform","translateY("+t.tableOffset()+"px)"),m(4),T("checked",t.isAllVisibleSelected())("indeterminate",t.isSomeVisibleSelected()),m(3),ae(t.table().columns),m(3),ae(t.visibleRows()),m(2),M(t.editingCell()&&t.editingColumn()?16:-1),m(4),T("max",t.table().sampleCount),ct("ngModel",t.jumpToRowInput),m(3),M(t.validationResult()?23:-1),m(),M(t.contextMenu()?24:-1),m(),M(t.showStatsPanel()?25:-1)}}function Sx(n,e){n&1&&(u(0,"div",13)(1,"p"),p(2,"No SDRF file loaded"),c(),u(3,"p",66),p(4,"Import a file or provide a URL to get started"),c()())}function Mx(n,e){if(n&1){let t=R();u(0,"sdrf-recommend-panel",67),b("close",function(){x(t);let i=y();return D(i.toggleRecommendPanel())})("openSettings",function(){x(t);let i=y();return D(i.openLlmSettings())})("applyRecommendation",function(i){x(t);let r=y();return D(r.onApplyRecommendation(i))})("batchApply",function(i){x(t);let r=y();return D(r.onBatchApplyRecommendations(i))})("previewRecommendation",function(i){x(t);let r=y();return D(r.onPreviewRecommendation(i))}),c()}if(n&2){let t=y();T("table",t.table())}}function Ix(n,e){if(n&1){let t=R();u(0,"llm-settings-dialog",68),b("close",function(){x(t);let i=y();return D(i.closeLlmSettings())})("settingsSaved",function(){x(t);let i=y();return D(i.onLlmSettingsSaved())}),c()}}var jn=32,Im=10,Es=class n{constructor(e){this.ngZone=e}ROW_HEIGHT=jn;url;content;readonly=!1;tableChange=new L;validationComplete=new L;scrollContainer;table=S(null);loading=S(!1);loadingMessage=S("Loading...");error=S(null);selectedCell=S(null);editingCell=S(null);editingColumn=S(null);editorPosition=S({top:0,left:0});validationResult=S(null);scrollTop=S(0);containerHeight=S(500);jumpToRowInput=1;selectedSamples=S(new Set);showStatsPanel=S(!1);showRecommendPanel=S(!1);showLlmSettingsDialog=S(!1);contextMenu=S(null);lastSelectedRow=null;showFilterBar=S(!1);filteredIndices=S([]);sortColumn=S(-1);sortDirection=S("asc");sortedIndices=S([]);totalHeight=le(()=>{let e=this.table();return e?(this.filteredIndices().length>0?this.filteredIndices().length:e.sampleCount)*jn+jn+100:0});tableOffset=le(()=>{let e=this.visibleRange();return e?(e.start-1)*jn:0});visibleRange=le(()=>{let e=this.table();if(!e)return null;let t=this.scrollTop(),o=this.containerHeight(),i=Math.max(1,Math.floor(t/jn)-Im),r=Math.ceil(o/jn)+Im*2,s=Math.min(e.sampleCount,i+r);return{start:i,end:s}});effectiveRows=le(()=>{let e=this.table();if(!e)return[];let t=this.filteredIndices().length>0?[...this.filteredIndices()]:Array.from({length:e.sampleCount},(i,r)=>r+1),o=this.sortedIndices();if(o.length>0){let i=new Set(t);t=o.filter(r=>i.has(r))}return t});visibleRows=le(()=>{let e=this.visibleRange();if(!e)return[];let t=this.effectiveRows(),o=[];for(let i=e.start-1;i<e.end&&i<t.length;i++)t[i]&&o.push(t[i]);return o});parser=new _i;validator=new Ci;exporter=new bi;resizeObserver;ngOnInit(){this.url?this.loadFromUrl(this.url):this.content&&this.loadFromContent(this.content)}ngAfterViewInit(){this.scrollContainer&&(this.updateContainerHeight(),this.resizeObserver=new ResizeObserver(()=>{this.ngZone.run(()=>{this.updateContainerHeight()})}),this.resizeObserver.observe(this.scrollContainer.nativeElement))}ngOnChanges(e){e.url&&!e.url.firstChange&&this.url&&this.loadFromUrl(this.url),e.content&&!e.content.firstChange&&this.content&&this.loadFromContent(this.content)}ngOnDestroy(){this.resizeObserver?.disconnect()}loadFromUrl(e){return O(this,null,function*(){this.loading.set(!0),this.loadingMessage.set("Fetching file..."),this.error.set(null);try{let t=yield this.parser.parseFromUrl(e);this.handleParseResult(t)}catch(t){this.error.set(`Failed to load: ${t instanceof Error?t.message:String(t)}`)}finally{this.loading.set(!1)}})}loadFromContent(e){return O(this,null,function*(){this.loading.set(!0),this.loadingMessage.set("Parsing file..."),this.error.set(null);try{yield new Promise(o=>setTimeout(o,10));let t=this.parser.parseFromContent(e);this.handleParseResult(t)}catch(t){this.error.set(`Failed to parse: ${t instanceof Error?t.message:String(t)}`)}finally{this.loading.set(!1)}})}getTable(){return this.table()}validate(){return O(this,null,function*(){let e=this.table();if(!e)return null;this.loading.set(!0),this.loadingMessage.set("Validating...");try{yield new Promise(o=>setTimeout(o,10));let t=yield this.validator.validate(e);return this.validationResult.set(t),this.validationComplete.emit(t),t}finally{this.loading.set(!1)}})}exportTsv(){let e=this.table();if(!e)return;let t=e.metadata?.filename?.replace(/\.[^.]+$/,".tsv")||"sdrf.tsv";this.exporter.downloadTsv(e,t)}exportExcel(){return O(this,null,function*(){let e=this.table();if(!e)return;let t=e.metadata?.filename?.replace(/\.[^.]+$/,".xlsx")||"sdrf.xlsx";yield this.exporter.downloadExcel(e,t)})}onFileSelected(e){let t=e.target,o=t.files?.[0];o&&(this.loading.set(!0),this.loadingMessage.set(`Parsing ${o.name}...`),this.error.set(null),this.parser.parseFromFile(o).then(i=>{this.handleParseResult(i),this.loading.set(!1),t.value=""}))}onScroll(e){let t=e.target;this.scrollTop.set(t.scrollTop)}selectCell(e,t){this.selectedCell.set({row:e,col:t})}selectColumn(e){this.selectedCell.set({row:0,col:e})}startEditing(e,t){if(this.readonly)return;let o=this.table();if(!o||t>=o.columns.length)return;let i=`tr:nth-child(${e-(this.visibleRange()?.start??1)+1}) td:nth-child(${t+2})`,r=this.scrollContainer?.nativeElement.querySelector(i);if(r){let s=this.scrollContainer.nativeElement.getBoundingClientRect(),a=r.getBoundingClientRect(),l=a.bottom-s.top+this.scrollContainer.nativeElement.scrollTop+4,d=a.left-s.left+4,f=s.width-320;d>f&&(d=f),d<0&&(d=0),this.editorPosition.set({top:l,left:d})}else this.editorPosition.set({top:100,left:100});this.editingCell.set({row:e,col:t}),this.editingColumn.set(o.columns[t])}onCellEditorSave(e){let t=this.editingCell();if(!t){this.cancelEditing();return}this.setCellValue(t.row,t.col,e),this.editingCell.set(null),this.editingColumn.set(null)}cancelEditing(){this.editingCell.set(null),this.editingColumn.set(null)}clearError(){this.error.set(null)}clearValidation(){this.validationResult.set(null)}jumpToRow(){let e=this.table();if(!e||!this.scrollContainer)return;let t=Math.max(1,Math.min(this.jumpToRowInput,e.sampleCount)),o=(t-1)*jn;this.scrollContainer.nativeElement.scrollTop=o,this.scrollTop.set(o),this.selectedCell.set({row:t,col:0})}getCellValue(e,t){let o=this.table();if(!o||t>=o.columns.length)return"";let i=o.columns[t];return dt(i,e)}setCellValue(e,t,o){let i=this.table();if(!i||t>=i.columns.length)return;let r=H(I({},i),{columns:[...i.columns]}),s=H(I({},r.columns[t]),{modifiers:[...r.columns[t].modifiers]});if(o===s.value)s.modifiers=s.modifiers.filter(a=>!a.samples.split(",").map(d=>parseInt(d.trim(),10)).includes(e));else{let a=s.modifiers.find(l=>l.value===o);a?a.samples=`${a.samples},${e}`:s.modifiers.push({samples:String(e),value:o})}r.columns[t]=s,this.table.set(r),this.tableChange.emit(r)}isSelected(e,t){let o=this.selectedCell();return o?.row===e&&o?.col===t}hasCellError(e,t){let o=this.validationResult();if(!o)return!1;let i=this.table();if(!i)return!1;let r=i.columns[t];return o.errors.some(s=>s.column?.toLowerCase()===r.name.toLowerCase()&&(!s.row||s.row===e))}RESERVED_VALUES=["not available","not applicable","anonymized","pooled"];isReservedValue(e){if(!e)return!1;let t=e.toLowerCase().trim();return this.RESERVED_VALUES.includes(t)}isReservedValueType(e,t){return e?e.toLowerCase().trim()===t.toLowerCase():!1}updateContainerHeight(){this.scrollContainer&&this.containerHeight.set(this.scrollContainer.nativeElement.clientHeight)}handleParseResult(e){e.success&&e.table?(this.table.set(e.table),this.tableChange.emit(e.table),this.validationResult.set(null),this.scrollTop.set(0),this.clearSelection(),e.warnings.length>0&&console.warn("Parse warnings:",e.warnings),console.log(`Loaded ${e.table.sampleCount} samples, ${e.table.columns.length} columns in ${e.stats.parseTimeMs.toFixed(0)}ms`)):this.error.set(e.error||"Unknown error")}toggleStatsPanel(){this.showStatsPanel.set(!this.showStatsPanel())}toggleRecommendPanel(){this.showRecommendPanel.set(!this.showRecommendPanel())}openLlmSettings(){this.showLlmSettingsDialog.set(!0)}closeLlmSettings(){this.showLlmSettingsDialog.set(!1)}onLlmSettingsSaved(){console.log("LLM settings saved")}onApplyRecommendation(e){let t=e.recommendation;this.applyRecommendationToTable(t)}onBatchApplyRecommendations(e){for(let t of e.recommendations)this.applyRecommendationToTable(t);console.log(`Applied ${e.recommendations.length} recommendations`)}onPreviewRecommendation(e){if(e.sampleIndices.length>0){let t=e.sampleIndices[0];this.jumpToRowInput=t,this.jumpToRow(),this.selectCell(t,e.columnIndex)}}applyRecommendationToTable(e){for(let t of e.sampleIndices)this.setCellValue(t,e.columnIndex,e.suggestedValue);console.log(`Applied recommendation to ${e.column}: "${e.suggestedValue}" for ${e.sampleIndices.length} samples`)}isRowSelected(e){return this.selectedSamples().has(e)}toggleRowSelection(e,t){let o=t.target,i=new Set(this.selectedSamples());o.checked?i.add(e):i.delete(e),this.selectedSamples.set(i),this.lastSelectedRow=e}onRowHeaderClick(e,t){let o=new Set(this.selectedSamples());if(t.shiftKey&&this.lastSelectedRow!==null){let i=Math.min(this.lastSelectedRow,e),r=Math.max(this.lastSelectedRow,e);for(let s=i;s<=r;s++)o.add(s)}else t.ctrlKey||t.metaKey?o.has(e)?o.delete(e):o.add(e):(o.clear(),o.add(e));this.selectedSamples.set(o),this.lastSelectedRow=e}isAllVisibleSelected(){let e=this.visibleRows();return e.length===0?!1:e.every(t=>this.selectedSamples().has(t))}isSomeVisibleSelected(){let e=this.visibleRows(),t=this.selectedSamples(),o=e.some(r=>t.has(r)),i=e.every(r=>t.has(r));return o&&!i}toggleSelectAllVisible(){let e=this.visibleRows(),t=new Set(this.selectedSamples());if(this.isAllVisibleSelected())for(let o of e)t.delete(o);else for(let o of e)t.add(o);this.selectedSamples.set(t)}clearSelection(){this.selectedSamples.set(new Set),this.lastSelectedRow=null}onCellContextMenu(e,t,o){e.preventDefault(),this.contextMenu.set({x:e.clientX,y:e.clientY,row:t,col:o})}closeContextMenu(){this.contextMenu.set(null)}selectAllWithSameValue(){let e=this.contextMenu();if(!e)return;let t=this.getCellValue(e.row,e.col),o=this.table();if(!o)return;let i=new Set(this.selectedSamples());for(let r=1;r<=o.sampleCount;r++)this.getCellValue(r,e.col)===t&&i.add(r);this.selectedSamples.set(i),this.closeContextMenu()}selectAllInColumn(){let e=this.contextMenu(),t=this.table();if(!e||!t)return;let o=new Set;for(let i=1;i<=t.sampleCount;i++)o.add(i);this.selectedSamples.set(o),this.closeContextMenu()}editSelectedCells(){let e=this.contextMenu();e&&this.startEditing(e.row,e.col),this.closeContextMenu()}clearSelectedCells(){let e=this.contextMenu(),t=this.selectedSamples();if(!e||t.size===0){this.closeContextMenu();return}this.bulkSetValue(e.col,"",Array.from(t)),this.closeContextMenu()}onSelectByValue(e){let t=new Set(this.selectedSamples());for(let o of e.sampleIndices)t.add(o);this.selectedSamples.set(t)}onSelectSamples(e){this.selectedSamples.set(new Set(e))}onStatsPanelBulkEdit(e){this.bulkSetValue(e.columnIndex,e.newValue,e.sampleIndices)}onBulkColumnEdit(e){this.bulkSetValue(e.columnIndex,e.newValue,e.sampleIndices)}onCopyFromFirst(e){let t=Array.from(this.selectedSamples()).sort((r,s)=>r-s);if(t.length<2)return;let o=this.getCellValue(t[0],e),i=t.slice(1);this.bulkSetValue(e,o,i)}bulkSetValue(e,t,o){let i=this.table();if(!i||e>=i.columns.length)return;let r=H(I({},i),{columns:[...i.columns]}),s=H(I({},r.columns[e]),{modifiers:[...r.columns[e].modifiers]});for(let a of o)bm(s,a,t);r.columns[e]=s,this.table.set(r),this.tableChange.emit(r),console.log(`Bulk updated ${o.length} samples in column "${s.name}" to "${t}"`)}getColumnTypeClass(e){let t=e.toLowerCase().trim();return t==="source name"?"source":t==="assay name"?"assay":t.startsWith("characteristics[")?"characteristic":t.startsWith("factor value[")||t.startsWith("factorvalue[")?"factor":t.startsWith("comment[")?"comment":t==="technology type"||t==="fraction identifier"||t==="label"?"special":"other"}onHeaderClick(e,t){if(t.ctrlKey||t.metaKey||t.shiftKey){this.selectColumn(e);return}if(this.sortColumn()===e)if(this.sortDirection()==="asc")this.sortDirection.set("desc");else{this.sortColumn.set(-1),this.sortedIndices.set([]);return}else this.sortColumn.set(e),this.sortDirection.set("asc");this.applySorting()}applySorting(){let e=this.table(),t=this.sortColumn();if(!e||t<0){this.sortedIndices.set([]);return}let o=[];for(let r=1;r<=e.sampleCount;r++)o.push([r,this.getCellValue(r,t)]);let i=this.sortDirection()==="asc"?1:-1;o.sort((r,s)=>{let a=r[1].toLowerCase(),l=s[1].toLowerCase(),d=parseFloat(a),f=parseFloat(l);return!isNaN(d)&&!isNaN(f)?(d-f)*i:a.localeCompare(l)*i}),this.sortedIndices.set(o.map(r=>r[0]))}getActualRowIndex(e){let t=this.sortedIndices();return t.length===0?e:t[e-1]||e}toggleFilterBar(){this.showFilterBar.set(!this.showFilterBar())}onFilterChange(e){e.matchingIndices.length===e.totalCount?this.filteredIndices.set([]):this.filteredIndices.set(e.matchingIndices),this.scrollTop.set(0),this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=0)}static \u0275fac=function(t){return new(t||n)(me(ze))};static \u0275cmp=we({type:n,selectors:[["sdrf-editor"]],viewQuery:function(t,o){if(t&1&&Wr(Xw,5),t&2){let i;Kr(i=Yr())&&(o.scrollContainer=i.first)}},inputs:{url:"url",content:"content",readonly:"readonly"},outputs:{tableChange:"tableChange",validationComplete:"validationComplete"},features:[$e],decls:18,vars:13,consts:[["fileInput",""],["scrollContainer",""],[1,"sdrf-editor"],[1,"sdrf-toolbar"],[1,"toolbar-left"],["type","file","accept",".tsv,.txt,.sdrf",2,"display","none",3,"change"],[1,"btn","btn-primary",3,"click"],[1,"toolbar-right"],[1,"loading-overlay"],[1,"error-banner"],[3,"clearSelection","bulkEdit","copyFromFirst","table","selectedCount","selectedSamples"],[3,"table"],[1,"sdrf-content",3,"with-sidebar"],[1,"empty-state"],[1,"btn","btn-secondary",3,"click"],[1,"toolbar-divider"],["title","Filter rows",1,"btn",3,"click"],["title","Show column statistics",1,"btn",3,"click"],["title","AI-powered recommendations",1,"btn","btn-ai",3,"click"],[1,"column-legend"],[1,"legend-item","source"],[1,"legend-item","assay"],[1,"legend-item","characteristic"],[1,"legend-item","factor"],[1,"legend-item","comment"],[1,"table-info"],[1,"loading-spinner"],[1,"btn-close",3,"click"],[3,"filterChange","table"],[1,"sdrf-content"],[1,"sdrf-table-container",3,"scroll"],[1,"scroll-spacer"],[1,"sdrf-table"],[1,"row-header","checkbox-col"],["type","checkbox","title","Select all visible rows",3,"change","checked","indeterminate"],[1,"row-header"],[3,"class","required","selected","sorted"],[3,"selected","row-selected","height"],[1,"cell-editor-popup",3,"top","left"],[1,"jump-to-row"],["type","number","min","1",1,"jump-input",3,"ngModelChange","keydown.enter","max","ngModel"],[1,"btn","btn-small",3,"click"],[1,"validation-panel",3,"has-errors"],[1,"context-menu",3,"top","left"],[3,"table","selectedSamples"],[3,"click"],[1,"col-type-indicator"],[1,"col-name"],[1,"required-marker"],[1,"sort-indicator"],["type","checkbox",3,"change","click","checked"],[1,"row-header",3,"click"],[3,"selected","has-error"],[3,"click","dblclick","contextmenu"],[1,"cell-value"],[1,"cell-editor-popup"],[3,"save","cancel","value","column","rowIndex"],[1,"validation-panel"],[1,"validation-header"],[1,"validation-errors"],[1,"validation-warnings"],[1,"error"],[1,"more"],[1,"warning"],[1,"context-menu"],[3,"close","selectByValue","bulkEdit","selectSamples","table","selectedSamples"],[1,"hint"],[3,"close","openSettings","applyRecommendation","batchApply","previewRecommendation","table"],[3,"close","settingsSaved"]],template:function(t,o){if(t&1){let i=R();u(0,"div",2)(1,"div",3)(2,"div",4)(3,"input",5,0),b("change",function(s){return x(i),D(o.onFileSelected(s))}),c(),u(5,"button",6),b("click",function(){x(i);let s=bp(4);return D(s.click())}),p(6," Import File "),c(),A(7,ex,11,6),c(),u(8,"div",7),A(9,nx,14,3),c()(),A(10,ox,4,1,"div",8)(11,ix,5,1,"div",9),u(12,"sdrf-bulk-toolbar",10),b("clearSelection",function(){return x(i),D(o.clearSelection())})("bulkEdit",function(s){return x(i),D(o.onBulkColumnEdit(s))})("copyFromFirst",function(s){return x(i),D(o.onCopyFromFirst(s))}),c(),A(13,rx,1,1,"sdrf-filter-bar",11)(14,Ex,26,14,"div",12)(15,Sx,5,0,"div",13)(16,Mx,1,1,"sdrf-recommend-panel",11)(17,Ix,1,0,"llm-settings-dialog"),c()}t&2&&(re("loading",o.loading()),m(7),M(o.table()?7:-1),m(2),M(o.table()?9:-1),m(),M(o.loading()?10:-1),m(),M(o.error()?11:-1),m(),T("table",o.table())("selectedCount",o.selectedSamples().size)("selectedSamples",o.selectedSamples()),m(),M(o.table()&&o.showFilterBar()?13:-1),m(),M(o.table()?14:!o.loading()&&!o.error()?15:-1),m(2),M(o.showRecommendPanel()?16:-1),m(),M(o.showLlmSettingsDialog()?17:-1))},dependencies:[xe,De,Ie,gi,Ne,vi,yi,Te,ys,vs,_s,Cs,xs,Ds],styles:[".sdrf-editor[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;font-size:14px}.sdrf-toolbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:8px 16px;background:#f5f5f5;border-bottom:1px solid #ddd;gap:8px;flex-shrink:0}.toolbar-left[_ngcontent-%COMP%], .toolbar-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.btn[_ngcontent-%COMP%]{padding:6px 12px;border:1px solid #ccc;border-radius:4px;background:#fff;cursor:pointer;font-size:13px}.btn[_ngcontent-%COMP%]:hover{background:#f0f0f0}.btn-primary[_ngcontent-%COMP%]{background:#06c;color:#fff;border-color:#06c}.btn-primary[_ngcontent-%COMP%]:hover{background:#05a}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff;border-color:#6c757d}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.btn-small[_ngcontent-%COMP%]{padding:4px 8px;font-size:12px}.table-info[_ngcontent-%COMP%]{color:#666;font-size:12px}.column-legend[_ngcontent-%COMP%]{display:flex;gap:8px;margin-right:16px;padding-right:16px;border-right:1px solid #ddd}.legend-item[_ngcontent-%COMP%]{font-size:11px;padding:2px 6px;border-radius:3px;border-left:3px solid}.legend-item.source[_ngcontent-%COMP%]{border-left-color:#4caf50;background:#4caf501a}.legend-item.assay[_ngcontent-%COMP%]{border-left-color:#9c27b0;background:#9c27b01a}.legend-item.characteristic[_ngcontent-%COMP%]{border-left-color:#2196f3;background:#2196f31a}.legend-item.factor[_ngcontent-%COMP%]{border-left-color:#ff9800;background:#ff98001a}.legend-item.comment[_ngcontent-%COMP%]{border-left-color:#9e9e9e;background:#9e9e9e1a}.loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:#666;flex:1}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #f3f3f3;border-top:3px solid #0066cc;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:12px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.error-banner[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:#fee2e2;color:#b91c1c;border-bottom:1px solid #fca5a5;flex-shrink:0}.btn-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;cursor:pointer;padding:0 4px}.sdrf-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex:1;overflow:hidden;min-height:0}.sdrf-table-container[_ngcontent-%COMP%]{flex:1;overflow:auto;position:relative;min-height:0}.scroll-spacer[_ngcontent-%COMP%]{position:relative;width:fit-content;min-width:100%}.sdrf-table[_ngcontent-%COMP%]{border-collapse:collapse;font-size:13px;position:relative;will-change:transform}.sdrf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .sdrf-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:6px 8px;text-align:left;white-space:nowrap;max-width:300px;overflow:hidden;text-overflow:ellipsis;height:32px;box-sizing:border-box}.sdrf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:600;position:sticky;top:0;z-index:10}.sdrf-table[_ngcontent-%COMP%]   th.required[_ngcontent-%COMP%]{background:#fff3cd}.required-marker[_ngcontent-%COMP%]{color:#dc3545;margin-left:2px}.row-header[_ngcontent-%COMP%]{background:#f8f9fa;font-weight:500;text-align:center;min-width:60px;position:sticky;left:0;z-index:5}thead[_ngcontent-%COMP%]   .row-header[_ngcontent-%COMP%]{z-index:15}.sdrf-table[_ngcontent-%COMP%]   td.selected[_ngcontent-%COMP%], .sdrf-table[_ngcontent-%COMP%]   th.selected[_ngcontent-%COMP%]{background:#e3f2fd;outline:2px solid #2196f3;outline-offset:-2px}.sdrf-table[_ngcontent-%COMP%]   td.has-error[_ngcontent-%COMP%]{background:#ffebee}.cell-value[_ngcontent-%COMP%]{display:block;min-height:1em}.cell-value.reserved-value[_ngcontent-%COMP%]{color:#9e9e9e;font-style:italic}.cell-value.reserved-not-available[_ngcontent-%COMP%], .cell-value.reserved-not-applicable[_ngcontent-%COMP%]{color:#757575;font-style:italic;background:#f5f5f5;border-radius:3px;padding:2px 6px;margin:-2px -6px}.cell-value.reserved-anonymized[_ngcontent-%COMP%]{color:#7b1fa2;font-style:italic;background:#f3e5f5;border-radius:3px;padding:2px 6px;margin:-2px -6px}.cell-value.reserved-pooled[_ngcontent-%COMP%]{color:#1565c0;font-style:italic;background:#e3f2fd;border-radius:3px;padding:2px 6px;margin:-2px -6px}.cell-editor-popup[_ngcontent-%COMP%]{position:absolute;z-index:100;animation:_ngcontent-%COMP%_fadeIn .15s ease-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}.jump-to-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 16px;background:#f8f9fa;border-top:1px solid #ddd;flex-shrink:0}.jump-to-row[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px}.jump-input[_ngcontent-%COMP%]{width:80px;padding:4px 8px;border:1px solid #ccc;border-radius:4px;font-size:13px}.validation-panel[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #ddd;background:#f8f9fa;max-height:200px;overflow-y:auto;flex-shrink:0}.validation-panel.has-errors[_ngcontent-%COMP%]{background:#fff5f5}.validation-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.validation-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:14px}.validation-errors[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .validation-warnings[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:13px;font-weight:600}.validation-errors[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%], .validation-warnings[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.validation-errors[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b91c1c}.validation-warnings[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#b45309}.validation-errors[_ngcontent-%COMP%]   li.more[_ngcontent-%COMP%], .validation-warnings[_ngcontent-%COMP%]   li.more[_ngcontent-%COMP%]{font-style:italic;opacity:.8}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px;color:#666;flex:1}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:4px 0}.empty-state[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px;color:#999}.col-type-indicator[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;width:3px}.sdrf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;padding-left:10px}.sdrf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]   .col-name[_ngcontent-%COMP%]{display:inline}.col-type-source[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#4caf50}.col-type-source[_ngcontent-%COMP%]{border-left:3px solid #4caf50}.col-type-assay[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#9c27b0}.col-type-assay[_ngcontent-%COMP%]{border-left:3px solid #9c27b0}.col-type-characteristic[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#2196f3}.col-type-characteristic[_ngcontent-%COMP%]{border-left:3px solid #2196f3}.col-type-factor[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#ff9800}.col-type-factor[_ngcontent-%COMP%]{border-left:3px solid #ff9800}.col-type-comment[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#9e9e9e}.col-type-comment[_ngcontent-%COMP%]{border-left:3px solid #9e9e9e}.col-type-special[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#607d8b}.col-type-special[_ngcontent-%COMP%]{border-left:3px solid #607d8b}.col-type-other[_ngcontent-%COMP%]   .col-type-indicator[_ngcontent-%COMP%]{background:#bdbdbd}.col-type-other[_ngcontent-%COMP%]{border-left:3px solid #bdbdbd}.sort-indicator[_ngcontent-%COMP%]{margin-left:4px;font-size:10px;color:#1976d2}.sdrf-table[_ngcontent-%COMP%]   th.sorted[_ngcontent-%COMP%]{background:#e3f2fd}.sdrf-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:hover{cursor:pointer;background:#f0f0f0}.toolbar-divider[_ngcontent-%COMP%]{width:1px;height:24px;background:#ddd;margin:0 4px}.btn-active[_ngcontent-%COMP%]{background:#e3f2fd!important;border-color:#2196f3!important;color:#1976d2!important}.btn-ai[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border-color:#667eea}.btn-ai[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#5a67d8,#6b46c1)}.btn-ai.btn-active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#5a67d8,#6b46c1)!important;border-color:#5a67d8!important;box-shadow:0 0 0 2px #667eea4d}.sdrf-content.with-sidebar[_ngcontent-%COMP%]{flex-direction:row}.sdrf-content.with-sidebar[_ngcontent-%COMP%]   .sdrf-table-container[_ngcontent-%COMP%]{flex:1}.checkbox-col[_ngcontent-%COMP%]{width:32px;min-width:32px;max-width:32px;text-align:center;padding:4px!important}.checkbox-col[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{margin:0;cursor:pointer}tr.row-selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#e8f5e9!important}tr.row-selected[_ngcontent-%COMP%]   td.row-header[_ngcontent-%COMP%]{background:#c8e6c9!important}.context-menu[_ngcontent-%COMP%]{position:absolute;z-index:200;background:#fff;border:1px solid #ddd;border-radius:6px;box-shadow:0 4px 12px #00000026;padding:4px 0;min-width:200px}.context-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;width:100%;padding:8px 16px;border:none;background:none;text-align:left;cursor:pointer;font-size:13px}.context-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f5f5f5}.context-menu[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:4px 0;border:none;border-top:1px solid #eee}"],changeDetection:0})};var Ss=class n{sdrfUrl="";activeUrl="";sampleUrl="https://raw.githubusercontent.com/bigbio/proteomics-metadata-standard/master/annotated-projects/PXD000612/sdrf.tsv";ngOnInit(){let t=new URLSearchParams(window.location.search).get("url");t&&(this.sdrfUrl=t,this.activeUrl=t)}loadUrl(){this.sdrfUrl&&(this.activeUrl=this.sdrfUrl)}loadSample(){this.sdrfUrl=this.sampleUrl,this.activeUrl=this.sampleUrl}onTableChange(e){console.log("Table changed:",e)}onValidation(e){console.log("Validation result:",e)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=we({type:n,selectors:[["app-root"]],decls:17,vars:2,consts:[[1,"app-container"],[1,"app-header"],[1,"app-main"],[1,"app-controls"],["type","text","placeholder","Enter SDRF URL...",1,"url-input",3,"ngModelChange","ngModel"],[1,"btn","btn-primary",3,"click"],[1,"btn","btn-secondary",3,"click"],[1,"editor-wrapper"],[3,"tableChange","validationComplete","url"]],template:function(t,o){t&1&&(u(0,"div",0)(1,"header",1)(2,"h1"),p(3,"SDRF Editor"),c(),u(4,"p"),p(5,"Standalone SDRF (Sample and Data Relationship Format) editor for proteomics metadata"),c()(),u(6,"main",2)(7,"div",3)(8,"label"),p(9," Load from URL: "),u(10,"input",4),ut("ngModelChange",function(r){return ft(o.sdrfUrl,r)||(o.sdrfUrl=r),r}),c()(),u(11,"button",5),b("click",function(){return o.loadUrl()}),p(12,"Load"),c(),u(13,"button",6),b("click",function(){return o.loadSample()}),p(14,"Load Sample"),c()(),u(15,"div",7)(16,"sdrf-editor",8),b("tableChange",function(r){return o.onTableChange(r)})("validationComplete",function(r){return o.onValidation(r)}),c()()()()),t&2&&(m(10),ct("ngModel",o.sdrfUrl),m(6),T("url",o.activeUrl))},dependencies:[De,Ie,Ne,Te,Es],styles:[".app-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh}.app-header[_ngcontent-%COMP%]{padding:16px 24px;background:#1a1a2e;color:#fff}.app-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px}.app-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;opacity:.8;font-size:14px}.app-main[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}.app-controls[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 24px;background:#f5f5f5;border-bottom:1px solid #ddd}.app-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1}.url-input[_ngcontent-%COMP%]{flex:1;padding:8px 12px;border:1px solid #ccc;border-radius:4px;font-size:14px}.btn[_ngcontent-%COMP%]{padding:8px 16px;border:none;border-radius:4px;font-size:14px;cursor:pointer;transition:background-color .2s}.btn-primary[_ngcontent-%COMP%]{background:#06c;color:#fff}.btn-primary[_ngcontent-%COMP%]:hover{background:#05a}.btn-secondary[_ngcontent-%COMP%]{background:#6c757d;color:#fff}.btn-secondary[_ngcontent-%COMP%]:hover{background:#5a6268}.editor-wrapper[_ngcontent-%COMP%]{flex:1;overflow:hidden}sdrf-editor[_ngcontent-%COMP%]{display:block;height:100%}"]})};Dc(Ss,{providers:[]}).catch(n=>console.error(n));
